{"version":3,"file":"static/js/1697.b21cbe5d.chunk.js","mappings":"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","sources":["../node_modules/date-fns/esm/add/index.js","../node_modules/date-fns/esm/subDays/index.js","../node_modules/date-fns/esm/subMonths/index.js","../node_modules/date-fns/esm/sub/index.js","../node_modules/lower-case/src/index.ts","../node_modules/no-case/src/index.ts","../node_modules/react-map-gl/src/components/use-map.tsx","../node_modules/react-map-gl/src/utils/transform.ts","../node_modules/react-map-gl/src/utils/style-utils.ts","../node_modules/react-map-gl/src/utils/deep-equal.ts","../node_modules/react-map-gl/src/mapbox/mapbox.ts","../node_modules/react-map-gl/src/mapbox/create-ref.ts","../node_modules/react-map-gl/src/utils/use-isomorphic-layout-effect.ts","../node_modules/react-map-gl/src/utils/set-globals.ts","../node_modules/react-map-gl/src/components/map.tsx","../node_modules/react-map-gl/src/utils/apply-react-style.ts","../node_modules/react-map-gl/src/components/marker.ts","../node_modules/react-map-gl/src/components/popup.ts","../node_modules/react-map-gl/src/components/use-control.ts","../node_modules/react-map-gl/src/components/attribution-control.ts","../node_modules/react-map-gl/src/components/fullscreen-control.ts","../node_modules/react-map-gl/src/components/geolocate-control.ts","../node_modules/react-map-gl/src/components/navigation-control.ts","../node_modules/react-map-gl/src/components/scale-control.ts"],"sourcesContent":["import addDays from \"../addDays/index.js\";\nimport addMonths from \"../addMonths/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\n\n/**\n * @name add\n * @category Common Helpers\n * @summary Add the specified years, months, weeks, days, hours, minutes and seconds to the given date.\n *\n * @description\n * Add the specified years, months, weeks, days, hours, minutes and seconds to the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Duration} duration - the object with years, months, weeks, days, hours, minutes and seconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n *\n * | Key            | Description                        |\n * |----------------|------------------------------------|\n * | years          | Amount of years to be added        |\n * | months         | Amount of months to be added       |\n * | weeks          | Amount of weeks to be added        |\n * | days           | Amount of days to be added         |\n * | hours          | Amount of hours to be added        |\n * | minutes        | Amount of minutes to be added      |\n * | seconds        | Amount of seconds to be added      |\n *\n * All values default to 0\n *\n * @returns {Date} the new date with the seconds added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add the following duration to 1 September 2014, 10:19:50\n * const result = add(new Date(2014, 8, 1, 10, 19, 50), {\n *   years: 2,\n *   months: 9,\n *   weeks: 1,\n *   days: 7,\n *   hours: 5,\n *   minutes: 9,\n *   seconds: 30,\n * })\n * //=> Thu Jun 15 2017 15:29:20\n */\nexport default function add(dirtyDate, duration) {\n  requiredArgs(2, arguments);\n  if (!duration || typeof duration !== 'object') return new Date(NaN);\n  var years = duration.years ? toInteger(duration.years) : 0;\n  var months = duration.months ? toInteger(duration.months) : 0;\n  var weeks = duration.weeks ? toInteger(duration.weeks) : 0;\n  var days = duration.days ? toInteger(duration.days) : 0;\n  var hours = duration.hours ? toInteger(duration.hours) : 0;\n  var minutes = duration.minutes ? toInteger(duration.minutes) : 0;\n  var seconds = duration.seconds ? toInteger(duration.seconds) : 0; // Add years and months\n\n  var date = toDate(dirtyDate);\n  var dateWithMonths = months || years ? addMonths(date, months + years * 12) : date; // Add weeks and days\n\n  var dateWithDays = days || weeks ? addDays(dateWithMonths, days + weeks * 7) : dateWithMonths; // Add days, hours, minutes and seconds\n\n  var minutesToAdd = minutes + hours * 60;\n  var secondsToAdd = seconds + minutesToAdd * 60;\n  var msToAdd = secondsToAdd * 1000;\n  var finalDate = new Date(dateWithDays.getTime() + msToAdd);\n  return finalDate;\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport addDays from \"../addDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @description\n * Subtract the specified number of days from the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the days subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\n\nexport default function subDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addDays(dirtyDate, -amount);\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport addMonths from \"../addMonths/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name subMonths\n * @category Month Helpers\n * @summary Subtract the specified number of months from the given date.\n *\n * @description\n * Subtract the specified number of months from the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the months subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 5 months from 1 February 2015:\n * const result = subMonths(new Date(2015, 1, 1), 5)\n * //=> Mon Sep 01 2014 00:00:00\n */\n\nexport default function subMonths(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMonths(dirtyDate, -amount);\n}","import subDays from \"../subDays/index.js\";\nimport subMonths from \"../subMonths/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\n/**\n * @name sub\n * @category Common Helpers\n * @summary Subtract the specified years, months, weeks, days, hours, minutes and seconds from the given date.\n *\n * @description\n * Subtract the specified years, months, weeks, days, hours, minutes and seconds from the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Duration} duration - the object with years, months, weeks, days, hours, minutes and seconds to be subtracted\n *\n * | Key     | Description                        |\n * |---------|------------------------------------|\n * | years   | Amount of years to be subtracted   |\n * | months  | Amount of months to be subtracted  |\n * | weeks   | Amount of weeks to be subtracted   |\n * | days    | Amount of days to be subtracted    |\n * | hours   | Amount of hours to be subtracted   |\n * | minutes | Amount of minutes to be subtracted |\n * | seconds | Amount of seconds to be subtracted |\n *\n * All values default to 0\n *\n * @returns {Date} the new date with the seconds subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract the following duration from 15 June 2017 15:29:20\n * const result = sub(new Date(2017, 5, 15, 15, 29, 20), {\n *   years: 2,\n *   months: 9,\n *   weeks: 1,\n *   days: 7,\n *   hours: 5,\n *   minutes: 9,\n *   seconds: 30\n * })\n * //=> Mon Sep 1 2014 10:19:50\n */\n\nexport default function sub(date, duration) {\n  requiredArgs(2, arguments);\n  if (!duration || typeof duration !== 'object') return new Date(NaN);\n  var years = duration.years ? toInteger(duration.years) : 0;\n  var months = duration.months ? toInteger(duration.months) : 0;\n  var weeks = duration.weeks ? toInteger(duration.weeks) : 0;\n  var days = duration.days ? toInteger(duration.days) : 0;\n  var hours = duration.hours ? toInteger(duration.hours) : 0;\n  var minutes = duration.minutes ? toInteger(duration.minutes) : 0;\n  var seconds = duration.seconds ? toInteger(duration.seconds) : 0; // Subtract years and months\n\n  var dateWithoutMonths = subMonths(date, months + years * 12); // Subtract weeks and days\n\n  var dateWithoutDays = subDays(dateWithoutMonths, days + weeks * 7); // Subtract hours, minutes and seconds\n\n  var minutestoSub = minutes + hours * 60;\n  var secondstoSub = seconds + minutestoSub * 60;\n  var mstoSub = secondstoSub * 1000;\n  var finalDate = new Date(dateWithoutDays.getTime() - mstoSub);\n  return finalDate;\n}","/**\n * Locale character mapping rules.\n */\ninterface Locale {\n  regexp: RegExp;\n  map: Record<string, string>;\n}\n\n/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nconst SUPPORTED_LOCALE: Record<string, Locale> = {\n  tr: {\n    regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n    map: {\n      İ: \"\\u0069\",\n      I: \"\\u0131\",\n      İ: \"\\u0069\",\n    },\n  },\n  az: {\n    regexp: /\\u0130/g,\n    map: {\n      İ: \"\\u0069\",\n      I: \"\\u0131\",\n      İ: \"\\u0069\",\n    },\n  },\n  lt: {\n    regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n    map: {\n      I: \"\\u0069\\u0307\",\n      J: \"\\u006A\\u0307\",\n      Į: \"\\u012F\\u0307\",\n      Ì: \"\\u0069\\u0307\\u0300\",\n      Í: \"\\u0069\\u0307\\u0301\",\n      Ĩ: \"\\u0069\\u0307\\u0303\",\n    },\n  },\n};\n\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str: string, locale: string) {\n  const lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n  if (lang) return lowerCase(str.replace(lang.regexp, (m) => lang.map[m]));\n  return lowerCase(str);\n}\n\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str: string) {\n  return str.toLowerCase();\n}\n","import { lowerCase } from \"lower-case\";\n\nexport interface Options {\n  splitRegexp?: RegExp | RegExp[];\n  stripRegexp?: RegExp | RegExp[];\n  delimiter?: string;\n  transform?: (part: string, index: number, parts: string[]) => string;\n}\n\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nconst DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n\n// Remove all non-word characters.\nconst DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input: string, options: Options = {}) {\n  const {\n    splitRegexp = DEFAULT_SPLIT_REGEXP,\n    stripRegexp = DEFAULT_STRIP_REGEXP,\n    transform = lowerCase,\n    delimiter = \" \",\n  } = options;\n\n  let result = replace(\n    replace(input, splitRegexp, \"$1\\0$2\"),\n    stripRegexp,\n    \"\\0\"\n  );\n  let start = 0;\n  let end = result.length;\n\n  // Trim the delimiter from around the output string.\n  while (result.charAt(start) === \"\\0\") start++;\n  while (result.charAt(end - 1) === \"\\0\") end--;\n\n  // Transform each token independently.\n  return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input: string, re: RegExp | RegExp[], value: string) {\n  if (re instanceof RegExp) return input.replace(re, value);\n  return re.reduce((input, re) => input.replace(re, value), input);\n}\n","import * as React from 'react';\nimport {useState, useCallback, useMemo, useContext} from 'react';\n\nimport {MapRef} from '../mapbox/create-ref';\nimport {MapContext} from './map';\n\ntype MountedMapsContextValue = {\n  maps: {[id: string]: MapRef};\n  onMapMount: (map: MapRef, id: string) => void;\n  onMapUnmount: (id: string) => void;\n};\n\nexport const MountedMapsContext = React.createContext<MountedMapsContextValue>(null);\n\nexport const MapProvider: React.FC<{children?: React.ReactNode}> = props => {\n  const [maps, setMaps] = useState<{[id: string]: MapRef}>({});\n\n  const onMapMount = useCallback((map: MapRef, id: string = 'default') => {\n    setMaps(currMaps => {\n      if (id === 'current') {\n        throw new Error(\"'current' cannot be used as map id\");\n      }\n      if (currMaps[id]) {\n        throw new Error(`Multiple maps with the same id: ${id}`);\n      }\n      return {...currMaps, [id]: map};\n    });\n  }, []);\n\n  const onMapUnmount = useCallback((id: string = 'default') => {\n    setMaps(currMaps => {\n      if (currMaps[id]) {\n        const nextMaps = {...currMaps};\n        delete nextMaps[id];\n        return nextMaps;\n      }\n      return currMaps;\n    });\n  }, []);\n\n  return (\n    <MountedMapsContext.Provider\n      value={{\n        maps,\n        onMapMount,\n        onMapUnmount\n      }}\n    >\n      {props.children}\n    </MountedMapsContext.Provider>\n  );\n};\n\nexport function useMap(): {current?: MapRef; [id: string]: MapRef | undefined} {\n  const maps = useContext(MountedMapsContext)?.maps;\n  const currentMap = useContext(MapContext);\n\n  const mapsWithCurrent = useMemo(() => {\n    return {...maps, current: currentMap?.map};\n  }, [maps, currentMap]);\n\n  return mapsWithCurrent;\n}\n","import type {MapboxProps} from '../mapbox/mapbox';\nimport type {Transform, ViewState} from '../types';\n\n/**\n * Make a copy of a transform\n * @param tr\n */\nexport function cloneTransform(tr: Transform): Transform {\n  const newTransform = tr.clone();\n  // Work around mapbox bug - this value is not assigned in clone(), only in resize()\n  newTransform.pixelsToGLUnits = tr.pixelsToGLUnits;\n  return newTransform;\n}\n\n/**\n * Capture a transform's current state\n * @param transform\n * @returns descriptor of the view state\n */\nexport function transformToViewState(tr: Transform): ViewState {\n  return {\n    longitude: tr.center.lng,\n    latitude: tr.center.lat,\n    zoom: tr.zoom,\n    pitch: tr.pitch,\n    bearing: tr.bearing,\n    padding: tr.padding\n  };\n}\n\n/* eslint-disable complexity */\n/**\n * Mutate a transform to match the given view state\n * @param transform\n * @param viewState\n * @returns true if the transform has changed\n */\nexport function applyViewStateToTransform(tr: Transform, props: MapboxProps): boolean {\n  const v: Partial<ViewState> = props.viewState || props;\n  let changed = false;\n\n  if ('longitude' in v && 'latitude' in v) {\n    const center = tr.center;\n    // @ts-ignore\n    tr.center = new center.constructor(v.longitude, v.latitude);\n    changed = changed || center !== tr.center;\n  }\n  if ('zoom' in v) {\n    const zoom = tr.zoom;\n    tr.zoom = v.zoom;\n    changed = changed || zoom !== tr.zoom;\n  }\n  if ('bearing' in v) {\n    const bearing = tr.bearing;\n    tr.bearing = v.bearing;\n    changed = changed || bearing !== tr.bearing;\n  }\n  if ('pitch' in v) {\n    const pitch = tr.pitch;\n    tr.pitch = v.pitch;\n    changed = changed || pitch !== tr.pitch;\n  }\n  if (v.padding && !tr.isPaddingEqual(v.padding)) {\n    changed = true;\n    tr.padding = v.padding;\n  }\n  return changed;\n}\n","import {ImmutableLike, MapboxStyle} from '../types';\n\nconst refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n\n// Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\nexport function normalizeStyle(style: string | MapboxStyle | ImmutableLike): string | MapboxStyle {\n  if (!style) {\n    return null;\n  }\n  if (typeof style === 'string') {\n    return style;\n  }\n  if ('toJS' in style) {\n    style = style.toJS() as MapboxStyle;\n  }\n  if (!style.layers) {\n    return style;\n  }\n  const layerIndex = {};\n\n  for (const layer of style.layers) {\n    layerIndex[layer.id] = layer;\n  }\n\n  const layers = style.layers.map(layer => {\n    // @ts-expect-error\n    const layerRef = layerIndex[layer.ref];\n    let normalizedLayer = null;\n\n    if ('interactive' in layer) {\n      normalizedLayer = {...layer};\n      // Breaks style diffing :(\n      delete normalizedLayer.interactive;\n    }\n\n    // Style diffing doesn't work with refs so expand them out manually before diffing.\n    if (layerRef) {\n      normalizedLayer = normalizedLayer || {...layer};\n      delete normalizedLayer.ref;\n      // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n      for (const propName of refProps) {\n        if (propName in layerRef) {\n          normalizedLayer[propName] = layerRef[propName];\n        }\n      }\n    }\n\n    return normalizedLayer || layer;\n  });\n\n  // Do not mutate the style object provided by the user\n  return {...style, layers};\n}\n","import type {PointLike} from '../types';\n\n/**\n * Compare two points\n * @param a\n * @param b\n * @returns true if the points are equal\n */\nexport function arePointsEqual(a?: PointLike, b?: PointLike): boolean {\n  const ax = Array.isArray(a) ? a[0] : a ? a.x : 0;\n  const ay = Array.isArray(a) ? a[1] : a ? a.y : 0;\n  const bx = Array.isArray(b) ? b[0] : b ? b.x : 0;\n  const by = Array.isArray(b) ? b[1] : b ? b.y : 0;\n  return ax === bx && ay === by;\n}\n\n/* eslint-disable complexity */\n/**\n * Compare any two objects\n * @param a\n * @param b\n * @returns true if the objects are deep equal\n */\nexport function deepEqual(a: any, b: any): boolean {\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b) || a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (!deepEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n    return true;\n  } else if (Array.isArray(b)) {\n    return false;\n  }\n  if (typeof a === 'object' && typeof b === 'object') {\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    for (const key of aKeys) {\n      if (!b.hasOwnProperty(key)) {\n        return false;\n      }\n      if (!deepEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n","import {transformToViewState, applyViewStateToTransform, cloneTransform} from '../utils/transform';\nimport {normalizeStyle} from '../utils/style-utils';\nimport {deepEqual} from '../utils/deep-equal';\n\nimport type {\n  Transform,\n  ProjectionSpecification,\n  ViewState,\n  ViewStateChangeEvent,\n  DragPanOptions,\n  ZoomRotateOptions,\n  TransformRequestFunction,\n  Light,\n  Fog,\n  TerrainSpecification,\n  MapboxStyle,\n  ImmutableLike,\n  LngLatBoundsLike,\n  FitBoundsOptions,\n  MapMouseEvent,\n  MapLayerMouseEvent,\n  MapLayerTouchEvent,\n  MapWheelEvent,\n  MapBoxZoomEvent,\n  MapStyleDataEvent,\n  MapSourceDataEvent,\n  MapboxEvent,\n  ErrorEvent,\n  MapboxGeoJSONFeature,\n  MapboxMap\n} from '../types';\n\nexport type MapboxProps = Partial<ViewState> & {\n  // Init options\n  mapboxAccessToken?: string;\n\n  /** Camera options used when constructing the Map instance */\n  initialViewState?: Partial<ViewState> & {\n    /** The initial bounds of the map. If bounds is specified, it overrides longitude, latitude and zoom options. */\n    bounds?: LngLatBoundsLike;\n    /** A fitBounds options object to use only when setting the bounds option. */\n    fitBoundsOptions?: FitBoundsOptions;\n  };\n\n  /** If provided, render into an external WebGL context */\n  gl?: WebGLRenderingContext;\n\n  /**\n   * If true, the gl context will be created with MSA antialiasing, which can be useful for antialiasing custom layers.\n   * This is false by default as a performance optimization.\n   * @default false\n   */\n  antialias?: boolean;\n  /**\n   * If true, an attribution control will be added to the map.\n   * @default true\n   */\n  attributionControl?: boolean;\n  /**\n   * Snap to north threshold in degrees.\n   * @default 7\n   */\n  bearingSnap?: number;\n  /**\n   * The max number of pixels a user can shift the mouse pointer during a click for it to be\n   * considered a valid click (as opposed to a mouse drag).\n   * @default 3\n   */\n  clickTolerance?: number;\n  /**\n   * If `true`, Resource Timing API information will be collected for requests made by GeoJSON\n   * and Vector Tile web workers (this information is normally inaccessible from the main\n   * Javascript thread). Information will be returned in a `resourceTiming` property of\n   * relevant `data` events.\n   * @default false\n   */\n  collectResourceTiming?: boolean;\n  /**\n   * If `true` , scroll zoom will require pressing the ctrl or ⌘ key while scrolling to zoom map,\n   * and touch pan will require using two fingers while panning to move the map.\n   * Touch pitch will require three fingers to activate if enabled.\n   */\n  cooperativeGestures?: boolean;\n  /**\n   * If `true`, symbols from multiple sources can collide with each other during collision\n   * detection. If `false`, collision detection is run separately for the symbols in each source.\n   * @default true\n   */\n  crossSourceCollisions?: boolean;\n  /** String or strings to show in an AttributionControl.\n   * Only applicable if options.attributionControl is `true`. */\n  customAttribution?: string | string[];\n  /**\n   * Controls the duration of the fade-in/fade-out animation for label collisions, in milliseconds.\n   * This setting affects all symbol layers. This setting does not affect the duration of runtime\n   * styling transitions or raster tile cross-fading.\n   * @default 300\n   */\n  fadeDuration?: number;\n  /** If true, map creation will fail if the implementation determines that the performance of the created WebGL context would be dramatically lower than expected.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat?: boolean;\n  /** If `true`, the map's position (zoom, center latitude, center longitude, bearing, and pitch) will be synced with the hash fragment of the page's URL.\n   * For example, `http://path/to/my/page.html#2.59/39.26/53.07/-24.1/60`.\n   * An additional string may optionally be provided to indicate a parameter-styled hash,\n   * e.g. http://path/to/my/page.html#map=2.59/39.26/53.07/-24.1/60&foo=bar, where foo\n   * is a custom parameter and bar is an arbitrary hash distinct from the map hash.\n   */\n  hash?: boolean | string;\n  /** If false, no mouse, touch, or keyboard listeners are attached to the map, so it will not respond to input\n   * @default true\n   */\n  interactive?: boolean;\n  /** A patch to apply to the default localization table for UI strings, e.g. control tooltips.\n   * The `locale` object maps namespaced UI string IDs to translated strings in the target language;\n   * see `src/ui/default_locale.js` for an example with all supported string IDs.\n   * The object may specify all UI strings (thereby adding support for a new translation) or\n   * only a subset of strings (thereby patching the default translation table).\n   */\n  locale?: {[key: string]: string};\n  /**\n   * Overrides the generation of all glyphs and font settings except font-weight keywords\n   * Also overrides localIdeographFontFamily\n   * @default null\n   */\n  localFontFamily?: string;\n  /**\n   * If specified, defines a CSS font-family for locally overriding generation of glyphs in the\n   * 'CJK Unified Ideographs' and 'Hangul Syllables' ranges. In these ranges, font settings from\n   * the map's style will be ignored, except for font-weight keywords (light/regular/medium/bold).\n   * The purpose of this option is to avoid bandwidth-intensive glyph server requests.\n   * @default \"sans-serif\"\n   */\n  localIdeographFontFamily?: string;\n  /**\n   * A string representing the position of the Mapbox wordmark on the map.\n   * @default \"bottom-left\"\n   */\n  logoPosition?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  /**\n   * The maximum number of tiles stored in the tile cache for a given source. If omitted, the\n   * cache will be dynamically sized based on the current viewport.\n   * @default null\n   */\n  maxTileCacheSize?: number;\n  /**\n   * If true, map will prioritize rendering for performance by reordering layers\n   * If false, layers will always be drawn in the specified order\n   * @default true\n   */\n  optimizeForTerrain?: boolean;\n  /**\n   * If `false`, the map's pitch (tilt) control with \"drag to rotate\" interaction will be disabled.\n   * @default true\n   */\n  pitchWithRotate?: boolean;\n  /** If true, The maps canvas can be exported to a PNG using map.getCanvas().toDataURL();. This is false by default as a performance optimization.\n   * @default false\n   */\n  preserveDrawingBuffer?: boolean;\n  /**\n   * If `false`, the map won't attempt to re-request tiles once they expire per their HTTP\n   * `cacheControl`/`expires` headers.\n   * @default true\n   */\n  refreshExpiredTiles?: boolean;\n  /**\n   * Allows for the usage of the map in automated tests without an accessToken with custom self-hosted test fixtures.\n   * @default null\n   */\n  testMode?: boolean;\n  /**\n   * If  true, the map will automatically resize when the browser window resizes\n   * @default true\n   */\n  trackResize?: boolean;\n  /**\n   * A callback run before the Map makes a request for an external URL. The callback can be\n   * used to modify the url, set headers, or set the credentials property for cross-origin requests.\n   * @default null\n   */\n  transformRequest?: TransformRequestFunction;\n\n  // Handlers\n\n  /**\n   * If true, enable the \"box zoom\" interaction (see BoxZoomHandler)\n   * @default true\n   */\n  boxZoom?: boolean;\n  /**\n   * If true, enable the \"double click to zoom\" interaction (see DoubleClickZoomHandler).\n   * @default true\n   */\n  doubleClickZoom?: boolean;\n  /**\n   * If `true`, the \"drag to pan\" interaction is enabled.\n   * An `Object` value is passed as options to {@link DragPanHandler#enable}.\n   * @default true\n   */\n  dragPan?: boolean | DragPanOptions;\n  /**\n   * If true, enable the \"drag to rotate\" interaction (see DragRotateHandler).\n   * @default true\n   */\n  dragRotate?: boolean;\n  /**\n   * If true, enable keyboard shortcuts (see KeyboardHandler).\n   * @default true\n   */\n  keyboard?: boolean;\n  /**\n   * If `true`, the \"scroll to zoom\" interaction is enabled.\n   * An `Object` value is passed as options to {@link ScrollZoomHandler#enable}.\n   * @default true\n   */\n  scrollZoom?: boolean | ZoomRotateOptions;\n  /**\n   * If `true`, the \"drag to pitch\" interaction is enabled.\n   * An `Object` value is passed as options to {@link TouchPitchHandler#enable}.\n   * @default true\n   */\n  touchPitch?: boolean;\n  /**\n   * If `true`, the \"pinch to rotate and zoom\" interaction is enabled.\n   * An `Object` value is passed as options to {@link TouchZoomRotateHandler#enable}.\n   * @default true\n   */\n  touchZoomRotate?: boolean | ZoomRotateOptions;\n\n  // Constraints\n\n  /** If set, the map is constrained to the given bounds. */\n  maxBounds?: LngLatBoundsLike;\n  /** Maximum pitch of the map. */\n  maxPitch?: number;\n  /** Maximum zoom of the map. */\n  maxZoom?: number;\n  /** Minimum pitch of the map. */\n  minPitch?: number;\n  /** Minimum zoom of the map. */\n  minZoom?: number;\n\n  /** For external controller to override the camera state */\n  viewState?: ViewState & {\n    width: number;\n    height: number;\n  };\n\n  // Styling\n\n  /** Mapbox style */\n  mapStyle?: string | MapboxStyle | ImmutableLike;\n  /** Enable diffing when the map style changes\n   * @default true\n   */\n  styleDiffing?: boolean;\n  /** The fog property of the style. Must conform to the Fog Style Specification .\n   * If `null` is provided, removes the fog from the map. */\n  fog?: Fog | null;\n  /** Light properties of the map. */\n  light?: Light;\n  /** Terrain property of the style. Must conform to the Terrain Style Specification .\n   * If `null` is provided, removes terrain from the map. */\n  terrain?: TerrainSpecification | null;\n  /** Default layers to query on pointer events */\n  interactiveLayerIds?: string[];\n  /** The projection the map should be rendered in\n   * @default \"mercator\"\n   */\n  projection?: ProjectionSpecification | string;\n  /**\n   * If `true`, multiple copies of the world will be rendered, when zoomed out.\n   * @default true\n   */\n  renderWorldCopies?: boolean;\n  /** CSS cursor */\n  cursor?: string;\n\n  // Callbacks\n  onMouseDown?: (e: MapLayerMouseEvent) => void;\n  onMouseUp?: (e: MapLayerMouseEvent) => void;\n  onMouseOver?: (e: MapLayerMouseEvent) => void;\n  onMouseMove?: (e: MapLayerMouseEvent) => void;\n  onClick?: (e: MapLayerMouseEvent) => void;\n  onDblClick?: (e: MapLayerMouseEvent) => void;\n  onMouseEnter?: (e: MapLayerMouseEvent) => void;\n  onMouseLeave?: (e: MapLayerMouseEvent) => void;\n  onMouseOut?: (e: MapLayerMouseEvent) => void;\n  onContextMenu?: (e: MapLayerMouseEvent) => void;\n  onTouchStart?: (e: MapLayerTouchEvent) => void;\n  onTouchEnd?: (e: MapLayerTouchEvent) => void;\n  onTouchMove?: (e: MapLayerTouchEvent) => void;\n  onTouchCancel?: (e: MapLayerTouchEvent) => void;\n\n  onMoveStart?: (e: ViewStateChangeEvent) => void;\n  onMove?: (e: ViewStateChangeEvent) => void;\n  onMoveEnd?: (e: ViewStateChangeEvent) => void;\n  onDragStart?: (e: ViewStateChangeEvent) => void;\n  onDrag?: (e: ViewStateChangeEvent) => void;\n  onDragEnd?: (e: ViewStateChangeEvent) => void;\n  onZoomStart?: (e: ViewStateChangeEvent) => void;\n  onZoom?: (e: ViewStateChangeEvent) => void;\n  onZoomEnd?: (e: ViewStateChangeEvent) => void;\n  onRotateStart?: (e: ViewStateChangeEvent) => void;\n  onRotate?: (e: ViewStateChangeEvent) => void;\n  onRotateEnd?: (e: ViewStateChangeEvent) => void;\n  onPitchStart?: (e: ViewStateChangeEvent) => void;\n  onPitch?: (e: ViewStateChangeEvent) => void;\n  onPitchEnd?: (e: ViewStateChangeEvent) => void;\n\n  onWheel?: (e: MapWheelEvent) => void;\n  onBoxZoomStart?: (e: MapBoxZoomEvent) => void;\n  onBoxZoomEnd?: (e: MapBoxZoomEvent) => void;\n  onBoxZoomCancel?: (e: MapBoxZoomEvent) => void;\n\n  onResize?: (e: MapboxEvent) => void;\n  onLoad?: (e: MapboxEvent) => void;\n  onRender?: (e: MapboxEvent) => void;\n  onIdle?: (e: MapboxEvent) => void;\n  onError?: (e: ErrorEvent) => void;\n  onRemove?: (e: MapboxEvent) => void;\n  onData?: (e: MapStyleDataEvent | MapSourceDataEvent) => void;\n  onStyleData?: (e: MapStyleDataEvent) => void;\n  onSourceData?: (e: MapSourceDataEvent) => void;\n};\n\nconst pointerEvents = {\n  mousedown: 'onMouseDown',\n  mouseup: 'onMouseUp',\n  mouseover: 'onMouseOver',\n  mousemove: 'onMouseMove',\n  click: 'onClick',\n  dblclick: 'onDblClick',\n  mouseenter: 'onMouseEnter',\n  mouseleave: 'onMouseLeave',\n  mouseout: 'onMouseOut',\n  contextmenu: 'onContextMenu',\n  touchstart: 'onTouchStart',\n  touchend: 'onTouchEnd',\n  touchmove: 'onTouchMove',\n  touchcancel: 'onTouchCancel'\n};\nconst cameraEvents = {\n  movestart: 'onMoveStart',\n  move: 'onMove',\n  moveend: 'onMoveEnd',\n  dragstart: 'onDragStart',\n  drag: 'onDrag',\n  dragend: 'onDragEnd',\n  zoomstart: 'onZoomStart',\n  zoom: 'onZoom',\n  zoomend: 'onZoomEnd',\n  rotatestart: 'onRotateStart',\n  rotate: 'onRotate',\n  rotateend: 'onRotateEnd',\n  pitchstart: 'onPitchStart',\n  pitch: 'onPitch',\n  pitchend: 'onPitchEnd'\n};\nconst otherEvents = {\n  wheel: 'onWheel',\n  boxzoomstart: 'onBoxZoomStart',\n  boxzoomend: 'onBoxZoomEnd',\n  boxzoomcancel: 'onBoxZoomCancel',\n  resize: 'onResize',\n  load: 'onLoad',\n  render: 'onRender',\n  idle: 'onIdle',\n  remove: 'onRemove',\n  data: 'onData',\n  styledata: 'onStyleData',\n  sourcedata: 'onSourceData',\n  error: 'onError'\n};\nconst settingNames: (keyof MapboxProps)[] = [\n  'minZoom',\n  'maxZoom',\n  'minPitch',\n  'maxPitch',\n  'maxBounds',\n  'projection',\n  'renderWorldCopies'\n];\nconst handlerNames: (keyof MapboxProps)[] = [\n  'scrollZoom',\n  'boxZoom',\n  'dragRotate',\n  'dragPan',\n  'keyboard',\n  'doubleClickZoom',\n  'touchZoomRotate',\n  'touchPitch'\n];\n\n/**\n * A wrapper for mapbox-gl's Map class\n */\nexport default class Mapbox {\n  private _MapClass: typeof MapboxMap;\n  // mapboxgl.Map instance. Not using type here because we are accessing\n  // private members and methods\n  private _map: any = null;\n  // User-supplied props\n  props: MapboxProps;\n\n  // Mapbox map is stateful.\n  // During method calls/user interactions, map.transform is mutated and\n  // deviate from user-supplied props.\n  // In order to control the map reactively, we shadow the transform\n  // with the one below, which reflects the view state resolved from\n  // both user-supplied props and the underlying state\n  private _renderTransform: Transform;\n\n  // Internal states\n  private _internalUpdate: boolean = false;\n  private _inRender: boolean = false;\n  private _hoveredFeatures: MapboxGeoJSONFeature[] = null;\n  private _deferredEvents: {\n    move: boolean;\n    zoom: boolean;\n    pitch: boolean;\n    rotate: boolean;\n  } = {\n    move: false,\n    zoom: false,\n    pitch: false,\n    rotate: false\n  };\n\n  static savedMaps: Mapbox[] = [];\n\n  constructor(MapClass: typeof MapboxMap, props: MapboxProps, container: HTMLDivElement) {\n    this._MapClass = MapClass;\n    this.props = props;\n    this._initialize(container);\n  }\n\n  get map(): MapboxMap {\n    return this._map as MapboxMap;\n  }\n\n  get transform(): Transform {\n    return this._renderTransform;\n  }\n\n  setProps(props: MapboxProps) {\n    const oldProps = this.props;\n    this.props = props;\n\n    const settingsChanged = this._updateSettings(props, oldProps);\n    if (settingsChanged) {\n      this._createShadowTransform(this._map);\n    }\n    const sizeChanged = this._updateSize(props);\n    const viewStateChanged = this._updateViewState(props, true);\n    this._updateStyle(props, oldProps);\n    this._updateStyleComponents(props, oldProps);\n    this._updateHandlers(props, oldProps);\n\n    // If 1) view state has changed to match props and\n    //    2) the props change is not triggered by map events,\n    // it's driven by an external state change. Redraw immediately\n    if (settingsChanged || sizeChanged || (viewStateChanged && !this._map.isMoving())) {\n      this.redraw();\n    }\n  }\n\n  static reuse(props: MapboxProps, container: HTMLDivElement) {\n    const that = Mapbox.savedMaps.pop();\n    if (!that) {\n      return null;\n    }\n\n    const map = that.map;\n    // When reusing the saved map, we need to reparent the map(canvas) and other child nodes\n    // intoto the new container from the props.\n    // Step1: reparenting child nodes from old container to new container\n    const oldContainer = map.getContainer();\n    container.className = oldContainer.className;\n    while (oldContainer.childNodes.length > 0) {\n      container.appendChild(oldContainer.childNodes[0]);\n    }\n    // Step2: replace the internal container with new container from the react component\n    // @ts-ignore\n    map._container = container;\n\n    // Step 3: apply new props\n    if (props.initialViewState) {\n      that._updateViewState(props.initialViewState, false);\n    }\n    map.resize();\n    that.setProps({...props, styleDiffing: false});\n\n    // Simulate load event\n    if (map.isStyleLoaded()) {\n      map.fire('load');\n    } else {\n      map.once('styledata', () => map.fire('load'));\n    }\n    return that;\n  }\n\n  /* eslint-disable complexity,max-statements */\n  _initialize(container: HTMLDivElement) {\n    const {props} = this;\n    const mapOptions = {\n      ...props,\n      ...props.initialViewState,\n      accessToken: props.mapboxAccessToken || getAccessTokenFromEnv() || null,\n      container,\n      style: normalizeStyle(props.mapStyle)\n    };\n\n    const viewState = mapOptions.initialViewState || mapOptions.viewState || mapOptions;\n    Object.assign(mapOptions, {\n      center: [viewState.longitude || 0, viewState.latitude || 0],\n      zoom: viewState.zoom || 0,\n      pitch: viewState.pitch || 0,\n      bearing: viewState.bearing || 0\n    });\n\n    if (props.gl) {\n      // eslint-disable-next-line\n      const getContext = HTMLCanvasElement.prototype.getContext;\n      // Hijack canvas.getContext to return our own WebGLContext\n      // This will be called inside the mapboxgl.Map constructor\n      // @ts-expect-error\n      HTMLCanvasElement.prototype.getContext = () => {\n        // Unhijack immediately\n        HTMLCanvasElement.prototype.getContext = getContext;\n        return props.gl;\n      };\n    }\n\n    const map: any = new this._MapClass(mapOptions);\n    // Props that are not part of constructor options\n    if (viewState.padding) {\n      map.setPadding(viewState.padding);\n    }\n    if (props.cursor) {\n      map.getCanvas().style.cursor = props.cursor;\n    }\n    this._createShadowTransform(map);\n\n    // Hack\n    // Insert code into map's render cycle\n    const renderMap = map._render;\n    map._render = (arg: number) => {\n      this._inRender = true;\n      renderMap.call(map, arg);\n      this._inRender = false;\n    };\n    const runRenderTaskQueue = map._renderTaskQueue.run;\n    map._renderTaskQueue.run = (arg: number) => {\n      runRenderTaskQueue.call(map._renderTaskQueue, arg);\n      this._onBeforeRepaint();\n    };\n    map.on('render', () => this._onAfterRepaint());\n    // Insert code into map's event pipeline\n    const fireEvent = map.fire;\n    map.fire = this._fireEvent.bind(this, fireEvent);\n\n    // add listeners\n    map.on('resize', () => {\n      this._renderTransform.resize(map.transform.width, map.transform.height);\n    });\n    map.on('styledata', () => this._updateStyleComponents(this.props, {}));\n    map.on('sourcedata', () => this._updateStyleComponents(this.props, {}));\n    for (const eventName in pointerEvents) {\n      map.on(eventName, this._onPointerEvent);\n    }\n    for (const eventName in cameraEvents) {\n      map.on(eventName, this._onCameraEvent);\n    }\n    for (const eventName in otherEvents) {\n      map.on(eventName, this._onEvent);\n    }\n    this._map = map;\n  }\n  /* eslint-enable complexity,max-statements */\n\n  recycle() {\n    Mapbox.savedMaps.push(this);\n  }\n\n  destroy() {\n    this._map.remove();\n  }\n\n  // Force redraw the map now. Typically resize() and jumpTo() is reflected in the next\n  // render cycle, which is managed by Mapbox's animation loop.\n  // This removes the synchronization issue caused by requestAnimationFrame.\n  redraw() {\n    const map = this._map;\n    // map._render will throw error if style does not exist\n    // https://github.com/mapbox/mapbox-gl-js/blob/fb9fc316da14e99ff4368f3e4faa3888fb43c513\n    //   /src/ui/map.js#L1834\n    if (!this._inRender && map.style) {\n      // cancel the scheduled update\n      if (map._frame) {\n        map._frame.cancel();\n        map._frame = null;\n      }\n      // the order is important - render() may schedule another update\n      map._render();\n    }\n  }\n\n  _createShadowTransform(map: any) {\n    const renderTransform = cloneTransform(map.transform);\n    map.painter.transform = renderTransform;\n\n    // Terrain update is called by the painter\n    // Elevation changes must be reflected back to the original transform so that input handlers work correctly\n    // @ts-ignore method may be undefined\n    const updateElevation = renderTransform.updateElevation;\n    if (updateElevation) {\n      // @ts-ignore\n      renderTransform.updateElevation = arg => {\n        map.transform.elevation = renderTransform.elevation;\n        updateElevation.call(renderTransform, arg);\n        updateElevation.call(map.transform, arg);\n      };\n    }\n    this._renderTransform = renderTransform;\n  }\n\n  /* Trigger map resize if size is controlled\n     @param {object} nextProps\n     @returns {bool} true if size has changed\n   */\n  _updateSize(nextProps: MapboxProps): boolean {\n    // Check if size is controlled\n    const {viewState} = nextProps;\n    if (viewState) {\n      const map = this._map;\n      if (viewState.width !== map.transform.width || viewState.height !== map.transform.height) {\n        map.resize();\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Adapted from map.jumpTo\n  /* Update camera to match props\n     @param {object} nextProps\n     @param {bool} triggerEvents - should fire camera events\n     @returns {bool} true if anything is changed\n   */\n  _updateViewState(nextProps: MapboxProps, triggerEvents: boolean): boolean {\n    if (this._internalUpdate) {\n      return false;\n    }\n    const map = this._map;\n\n    const tr = this._renderTransform;\n    // Take a snapshot of the transform before mutation\n    const {zoom, pitch, bearing} = tr;\n    const isMoving = map.isMoving();\n\n    if (isMoving) {\n      // All movement of the camera is done relative to the sea level\n      tr.cameraElevationReference = 'sea';\n    }\n    const changed = applyViewStateToTransform(tr, {\n      ...transformToViewState(map.transform),\n      ...nextProps\n    });\n    if (isMoving) {\n      // Reset camera reference\n      tr.cameraElevationReference = 'ground';\n    }\n\n    if (changed && triggerEvents) {\n      const deferredEvents = this._deferredEvents;\n      // Delay DOM control updates to the next render cycle\n      deferredEvents.move = true;\n      deferredEvents.zoom ||= zoom !== tr.zoom;\n      deferredEvents.rotate ||= bearing !== tr.bearing;\n      deferredEvents.pitch ||= pitch !== tr.pitch;\n    }\n\n    // Avoid manipulating the real transform when interaction/animation is ongoing\n    // as it would interfere with Mapbox's handlers\n    if (!isMoving) {\n      applyViewStateToTransform(map.transform, nextProps);\n    }\n\n    return changed;\n  }\n\n  /* Update camera constraints and projection settings to match props\n     @param {object} nextProps\n     @param {object} currProps\n     @returns {bool} true if anything is changed\n   */\n  _updateSettings(nextProps: MapboxProps, currProps: MapboxProps): boolean {\n    const map = this._map;\n    let changed = false;\n    for (const propName of settingNames) {\n      if (propName in nextProps && !deepEqual(nextProps[propName], currProps[propName])) {\n        changed = true;\n        map[`set${propName[0].toUpperCase()}${propName.slice(1)}`](nextProps[propName]);\n      }\n    }\n    return changed;\n  }\n\n  /* Update map style to match props\n     @param {object} nextProps\n     @param {object} currProps\n     @returns {bool} true if style is changed\n   */\n  _updateStyle(nextProps: MapboxProps, currProps: MapboxProps): boolean {\n    if (nextProps.cursor !== currProps.cursor) {\n      this._map.getCanvas().style.cursor = nextProps.cursor;\n    }\n    if (nextProps.mapStyle !== currProps.mapStyle) {\n      const options: any = {\n        diff: nextProps.styleDiffing\n      };\n      if ('localIdeographFontFamily' in nextProps) {\n        options.localIdeographFontFamily = nextProps.localIdeographFontFamily;\n      }\n      this._map.setStyle(normalizeStyle(nextProps.mapStyle), options);\n      return true;\n    }\n    return false;\n  }\n\n  /* Update fog, light and terrain to match props\n     @param {object} nextProps\n     @param {object} currProps\n     @returns {bool} true if anything is changed\n   */\n  _updateStyleComponents(nextProps: MapboxProps, currProps: MapboxProps): boolean {\n    const map = this._map;\n    let changed = false;\n    if (map.style.loaded()) {\n      if ('light' in nextProps && !deepEqual(nextProps.light, currProps.light)) {\n        changed = true;\n        map.setLight(nextProps.light);\n      }\n      if ('fog' in nextProps && !deepEqual(nextProps.fog, currProps.fog)) {\n        changed = true;\n        map.setFog(nextProps.fog);\n      }\n      if ('terrain' in nextProps && !deepEqual(nextProps.terrain, currProps.terrain)) {\n        if (!nextProps.terrain || map.getSource(nextProps.terrain.source)) {\n          changed = true;\n          map.setTerrain(nextProps.terrain);\n        }\n      }\n    }\n    return changed;\n  }\n\n  /* Update interaction handlers to match props\n     @param {object} nextProps\n     @param {object} currProps\n     @returns {bool} true if anything is changed\n   */\n  _updateHandlers(nextProps: MapboxProps, currProps: MapboxProps): boolean {\n    const map = this._map;\n    let changed = false;\n    for (const propName of handlerNames) {\n      const newValue = nextProps[propName];\n      if (!deepEqual(newValue, currProps[propName])) {\n        changed = true;\n        if (newValue) {\n          map[propName].enable(newValue);\n        } else {\n          map[propName].disable();\n        }\n      }\n    }\n    return changed;\n  }\n\n  _onEvent = (e: MapboxEvent) => {\n    // @ts-ignore\n    const cb = this.props[otherEvents[e.type]];\n    if (cb) {\n      cb(e);\n    }\n  };\n\n  _updateHover(e: MapMouseEvent) {\n    const {props} = this;\n    const shouldTrackHoveredFeatures =\n      props.interactiveLayerIds && (props.onMouseMove || props.onMouseEnter || props.onMouseLeave);\n\n    if (shouldTrackHoveredFeatures) {\n      const eventType = e.type;\n      const wasHovering = this._hoveredFeatures?.length > 0;\n      let features;\n      if (eventType === 'mousemove') {\n        try {\n          features = this._map.queryRenderedFeatures(e.point, {\n            layers: props.interactiveLayerIds\n          });\n        } catch {\n          features = [];\n        }\n      } else {\n        features = [];\n      }\n      const isHovering = features.length > 0;\n\n      if (!isHovering && wasHovering) {\n        e.type = 'mouseleave';\n        this._onPointerEvent(e);\n      }\n      this._hoveredFeatures = features;\n      if (isHovering && !wasHovering) {\n        e.type = 'mouseenter';\n        this._onPointerEvent(e);\n      }\n      e.type = eventType;\n    } else {\n      this._hoveredFeatures = null;\n    }\n  }\n\n  _onPointerEvent = (e: MapLayerMouseEvent | MapLayerTouchEvent) => {\n    if (e.type === 'mousemove' || e.type === 'mouseout') {\n      this._updateHover(e);\n    }\n\n    // @ts-ignore\n    const cb = this.props[pointerEvents[e.type]];\n    if (cb) {\n      if (this.props.interactiveLayerIds && e.type !== 'mouseover' && e.type !== 'mouseout') {\n        const features =\n          this._hoveredFeatures ||\n          this._map.queryRenderedFeatures(e.point, {\n            layers: this.props.interactiveLayerIds\n          });\n        e.features = features;\n      }\n      cb(e);\n      delete e.features;\n    }\n  };\n\n  _onCameraEvent = (e: ViewStateChangeEvent) => {\n    if (!this._internalUpdate) {\n      // @ts-ignore\n      const cb = this.props[cameraEvents[e.type]];\n      if (cb) {\n        cb(e);\n      }\n    }\n    if (e.type in this._deferredEvents) {\n      this._deferredEvents[e.type] = false;\n    }\n  };\n\n  _fireEvent(baseFire: Function, event: string | MapboxEvent, properties?: object) {\n    const map = this._map;\n    const tr = map.transform;\n\n    const eventType = typeof event === 'string' ? event : event.type;\n    if (eventType === 'move') {\n      this._updateViewState(this.props, false);\n    }\n    if (eventType in cameraEvents) {\n      if (typeof event === 'object') {\n        (event as ViewStateChangeEvent).viewState = transformToViewState(tr);\n      }\n      if (this._map.isMoving()) {\n        // Replace map.transform with ours during the callbacks\n        map.transform = this._renderTransform;\n        baseFire.call(map, event, properties);\n        map.transform = tr;\n\n        return map;\n      }\n    }\n    baseFire.call(map, event, properties);\n\n    return map;\n  }\n\n  // All camera manipulations are complete, ready to repaint\n  _onBeforeRepaint() {\n    const map = this._map;\n\n    // If there are camera changes driven by props, invoke camera events so that DOM controls are synced\n    this._internalUpdate = true;\n    for (const eventType in this._deferredEvents) {\n      if (this._deferredEvents[eventType]) {\n        map.fire(eventType);\n      }\n    }\n    this._internalUpdate = false;\n\n    const tr = this._map.transform;\n    // Make sure camera matches the current props\n    this._map.transform = this._renderTransform;\n\n    this._onAfterRepaint = () => {\n      // Restores camera state before render/load events are fired\n      this._map.transform = tr;\n    };\n  }\n\n  _onAfterRepaint: () => void;\n}\n\n/**\n * Access token can be provided via one of:\n *   mapboxAccessToken prop\n *   access_token query parameter\n *   MapboxAccessToken environment variable\n *   REACT_APP_MAPBOX_ACCESS_TOKEN environment variable\n * @returns access token\n */\nfunction getAccessTokenFromEnv(): string {\n  let accessToken = null;\n\n  /* global location, process */\n  if (typeof location !== 'undefined') {\n    const match = /access_token=([^&\\/]*)/.exec(location.search);\n    accessToken = match && match[1];\n  }\n\n  // Note: This depends on bundler plugins (e.g. webpack) importing environment correctly\n  try {\n    accessToken = accessToken || process.env.MapboxAccessToken;\n  } catch {\n    // ignore\n  }\n\n  try {\n    accessToken = accessToken || process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n  } catch {\n    // ignore\n  }\n\n  return accessToken;\n}\n","import type {MapboxMap, LngLatLike, PointLike} from '../types';\nimport type Mapbox from './mapbox';\n\n/** These methods may break the react binding if called directly */\nconst skipMethods = [\n  'setMaxBounds',\n  'setMinZoom',\n  'setMaxZoom',\n  'setMinPitch',\n  'setMaxPitch',\n  'setRenderWorldCopies',\n  'setProjection',\n  'setStyle',\n  'addSource',\n  'removeSource',\n  'addLayer',\n  'removeLayer',\n  'setLayerZoomRange',\n  'setFilter',\n  'setPaintProperty',\n  'setLayoutProperty',\n  'setLight',\n  'setTerrain',\n  'setFog',\n  'remove'\n] as const;\n\nexport type MapRef = {\n  getMap(): MapboxMap;\n} & Omit<MapboxMap, typeof skipMethods[number]>;\n\nexport default function createRef(mapInstance: Mapbox, mapLib: any): MapRef {\n  if (!mapInstance) {\n    return null;\n  }\n\n  const map: MapboxMap = mapInstance.map;\n  const result: any = {\n    getMap: () => map,\n\n    // Overwrite getters to use our shadow transform\n    getCenter: () => mapInstance.transform.center,\n    getZoom: () => mapInstance.transform.zoom,\n    getBearing: () => mapInstance.transform.bearing,\n    getPitch: () => mapInstance.transform.pitch,\n    getPadding: () => mapInstance.transform.padding,\n    getBounds: () => mapInstance.transform.getBounds(),\n    project: (lnglat: LngLatLike) => {\n      return mapInstance.transform.locationPoint(mapLib.LngLat.convert(lnglat));\n    },\n    unproject: (point: PointLike) => {\n      return mapInstance.transform.pointLocation(mapLib.Point.convert(point));\n    }\n  };\n\n  for (const key of getMethodNames(map)) {\n    // @ts-expect-error\n    if (!(key in result) && !skipMethods.includes(key)) {\n      result[key] = map[key].bind(map);\n    }\n  }\n\n  return result;\n}\n\nfunction getMethodNames(obj) {\n  const result = new Set<string>();\n\n  let proto = obj;\n  while (proto) {\n    for (const key of Object.getOwnPropertyNames(proto)) {\n      if (\n        key[0] !== '_' &&\n        typeof obj[key] === 'function' &&\n        key !== 'fire' &&\n        key !== 'setEventedParent'\n      ) {\n        result.add(key);\n      }\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Array.from(result);\n}\n","// From https://github.com/streamich/react-use/blob/master/src/useIsomorphicLayoutEffect.ts\n// useLayoutEffect but does not trigger warning in server-side rendering\nimport {useEffect, useLayoutEffect} from 'react';\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport default useIsomorphicLayoutEffect;\n","export type GlobalSettings = {\n  /** The map's default API URL for requesting tiles, styles, sprites, and glyphs. */\n  baseApiUrl?: string;\n  /** The maximum number of images (raster tiles, sprites, icons) to load in parallel.\n   * @default 16\n   */\n  maxParallelImageRequests?: number;\n  /** The map's RTL text plugin. Necessary for supporting the Arabic and Hebrew languages, which are written right-to-left.  */\n  RTLTextPlugin?: string;\n  /** Provides an interface for external module bundlers such as Webpack or Rollup to package mapbox-gl's WebWorker into a separate class and integrate it with the library.\nTakes precedence over `workerUrl`. */\n  workerClass?: any;\n  /** The number of web workers instantiated on a page with mapbox-gl maps.\n   * @default 2\n   */\n  workerCount?: number;\n  /** Provides an interface for loading mapbox-gl's WebWorker bundle from a self-hosted URL.\n   * This is useful if your site needs to operate in a strict CSP (Content Security Policy) environment\n   * wherein you are not allowed to load JavaScript code from a Blob URL, which is default behavior. */\n  workerUrl?: string;\n};\n\nconst globalSettings = [\n  'baseApiUrl',\n  'maxParallelImageRequests',\n  'workerClass',\n  'workerCount',\n  'workerUrl'\n] as const;\n\nexport default function setGlobals(mapLib: any, props: GlobalSettings) {\n  for (const key of globalSettings) {\n    if (key in props) {\n      mapLib[key] = props[key];\n    }\n  }\n\n  if (\n    props.RTLTextPlugin &&\n    mapLib.getRTLTextPluginStatus &&\n    mapLib.getRTLTextPluginStatus() === 'unavailable'\n  ) {\n    mapLib.setRTLTextPlugin(\n      props.RTLTextPlugin,\n      (error?: Error) => {\n        if (error) {\n          // eslint-disable-next-line\n          console.error(error);\n        }\n      },\n      false\n    );\n  }\n}\n","import * as React from 'react';\nimport {\n  useState,\n  useRef,\n  useEffect,\n  useContext,\n  useMemo,\n  forwardRef,\n  useImperativeHandle\n} from 'react';\n\nimport {MountedMapsContext} from './use-map';\nimport Mapbox, {MapboxProps} from '../mapbox/mapbox';\nimport createRef, {MapRef} from '../mapbox/create-ref';\n\nimport type {CSSProperties} from 'react';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport setGlobals, {GlobalSettings} from '../utils/set-globals';\n\nexport type MapContextValue = {\n  mapLib: any;\n  map: MapRef;\n};\n\nexport const MapContext = React.createContext<MapContextValue>(null);\n\nexport type MapProps = MapboxProps &\n  GlobalSettings & {\n    mapLib?: any;\n    reuseMaps?: boolean;\n    /** Map container id */\n    id?: string;\n    /** Map container CSS style */\n    style?: CSSProperties;\n    children?: any;\n  };\n\nconst defaultProps: MapProps = {\n  // Constraints\n  minZoom: 0,\n  maxZoom: 22,\n  minPitch: 0,\n  maxPitch: 60,\n\n  // Interaction handlers\n  scrollZoom: true,\n  boxZoom: true,\n  dragRotate: true,\n  dragPan: true,\n  keyboard: true,\n  doubleClickZoom: true,\n  touchZoomRotate: true,\n  touchPitch: true,\n\n  // Style\n  mapStyle: {version: 8, sources: {}, layers: []},\n  styleDiffing: true,\n  projection: 'mercator',\n  renderWorldCopies: true,\n\n  // Callbacks\n  onError: e => console.error(e.error), // eslint-disable-line\n\n  // Globals\n  RTLTextPlugin:\n    'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js'\n};\n\nconst Map = forwardRef<MapRef, MapProps>((props, ref) => {\n  const mountedMapsContext = useContext(MountedMapsContext);\n  const [mapInstance, setMapInstance] = useState<Mapbox>(null);\n  const containerRef = useRef();\n\n  const {current: contextValue} = useRef<MapContextValue>({mapLib: null, map: null});\n\n  useEffect(() => {\n    const mapLib = props.mapLib;\n    let isMounted = true;\n    let mapbox;\n\n    Promise.resolve(mapLib || import('mapbox-gl'))\n      .then(mapboxgl => {\n        if (!isMounted) {\n          return;\n        }\n\n        if (!mapboxgl.Map) {\n          // commonjs style\n          mapboxgl = mapboxgl.default;\n        }\n        if (!mapboxgl || !mapboxgl.Map) {\n          throw new Error('Invalid mapLib');\n        }\n\n        if (mapboxgl.supported(props)) {\n          setGlobals(mapboxgl, props);\n          if (props.reuseMaps) {\n            mapbox = Mapbox.reuse(props, containerRef.current);\n          }\n          if (!mapbox) {\n            mapbox = new Mapbox(mapboxgl.Map, props, containerRef.current);\n          }\n          contextValue.map = createRef(mapbox, mapboxgl);\n          contextValue.mapLib = mapboxgl;\n\n          setMapInstance(mapbox);\n          mountedMapsContext?.onMapMount(contextValue.map, props.id);\n        } else {\n          throw new Error('Map is not supported by this browser');\n        }\n      })\n      .catch(error => {\n        props.onError({\n          type: 'error',\n          target: null,\n          originalEvent: null,\n          error\n        });\n      });\n\n    return () => {\n      isMounted = false;\n      if (mapbox) {\n        mountedMapsContext?.onMapUnmount(props.id);\n        if (props.reuseMaps) {\n          mapbox.recycle();\n        } else {\n          mapbox.destroy();\n        }\n      }\n    };\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    if (mapInstance) {\n      mapInstance.setProps(props);\n    }\n  });\n\n  useImperativeHandle(ref, () => contextValue.map, [mapInstance]);\n\n  const style: CSSProperties = useMemo(\n    () => ({\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      ...props.style\n    }),\n    [props.style]\n  );\n\n  return (\n    <div id={props.id} ref={containerRef} style={style}>\n      {mapInstance && (\n        <MapContext.Provider value={contextValue}>{props.children}</MapContext.Provider>\n      )}\n    </div>\n  );\n});\n\nMap.displayName = 'Map';\nMap.defaultProps = defaultProps;\n\nexport default Map;\n","import * as React from 'react';\n// This is a simplified version of\n// https://github.com/facebook/react/blob/4131af3e4bf52f3a003537ec95a1655147c81270/src/renderers/dom/shared/CSSPropertyOperations.js#L62\nconst unitlessNumber = /box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;\n\nexport function applyReactStyle(element: HTMLElement, styles: React.CSSProperties) {\n  if (!element || !styles) {\n    return;\n  }\n  const style = element.style;\n\n  for (const key in styles) {\n    const value = styles[key];\n    if (Number.isFinite(value) && !unitlessNumber.test(key)) {\n      style[key] = `${value}px`;\n    } else {\n      style[key] = value;\n    }\n  }\n}\n","/* global document */\nimport * as React from 'react';\nimport {createPortal} from 'react-dom';\nimport {useEffect, useMemo, useRef, useContext} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\n\nimport type {\n  MarkerDragEvent,\n  MapboxPopup,\n  PointLike,\n  Anchor,\n  Alignment,\n  MapboxEvent,\n  MapboxMarker\n} from '../types';\n\nimport {MapContext} from './map';\nimport {arePointsEqual} from '../utils/deep-equal';\n\nexport type MarkerProps = {\n  /** Longitude of the anchor location */\n  longitude: number;\n  /** Latitude of the anchor location */\n  latitude: number;\n  /** A string indicating the part of the Marker that should be positioned closest to the coordinate set via Marker.setLngLat.\n   * Options are `'center'`, `'top'`, `'bottom'`, `'left'`, `'right'`, `'top-left'`, `'top-right'`, `'bottom-left'`, and `'bottom-right'`.\n   * @default \"center\"\n   */\n  anchor?: Anchor;\n  /**\n   * The max number of pixels a user can shift the mouse pointer during a click on the marker for it to be considered a valid click\n   * (as opposed to a marker drag). The default (0) is to inherit map's clickTolerance.\n   */\n  clickTolerance?: number;\n  /** The color to use for the default marker if options.element is not provided.\n   * @default \"#3FB1CE\"\n   */\n  color?: string;\n  /** A boolean indicating whether or not a marker is able to be dragged to a new position on the map.\n   * @default false\n   */\n  draggable?: boolean;\n  /** The offset in pixels as a PointLike object to apply relative to the element's center. Negatives indicate left and up. */\n  offset?: PointLike;\n  /** `map` aligns the `Marker` to the plane of the map.\n   * `viewport` aligns the `Marker` to the plane of the viewport.\n   * `auto` automatically matches the value of `rotationAlignment`.\n   * @default \"auto\"\n   */\n  pitchAlignment?: Alignment;\n  /** The rotation angle of the marker in degrees, relative to its `rotationAlignment` setting. A positive value will rotate the marker clockwise.\n   * @default 0\n   */\n  rotation?: number;\n  /** `map` aligns the `Marker`'s rotation relative to the map, maintaining a bearing as the map rotates.\n   * `viewport` aligns the `Marker`'s rotation relative to the viewport, agnostic to map rotations.\n   * `auto` is equivalent to `viewport`.\n   * @default \"auto\"\n   */\n  rotationAlignment?: Alignment;\n  /** The scale to use for the default marker if options.element is not provided.\n   * The default scale (1) corresponds to a height of `41px` and a width of `27px`.\n   * @default 1\n   */\n  scale?: number;\n  /** A Popup instance that is bound to the marker */\n  popup?: MapboxPopup;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n  onClick?: (e: MapboxEvent<MouseEvent>) => void;\n  onDragStart?: (e: MarkerDragEvent) => void;\n  onDrag?: (e: MarkerDragEvent) => void;\n  onDragEnd?: (e: MarkerDragEvent) => void;\n  children?: React.ReactNode;\n};\n\nconst defaultProps: Partial<MarkerProps> = {\n  draggable: false,\n  popup: null,\n  rotation: 0,\n  rotationAlignment: 'auto',\n  pitchAlignment: 'auto'\n};\n\n/* eslint-disable complexity,max-statements */\nfunction Marker(props: MarkerProps) {\n  const {map, mapLib} = useContext(MapContext);\n  const thisRef = useRef({props});\n  thisRef.current.props = props;\n\n  const marker: MapboxMarker = useMemo(() => {\n    let hasChildren = false;\n    React.Children.forEach(props.children, el => {\n      if (el) {\n        hasChildren = true;\n      }\n    });\n    const options = {\n      ...props,\n      element: hasChildren ? document.createElement('div') : null\n    };\n\n    const mk = new mapLib.Marker(options).setLngLat([props.longitude, props.latitude]);\n\n    mk.getElement().addEventListener('click', (e: MouseEvent) => {\n      thisRef.current.props.onClick?.({\n        type: 'click',\n        target: mk,\n        originalEvent: e\n      });\n    });\n\n    mk.on('dragstart', e => {\n      const evt = e as MarkerDragEvent;\n      evt.lngLat = marker.getLngLat();\n      thisRef.current.props.onDragStart?.(evt);\n    });\n    mk.on('drag', e => {\n      const evt = e as MarkerDragEvent;\n      evt.lngLat = marker.getLngLat();\n      thisRef.current.props.onDrag?.(evt);\n    });\n    mk.on('dragend', e => {\n      const evt = e as MarkerDragEvent;\n      evt.lngLat = marker.getLngLat();\n      thisRef.current.props.onDragEnd?.(evt);\n    });\n\n    return mk;\n  }, []);\n\n  useEffect(() => {\n    marker.addTo(map.getMap());\n\n    return () => {\n      marker.remove();\n    };\n  }, []);\n\n  useEffect(() => {\n    applyReactStyle(marker.getElement(), props.style);\n  }, [props.style]);\n\n  if (marker.getLngLat().lng !== props.longitude || marker.getLngLat().lat !== props.latitude) {\n    marker.setLngLat([props.longitude, props.latitude]);\n  }\n  if (props.offset && !arePointsEqual(marker.getOffset(), props.offset)) {\n    marker.setOffset(props.offset);\n  }\n  if (marker.isDraggable() !== props.draggable) {\n    marker.setDraggable(props.draggable);\n  }\n  if (marker.getRotation() !== props.rotation) {\n    marker.setRotation(props.rotation);\n  }\n  if (marker.getRotationAlignment() !== props.rotationAlignment) {\n    marker.setRotationAlignment(props.rotationAlignment);\n  }\n  if (marker.getPitchAlignment() !== props.pitchAlignment) {\n    marker.setPitchAlignment(props.pitchAlignment);\n  }\n  if (marker.getPopup() !== props.popup) {\n    marker.setPopup(props.popup);\n  }\n\n  return createPortal(props.children, marker.getElement());\n}\n\nMarker.defaultProps = defaultProps;\n\n// @ts-ignore\nexport default React.memo(Marker);\n","/* global document */\nimport * as React from 'react';\nimport {createPortal} from 'react-dom';\nimport {useEffect, useMemo, useRef, useContext} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\n\nimport type {PopupEvent, Anchor, PointLike, MapboxPopup} from '../types';\n\nimport {MapContext} from './map';\nimport {deepEqual} from '../utils/deep-equal';\n\nexport type PopupProps = {\n  /** Longitude of the anchor location */\n  longitude: number;\n  /** Latitude of the anchor location */\n  latitude: number;\n  /**\n   * A string indicating the part of the popup that should be positioned closest to the coordinate.\n   * Options are `'center'`, `'top'`, `'bottom'`, `'left'`, `'right'`, `'top-left'`, `'top-right'`, `'bottom-left'`,\n   * and `'bottom-right'`. If unset, the anchor will be dynamically set to ensure the popup falls within the map\n   * container with a preference for `'bottom'`.\n   */\n  anchor?: Anchor;\n  /**\n   * If `true`, a close button will appear in the top right corner of the popup.\n   * @default true\n   */\n  closeButton?: boolean;\n  /**\n   * If `true`, the popup will close when the map is clicked.\n   * @default true\n   */\n  closeOnClick?: boolean;\n  /**\n   * If `true`, the popup will closed when the map moves.\n   * @default false\n   */\n  closeOnMove?: boolean;\n  /**\n   * If `true`, the popup will try to focus the first focusable element inside the popup.\n   * @default true\n   */\n  focusAfterOpen?: boolean;\n  /**\n   * A pixel offset applied to the popup's location specified as:\n   * - a single number specifying a distance from the popup's location\n   * - a PointLike specifying a constant offset\n   * - an object of Points specifing an offset for each anchor position.\n   */\n  offset?: number | PointLike | Partial<{[anchor in Anchor]: PointLike}>;\n  /** Space-separated CSS class names to add to popup container. */\n  className?: string;\n  /**\n   * A string that sets the CSS property of the popup's maximum width (for example, `'300px'`).\n   * To ensure the popup resizes to fit its content, set this property to `'none'`\n   * @default \"240px\"\n   */\n  maxWidth?: string;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n\n  onOpen?: (e: PopupEvent) => void;\n  onClose?: (e: PopupEvent) => void;\n  children?: React.ReactNode;\n};\n\n// Adapted from https://github.com/mapbox/mapbox-gl-js/blob/v1.13.0/src/ui/popup.js\nfunction getClassList(className: string) {\n  return new Set(className ? className.trim().split(/\\s+/) : []);\n}\n\n/* eslint-disable complexity,max-statements */\nfunction Popup(props: PopupProps) {\n  const {map, mapLib} = useContext(MapContext);\n  const container = useMemo(() => {\n    return document.createElement('div');\n  }, []);\n  const thisRef = useRef({props});\n  thisRef.current.props = props;\n\n  const popup: MapboxPopup = useMemo(() => {\n    const options = {...props};\n    const pp = new mapLib.Popup(options).setLngLat([props.longitude, props.latitude]);\n    pp.once('open', e => {\n      thisRef.current.props.onOpen?.(e as PopupEvent);\n    });\n    return pp;\n  }, []);\n\n  useEffect(() => {\n    const onClose = e => {\n      thisRef.current.props.onClose?.(e as PopupEvent);\n    };\n    popup.on('close', onClose);\n    popup.setDOMContent(container).addTo(map.getMap());\n\n    return () => {\n      // https://github.com/visgl/react-map-gl/issues/1825\n      // onClose should not be fired if the popup is removed by unmounting\n      // When using React strict mode, the component is mounted twice.\n      // Firing the onClose callback here would be a false signal to remove the component.\n      popup.off('close', onClose);\n      if (popup.isOpen()) {\n        popup.remove();\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    applyReactStyle(popup.getElement(), props.style);\n  }, [props.style]);\n\n  if (popup.isOpen()) {\n    if (popup.getLngLat().lng !== props.longitude || popup.getLngLat().lat !== props.latitude) {\n      popup.setLngLat([props.longitude, props.latitude]);\n    }\n    // @ts-ignore\n    if (props.offset && !deepEqual(popup.options.offset, props.offset)) {\n      popup.setOffset(props.offset);\n    }\n    // @ts-ignore\n    if (popup.options.anchor !== props.anchor || popup.options.maxWidth !== props.maxWidth) {\n      // @ts-ignore\n      popup.options.anchor = props.anchor;\n      popup.setMaxWidth(props.maxWidth);\n    }\n    // @ts-ignore\n    if (popup.options.className !== props.className) {\n      // @ts-ignore\n      const prevClassList = getClassList(popup.options.className);\n      const nextClassList = getClassList(props.className);\n\n      for (const c of prevClassList) {\n        if (!nextClassList.has(c)) {\n          popup.removeClassName(c);\n        }\n      }\n      for (const c of nextClassList) {\n        if (!prevClassList.has(c)) {\n          popup.addClassName(c);\n        }\n      }\n      // @ts-ignore\n      popup.options.className = props.className;\n    }\n  }\n\n  return createPortal(props.children, container);\n}\n\n// @ts-ignore\nexport default React.memo(Popup);\n","import {useContext, useMemo, useEffect} from 'react';\nimport type {IControl, ControlPosition} from '../types';\nimport {MapContext} from './map';\nimport type {MapContextValue} from './map';\n\ntype ControlOptions = {\n  position?: ControlPosition;\n};\n\nexport default function useControl<T extends IControl>(\n  onCreate: (context: MapContextValue) => T,\n  onRemove?: ((context: MapContextValue) => void) | ControlOptions,\n  opts?: ControlOptions\n) {\n  const context = useContext(MapContext);\n  const ctrl = useMemo(() => onCreate(context), []);\n\n  useEffect(() => {\n    const {map} = context;\n    if (!map.hasControl(ctrl)) {\n      map.addControl(ctrl, (opts || (onRemove as ControlOptions))?.position);\n    }\n\n    return () => {\n      if (typeof onRemove === 'function') {\n        onRemove(context);\n      }\n      // Map might have been removed (parent effects are destroyed before child ones)\n      if (map.hasControl(ctrl)) {\n        map.removeControl(ctrl);\n      }\n    };\n  }, []);\n\n  return ctrl;\n}\n","import * as React from 'react';\nimport {useEffect} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\nimport useControl from './use-control';\n\nimport type {ControlPosition, MapboxAttributionControl} from '../types';\n\nexport type AttributionControlProps = {\n  /**\n   * If true , force a compact attribution that shows the full attribution on mouse hover.\n   * If false , force the full attribution control. The default is a responsive attribution\n   * that collapses when the map is less than 640 pixels wide.  */\n  compact?: boolean;\n  /** String or strings to show in addition to any other attributions. */\n  customAttribution?: string | string[];\n  /** Placement of the control relative to the map. */\n  position?: ControlPosition;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n};\n\nfunction AttributionControl(props: AttributionControlProps): null {\n  const ctrl = useControl<MapboxAttributionControl>(\n    ({mapLib}) => new mapLib.AttributionControl(props),\n    {\n      position: props.position\n    }\n  );\n\n  useEffect(() => {\n    // @ts-ignore\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n\n  return null;\n}\n\nexport default React.memo(AttributionControl);\n","/* global document */\nimport * as React from 'react';\nimport {useEffect} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\nimport useControl from './use-control';\n\nimport type {ControlPosition, MapboxFullscreenControl} from '../types';\n\nexport type FullscreenControlProps = {\n  /** Id of the DOM element which should be made full screen. By default, the map container\n   * element will be made full screen. */\n  containerId?: string;\n  /** Placement of the control relative to the map. */\n  position?: ControlPosition;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n};\n\nfunction FullscreenControl(props: FullscreenControlProps): null {\n  const ctrl = useControl<MapboxFullscreenControl>(\n    ({mapLib}) =>\n      new mapLib.FullscreenControl({\n        container: props.containerId && document.getElementById(props.containerId)\n      }),\n    {position: props.position}\n  );\n\n  useEffect(() => {\n    // @ts-ignore\n    applyReactStyle(ctrl._controlContainer, props.style);\n  }, [props.style]);\n\n  return null;\n}\n\nexport default React.memo(FullscreenControl);\n","import * as React from 'react';\nimport {forwardRef, useImperativeHandle, useRef, useEffect} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\nimport useControl from './use-control';\n\nimport type {\n  ControlPosition,\n  PositionOptions,\n  FitBoundsOptions,\n  MapboxGeolocateControl,\n  GeolocateEvent,\n  GeolocateResultEvent,\n  GeolocateErrorEvent\n} from '../types';\n\nexport type GeolocateControlRef = {\n  /** Triggers a geolocate event */\n  trigger: () => boolean;\n};\n\nexport type GeolocateControlProps = {\n  /**\n   * A Geolocation API PositionOptions object.\n   * @default {enableHighAccuracy:false,timeout:6000}\n   */\n  positionOptions?: PositionOptions;\n  /** A Map#fitBounds options object to use when the map is panned and zoomed to the user's location.\n   * @default {maxZoom:15}\n   */\n  fitBoundsOptions?: FitBoundsOptions;\n  /** If true the GeolocateControl becomes a toggle button and when active the map will receive\n   * updates to the user's location as it changes. Default false.\n   * @default false\n   */\n  trackUserLocation?: boolean;\n  /** Draw a transparent circle will be drawn around the user location indicating the accuracy\n   * (95% confidence level) of the user's location. Set to false to disable.\n   * This only has effect if `showUserLocation` is true.\n   * @default true\n   */\n  showAccuracyCircle?: boolean;\n  /**\n   * Show a dot on the map at the user's location. Set to false to disable.\n   * @default true\n   */\n  showUserLocation?: boolean;\n  /** If true an arrow will be drawn next to the user location dot indicating the device's heading.\n   * This only has affect when `trackUserLocation` is true. Default false.\n   * @default false\n   */\n  showUserHeading?: boolean;\n  /** Placement of the control relative to the map. */\n  position?: ControlPosition;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n\n  /** Called on each Geolocation API position update that returned as success. */\n  onGeolocate?: (e: GeolocateResultEvent) => void;\n  /** Called on each Geolocation API position update that returned as an error. */\n  onError?: (e: GeolocateErrorEvent) => void;\n  /** Called on each Geolocation API position update that returned as success but user position\n   * is out of map `maxBounds`. */\n  onOutOfMaxBounds?: (e: GeolocateResultEvent) => void;\n  /** Called when the GeolocateControl changes to the active lock state. */\n  onTrackUserLocationStart?: (e: GeolocateEvent) => void;\n  /** Called when the GeolocateControl changes to the background state. */\n  onTrackUserLocationEnd?: (e: GeolocateEvent) => void;\n};\n\nconst GeolocateControl = forwardRef<GeolocateControlRef, GeolocateControlProps>((props, ref) => {\n  const thisRef = useRef({props});\n\n  const ctrl = useControl<MapboxGeolocateControl>(\n    ({mapLib}) => {\n      const gc = new mapLib.GeolocateControl(props);\n\n      // Hack: fix GeolocateControl reuse\n      // When using React strict mode, the component is mounted twice.\n      // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n      const setupUI = gc._setupUI;\n      gc._setupUI = args => {\n        if (!gc._container.hasChildNodes()) {\n          setupUI(args);\n        }\n      };\n\n      gc.on('geolocate', e => {\n        thisRef.current.props.onGeolocate?.(e as GeolocateResultEvent);\n      });\n      gc.on('error', e => {\n        thisRef.current.props.onError?.(e as GeolocateErrorEvent);\n      });\n      gc.on('outofmaxbounds', e => {\n        thisRef.current.props.onOutOfMaxBounds?.(e as GeolocateResultEvent);\n      });\n      gc.on('trackuserlocationstart', e => {\n        thisRef.current.props.onTrackUserLocationStart?.(e as GeolocateEvent);\n      });\n      gc.on('trackuserlocationend', e => {\n        thisRef.current.props.onTrackUserLocationEnd?.(e as GeolocateEvent);\n      });\n\n      return gc;\n    },\n    {position: props.position}\n  );\n\n  thisRef.current.props = props;\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      trigger: () => ctrl.trigger()\n    }),\n    []\n  );\n\n  useEffect(() => {\n    // @ts-ignore\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n\n  return null;\n});\n\nGeolocateControl.displayName = 'GeolocateControl';\n\nexport default React.memo(GeolocateControl);\n","import * as React from 'react';\nimport {useEffect} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\nimport useControl from './use-control';\n\nimport type {ControlPosition, MapboxNavigationControl} from '../types';\n\nexport type NavigationControlProps = {\n  /** If true the compass button is included.\n   * @default true\n   */\n  showCompass?: boolean;\n  /** If true the zoom-in and zoom-out buttons are included.\n   * @default true\n   */\n  showZoom?: boolean;\n  /** If true the pitch is visualized by rotating X-axis of compass.\n   * @default false\n   */\n  visualizePitch?: boolean;\n  /** Placement of the control relative to the map. */\n  position?: ControlPosition;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n};\n\nfunction NavigationControl(props: NavigationControlProps): null {\n  const ctrl = useControl<MapboxNavigationControl>(\n    ({mapLib}) => new mapLib.NavigationControl(props),\n    {\n      position: props.position\n    }\n  );\n\n  useEffect(() => {\n    // @ts-ignore\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n\n  return null;\n}\n\nexport default React.memo(NavigationControl);\n","import * as React from 'react';\nimport {useEffect} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\nimport useControl from './use-control';\n\nimport type {ControlPosition, MapboxScaleControl} from '../types';\n\nexport type ScaleControlProps = {\n  /** Unit of the distance.\n   * @default \"metric\"\n   */\n  unit?: 'imperial' | 'metric' | 'nautical';\n  /** The maximum length of the scale control in pixels.\n   * @default 100\n   */\n  maxWidth?: number;\n  /** Placement of the control relative to the map. */\n  position?: ControlPosition;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n};\n\nconst defaultProps: ScaleControlProps = {\n  unit: 'metric',\n  maxWidth: 100\n};\n\nfunction ScaleControl(props: ScaleControlProps): null {\n  const ctrl = useControl<MapboxScaleControl>(({mapLib}) => new mapLib.ScaleControl(props), {\n    position: props.position\n  });\n\n  // @ts-ignore\n  if (ctrl.options.unit !== props.unit || ctrl.options.maxWidth !== props.maxWidth) {\n    // @ts-ignore\n    ctrl.options.maxWidth = props.maxWidth;\n    // This method will trigger an update\n    ctrl.setUnit(props.unit);\n  }\n\n  useEffect(() => {\n    // @ts-ignore\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n\n  return null;\n}\n\nScaleControl.defaultProps = defaultProps;\n\nexport default React.memo(ScaleControl);\n"],"names":["add","dirtyDate","duration","requiredArgs","arguments","Date","NaN","years","toInteger","months","weeks","days","hours","minutes","seconds","date","toDate","dateWithMonths","addMonths","dateWithDays","addDays","minutesToAdd","secondsToAdd","msToAdd","finalDate","getTime","subDays","dirtyAmount","amount","subMonths","sub","dateWithoutMonths","dateWithoutDays","minutestoSub","secondstoSub","mstoSub","lowerCase","str","toLowerCase","DEFAULT_SPLIT_REGEXP","DEFAULT_STRIP_REGEXP","noCase","input","options","splitRegexp","_a","_b","stripRegexp","_c","transform","_d","delimiter","result","replace","start","end","length","charAt","slice","split","map","join","re","value","RegExp","reduce","MountedMapsContext","React","transformToViewState","tr","longitude","center","lng","latitude","lat","zoom","pitch","bearing","padding","applyViewStateToTransform","props","v","viewState","changed","constructor","isPaddingEqual","refProps","normalizeStyle","style","toJS","layers","layerIndex","layer","id","layerRef","ref","normalizedLayer","interactive","propName","deepEqual","a","b","Array","isArray","i","aKeys","Object","keys","bKeys","key","hasOwnProperty","pointerEvents","mousedown","mouseup","mouseover","mousemove","click","dblclick","mouseenter","mouseleave","mouseout","contextmenu","touchstart","touchend","touchmove","touchcancel","cameraEvents","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","rotatestart","rotate","rotateend","pitchstart","pitchend","otherEvents","wheel","boxzoomstart","boxzoomend","boxzoomcancel","resize","load","render","idle","remove","data","styledata","sourcedata","error","settingNames","handlerNames","Mapbox","MapClass","container","_map","_internalUpdate","_inRender","_hoveredFeatures","_deferredEvents","_onEvent","e","cb","type","_onPointerEvent","_updateHover","interactiveLayerIds","features","queryRenderedFeatures","point","_onCameraEvent","this","_MapClass","_initialize","_renderTransform","oldProps","settingsChanged","_updateSettings","_createShadowTransform","sizeChanged","_updateSize","viewStateChanged","_updateViewState","_updateStyle","_updateStyleComponents","_updateHandlers","isMoving","redraw","mapOptions","initialViewState","accessToken","mapboxAccessToken","getAccessTokenFromEnv","mapStyle","assign","gl","getContext","HTMLCanvasElement","prototype","setPadding","cursor","getCanvas","renderMap","_render","arg","call","runRenderTaskQueue","_renderTaskQueue","run","_onBeforeRepaint","on","_onAfterRepaint","fireEvent","fire","eventName","_fireEvent","bind","width","height","savedMaps","push","_frame","cancel","renderTransform","newTransform","clone","pixelsToGLUnits","cloneTransform","painter","updateElevation","elevation","nextProps","triggerEvents","cameraElevationReference","deferredEvents","currProps","toUpperCase","diff","styleDiffing","localIdeographFontFamily","setStyle","loaded","light","setLight","fog","setFog","terrain","getSource","source","setTerrain","newValue","enable","disable","onMouseMove","onMouseEnter","onMouseLeave","eventType","wasHovering","isHovering","baseFire","event","properties","that","pop","oldContainer","getContainer","className","childNodes","appendChild","_container","setProps","isStyleLoaded","once","location","match","exec","search","process","MapboxAccessToken","REACT_APP_MAPBOX_ACCESS_TOKEN","skipMethods","createRef","mapInstance","mapLib","getMap","getCenter","getZoom","getBearing","getPitch","getPadding","getBounds","project","lnglat","locationPoint","LngLat","convert","unproject","pointLocation","Point","obj","Set","proto","getOwnPropertyNames","getPrototypeOf","from","getMethodNames","includes","document","useLayoutEffect","useEffect","globalSettings","MapContext","defaultProps","minZoom","maxZoom","minPitch","maxPitch","scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch","version","sources","projection","renderWorldCopies","onError","console","RTLTextPlugin","Map","forwardRef","mountedMapsContext","useContext","useState","setMapInstance","containerRef","useRef","contextValue","current","mapbox","isMounted","Promise","resolve","then","mapboxgl","default","Error","supported","getRTLTextPluginStatus","setRTLTextPlugin","setGlobals","reuseMaps","reuse","onMapMount","catch","target","originalEvent","onMapUnmount","recycle","destroy","useIsomorphicLayoutEffect","useImperativeHandle","useMemo","position","Provider","children","displayName","unitlessNumber","applyReactStyle","element","styles","Number","isFinite","test","Marker","thisRef","marker","hasChildren","el","createElement","mk","setLngLat","getElement","addEventListener","onClick","evt","lngLat","getLngLat","onDragStart","onDrag","onDragEnd","addTo","offset","ax","x","ay","y","bx","by","arePointsEqual","getOffset","setOffset","isDraggable","draggable","setDraggable","getRotation","rotation","setRotation","getRotationAlignment","rotationAlignment","setRotationAlignment","getPitchAlignment","pitchAlignment","setPitchAlignment","getPopup","popup","setPopup","createPortal","getClassList","trim","pp","Popup","onOpen","onClose","setDOMContent","off","isOpen","anchor","maxWidth","setMaxWidth","prevClassList","nextClassList","c","has","removeClassName","addClassName","useControl","onCreate","onRemove","opts","context","ctrl","hasControl","addControl","removeControl","AttributionControl","FullscreenControl","containerId","getElementById","_controlContainer","GeolocateControl","gc","setupUI","_setupUI","args","hasChildNodes","onGeolocate","onOutOfMaxBounds","onTrackUserLocationStart","onTrackUserLocationEnd","trigger","NavigationControl","ScaleControl","unit","setUnit"],"sourceRoot":""}