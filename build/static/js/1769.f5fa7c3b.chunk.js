"use strict";(self.webpackChunk_ijm_relevic=self.webpackChunk_ijm_relevic||[]).push([[1769],{18786:function(e,r,n){n.d(r,{HZ:function(){return a},rz:function(){return t},si:function(){return i},lj:function(){return o}});var a=[{label:"S\xed",value:1},{label:"No",value:2},{label:"Quiere M\xe1s Informaci\xf3n",value:3},{label:"No puede ahora pero quiz\xe1 luego",value:4}],t=[{label:"Mentoreo de IJM",value:1},{label:"Herramienta tic",value:2},{label:"Entrenamiento sobre ESO",value:3},{label:"Convencimiento sobre participaci\xf3n en la red",value:4},{label:"Paquete de gesti\xf3n",value:5},{label:"Canal de Comunicaci\xf3n con CONANI",value:6},{label:"Capacitaci\xf3n sobre trauma",value:7},{label:"Otro",value:8}],i="/provider",o="/branch"},54737:function(e,r,n){n.d(r,{Z:function(){return f}});var a=n(1413),t=n(45987),i=n(68870),o=n(20890),l=n(50533),s=n(43504),u=n(93517),d=n(80184),c=["links","activeLast"];function p(e){var r=e.links,n=e.activeLast,l=void 0!==n&&n,s=(0,t.Z)(e,c),p=r[r.length-1].name,m=r.map((function(e){return(0,d.jsx)(v,{link:e},e.name)})),f=r.map((function(e){return(0,d.jsx)("div",{children:e.name!==p?(0,d.jsx)(v,{link:e}):(0,d.jsx)(o.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:p})},e.name)}));return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({separator:(0,d.jsx)(i.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},s),{},{children:l?m:f}))}function v(e){var r=e.link,n=r.href,a=r.name,t=r.icon;return(0,d.jsxs)(l.Z,{variant:"body2",component:s.rU,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,d.jsx)(i.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),a]},a)}var m=["links","action","heading","moreLink","sx"];function f(e){var r=e.links,n=e.action,s=e.heading,u=e.moreLink,c=void 0===u?[]:u,v=e.sx,f=(0,t.Z)(e,m);return(0,d.jsxs)(i.Z,{sx:(0,a.Z)({mb:5},v),children:[(0,d.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(i.Z,{sx:{flexGrow:1},children:[(0,d.jsx)(o.Z,{variant:"h4",gutterBottom:!0,children:s}),(0,d.jsx)(p,(0,a.Z)({links:r},f))]}),n&&(0,d.jsx)(i.Z,{sx:{flexShrink:0},children:n})]}),(0,d.jsx)(i.Z,{sx:{mt:2},children:"string"===typeof c?(0,d.jsx)(l.Z,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map((function(e){return(0,d.jsx)(l.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},61769:function(e,r,n){n.r(r),n.d(r,{default:function(){return _}});var a=n(1656),t=n(16871),i=n(10266),o=n(7055),l=n(58561),s=n(53451),u=n(54737),d=n(1413),c=n(15861),p=n(64687),v=n.n(p),m=n(76863),f=n(72791),x=n(98246),h=n(61134),Z=n(61265),b=n(39709),g=n(61889),j=n(57621),C=n(68870),k=n(67414),w=n(94070),y=n(91448),S=n(87748),R=n(92033),I=function(){var e=(0,c.Z)(v().mark((function e(r){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Z.post("/auth/register",r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),N=function(){var e=(0,c.Z)(v().mark((function e(r,n){var a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Z.put("/user/".concat(r),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),B=n(72419),P=n(18786),U=n(44371),q=n(80184);function A(e){var r,n,a,i=e.isEdit,l=e.currentUser,s=(0,t.s0)(),u=(0,U.Z)().user,p=(0,B.kY)().mutate,R=(0,x.Ds)().enqueueSnackbar,A=(0,B.ZP)("/role").data,M=void 0===A?[]:A,E=(0,B.ZP)(P.si).data,_=void 0===E?[]:E,z=m.Ry().shape({name:m.Z_().required("Name is required"),email:m.Z_().required("Email is required").email(),roleId:m.Rx().required("Role Number is required"),providerId:m.Rx().required("Role Number is required")}),L=(0,f.useMemo)((function(){var e,r,n,a;return{name:(null===l||void 0===l?void 0:l.name)||"",email:(null===l||void 0===l?void 0:l.email)||"",roleId:null!==(e=null===l||void 0===l?void 0:l.role.id)&&void 0!==e?e:0,providerId:null!==(r=null===l||void 0===l||null===(n=l.provider)||void 0===n?void 0:n.id)&&void 0!==r?r:0,userCode:null!==(a=null===l||void 0===l?void 0:l.userCode)&&void 0!==a?a:""}}),[l]),O=(0,h.cI)({resolver:(0,Z.X)(z),defaultValues:L}),T=O.reset,G=O.handleSubmit,H=O.formState.isSubmitting;(0,f.useEffect)((function(){i&&l&&T(L),i||T(L)}),[i,l]);var W=function(){var e=(0,c.Z)(v().mark((function e(r){var n,a,t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i){e.next=13;break}if(a=(0,S.ne)(),1!==(null===u||void 0===u||null===(n=u.provider)||void 0===n?void 0:n.id)){e.next=8;break}return e.next=6,I((0,d.Z)((0,d.Z)({},r),{},{password:a}));case 6:e.next=10;break;case 8:return e.next=10,I((0,d.Z)((0,d.Z)({},r),{},{providerId:null===u||void 0===u||null===(t=u.provider)||void 0===t?void 0:t.id,password:a}));case 10:navigator.clipboard.writeText(a),e.next=16;break;case 13:if(null===l||void 0===l||!l.id){e.next=16;break}return e.next=16,N(null===l||void 0===l?void 0:l.id,r);case 16:p("/user"),T(),R(i?"Cambios guardados":"Usuario Creado"),!i&&R("Se ha copiado la contrase\xf1a al portapapeles"),s(o.vB.user.list),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(r){return e.apply(this,arguments)}}();return(0,q.jsx)(y.RV,{methods:O,onSubmit:G(W),children:(0,q.jsx)(g.ZP,{container:!0,spacing:3,children:(0,q.jsx)(g.ZP,{item:!0,xs:12,md:12,children:(0,q.jsxs)(j.Z,{sx:{p:3},children:[(0,q.jsxs)(C.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,q.jsx)(y.au,{name:"name",label:"Nombre Completo"}),(0,q.jsx)(y.au,{name:"email",label:"Correo Electr\xf3nico"}),(0,q.jsx)(y.au,{name:"userCode",label:"C\xf3digo de Usuario (C\xe9dula)"}),(0,q.jsxs)(y.Cc,{name:"roleId",label:"Rol",placeholder:"Rol",children:[(0,q.jsx)("option",{value:0},0),M.map((function(e){return(0,q.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),1===(null===u||void 0===u||null===(r=u.provider)||void 0===r?void 0:r.id)&&(0,q.jsxs)(y.Cc,{name:"providerId",label:"Proveedor",placeholder:"Proveedor",children:[(0,q.jsx)("option",{value:0},0),_.map((function(e){return(0,q.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),1!==(null===u||void 0===u||null===(n=u.provider)||void 0===n?void 0:n.id)&&(0,q.jsx)(k.Z,{sx:{width:"100%",mt:3},spacing:2,children:(0,q.jsxs)(w.Z,{severity:"info",children:["Se creara el usuario para la organizaci\xf3n: ",null===u||void 0===u||null===(a=u.provider)||void 0===a?void 0:a.name]})}),(0,q.jsx)(k.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,q.jsx)(b.Z,{type:"submit",variant:"contained",loading:H,children:i?"Guardar Cambios":"Crear Usuario"})})]})})})})}var M=n(49480),E=n(9519);function _(){var e,r=(0,l.Z)().themeStretch,n=(0,t.UO)().id,d=!!n,c=(0,B.ZP)(n&&"/user/".concat(n)).data;return(0,q.jsx)(M.Z,{hasContent:!0,moduleId:E.P.USER,children:(0,q.jsx)(s.Z,{title:"Nuevo Usuario",children:(0,q.jsxs)(i.Z,{maxWidth:!r&&"lg",children:[(0,q.jsx)(u.Z,{heading:d?"Editar Usuario":"Crear un Nuevo Usuario",links:[{name:"Dashboard",href:o.vB.root},{name:"Usuarios",href:o.vB.user.list},{name:d?(0,a.I)(null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:""):"Nuevo usuario"}]}),(0,q.jsx)(A,{isEdit:d,currentUser:c})]})})})}},93517:function(e,r,n){n.d(r,{Z:function(){return B}});var a=n(93433),t=n(29439),i=n(4942),o=n(87462),l=n(63366),s=n(72791),u=(n(57441),n(28182)),d=n(94419),c=n(66934),p=n(31402),v=n(20890),m=n(12065),f=n(74223),x=n(80184),h=(0,f.Z)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),Z=n(23701),b=(0,c.ZP)(Z.Z)((function(e){var r=e.theme;return(0,o.Z)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.Z)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.Z)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,m._4)(r.palette.grey[200],.12)}:{backgroundColor:(0,m._4)(r.palette.grey[600],.12)})})})),g=(0,c.ZP)(h)({width:24,height:16});var j=function(e){var r=e;return(0,x.jsx)("li",{children:(0,x.jsx)(b,(0,o.Z)({focusRipple:!0},e,{ownerState:r,children:(0,x.jsx)(g,{ownerState:r})}))})},C=n(21217);function k(e){return(0,C.Z)("MuiBreadcrumbs",e)}var w=(0,n(75878).Z)("MuiBreadcrumbs",["root","ol","li","separator"]),y=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,c.ZP)(v.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,r){return[(0,i.Z)({},"& .".concat(w.li),r.li),r.root]}})({}),R=(0,c.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,r){return r.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,c.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,r){return r.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function N(e,r,n,a){return e.reduce((function(t,i,o){return o<e.length-1?t=t.concat(i,(0,x.jsx)(I,{"aria-hidden":!0,className:r,ownerState:a,children:n},"separator-".concat(o))):t.push(i),t}),[])}var B=s.forwardRef((function(e,r){var n=(0,p.Z)({props:e,name:"MuiBreadcrumbs"}),i=n.children,c=n.className,v=n.component,m=void 0===v?"nav":v,f=n.expandText,h=void 0===f?"Show path":f,Z=n.itemsAfterCollapse,b=void 0===Z?1:Z,g=n.itemsBeforeCollapse,C=void 0===g?1:g,w=n.maxItems,I=void 0===w?8:w,B=n.separator,P=void 0===B?"/":B,U=(0,l.Z)(n,y),q=s.useState(!1),A=(0,t.Z)(q,2),M=A[0],E=A[1],_=(0,o.Z)({},n,{component:m,expanded:M,expandText:h,itemsAfterCollapse:b,itemsBeforeCollapse:C,maxItems:I,separator:P}),z=function(e){var r=e.classes;return(0,d.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},k,r)}(_),L=s.useRef(null),O=s.Children.toArray(i).filter((function(e){return s.isValidElement(e)})).map((function(e,r){return(0,x.jsx)("li",{className:z.li,children:e},"child-".concat(r))}));return(0,x.jsx)(S,(0,o.Z)({ref:r,component:m,color:"text.secondary",className:(0,u.Z)(z.root,c),ownerState:_},U,{children:(0,x.jsx)(R,{className:z.ol,ref:L,ownerState:_,children:N(M||I&&O.length<=I?O:function(e){return C+b>=e.length?e:[].concat((0,a.Z)(e.slice(0,C)),[(0,x.jsx)(j,{"aria-label":h,onClick:function(){E(!0);var e=L.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],(0,a.Z)(e.slice(e.length-b,e.length)))}(O),z.separator,P,_)})}))}))},1656:function(e,r,n){n.d(r,{I:function(){return o}});var a=n(3431),t=n(17254);function i(e){return function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(e.toLowerCase())}function o(e,r){return void 0===r&&(r={}),(0,t.B)(e,(0,a.pi)({delimiter:" ",transform:i},r))}},17254:function(e,r,n){n.d(r,{B:function(){return o}});function a(e){return e.toLowerCase()}var t=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],i=/[^A-Z0-9]+/gi;function o(e,r){void 0===r&&(r={});for(var n=r.splitRegexp,o=void 0===n?t:n,s=r.stripRegexp,u=void 0===s?i:s,d=r.transform,c=void 0===d?a:d,p=r.delimiter,v=void 0===p?" ":p,m=l(l(e,o,"$1\0$2"),u,"\0"),f=0,x=m.length;"\0"===m.charAt(f);)f++;for(;"\0"===m.charAt(x-1);)x--;return m.slice(f,x).split("\0").map(c).join(v)}function l(e,r,n){return r instanceof RegExp?e.replace(r,n):r.reduce((function(e,r){return e.replace(r,n)}),e)}}}]);
//# sourceMappingURL=1769.f5fa7c3b.chunk.js.map