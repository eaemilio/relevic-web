(self.webpackChunk_ijm_relevic=self.webpackChunk_ijm_relevic||[]).push([[6393],{64021:function(e,i,n){"use strict";n.d(i,{al:function(){return r},bQ:function(){return t},h8:function(){return l},Wu:function(){return a}});var r="/victim",t=[{label:"Soltera",value:1},{label:"Comprometida",value:2},{label:"Casada",value:3},{label:"Separada",value:4},{label:"Enviudada",value:5},{label:"Vive con Pareja",value:6},{label:"Divorciada",value:7}],l=[{label:"Femenino",value:0},{label:"Masculino",value:1}],a={name:"",otherName:"",age:0,verifiedAge:0,birthday:"",citizenship:"",ethnicity:"",nationality:"",children:0,currentAddress:"",maritalStatus:0,originAddress:"",phoneNumber:"",preferredLanguage:"",id:0,genre:0,email:""}},50103:function(e,i,n){"use strict";n.d(i,{Z:function(){return h}});var r=n(1413),t=n(45987),l=n(9506),a=n(61113),o=n(90891),s=n(29466),d=n(3404),c=n(46417),u=["links","activeLast"];function x(e){var i=e.links,n=e.activeLast,o=void 0!==n&&n,s=(0,t.Z)(e,u),x=i[i.length-1].name,m=i.map((function(e){return(0,c.jsx)(v,{link:e},e.name)})),h=i.map((function(e){return(0,c.jsx)("div",{children:e.name!==x?(0,c.jsx)(v,{link:e}):(0,c.jsx)(a.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:x})},e.name)}));return(0,c.jsx)(d.Z,(0,r.Z)((0,r.Z)({separator:(0,c.jsx)(l.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},s),{},{children:o?m:h}))}function v(e){var i=e.link,n=i.href,r=i.name,t=i.icon;return(0,c.jsxs)(o.Z,{variant:"body2",component:s.rU,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,c.jsx)(l.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),r]},r)}var m=["links","action","heading","moreLink","sx"];function h(e){var i=e.links,n=e.action,s=e.heading,d=e.moreLink,u=void 0===d?[]:d,v=e.sx,h=(0,t.Z)(e,m);return(0,c.jsxs)(l.Z,{sx:(0,r.Z)({mb:5},v),children:[(0,c.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(l.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:s}),(0,c.jsx)(x,(0,r.Z)({links:i},h))]}),n&&(0,c.jsx)(l.Z,{sx:{flexShrink:0},children:n})]}),(0,c.jsx)(l.Z,{sx:{mt:2},children:"string"===typeof u?(0,c.jsx)(o.Z,{href:u,target:"_blank",rel:"noopener",variant:"body2",children:u}):u.map((function(e){return(0,c.jsx)(o.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},7607:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return M}});var r=n(97890),t=n(57227),l=n(50177),a=n(22227),o=n(76025),s=n(50103),d=n(92122),c=n(64021),u=n(93433),x=n(15861),v=n(29439),m=n(1413),h=n(64687),f=n.n(h),p=n(1432),j=n(32703),b=n(17592),y=n(61113),g=n(9019),Z=n(73428),C=n(9506),k=n(24631),w=n(35898),G=n(90891),S=n(58908),A=n(47313),N=n(75627),V=n(39041),E=n(21190),D=n(36834),B=n(72905),F=n(43394),L=n(44714),z=n(38175),_=n(46417);z.Zx.register({family:"Circular",src:"/fonts/CircularStd-Book.otf"}),z.Zx.register({family:"Circular-Bold",src:"/fonts/CircularStd-Bold.otf"});var P=z.mM.create({page:{paddingVertical:30,paddingHorizontal:48},section:{marginVertical:30},logo:{width:200,marginBottom:14},headerLabel:{fontSize:12,fontFamily:"Circular-Bold"},title:{fontSize:16,fontFamily:"Circular-Bold"},label:{fontSize:9,letterSpacing:.75,textTransform:"uppercase",marginBottom:4,fontFamily:"Circular-Bold"},text:{fontSize:12,fontFamily:"Circular"},info:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",marginBottom:16},divider:{width:"100%",height:1,backgroundColor:"#F2F2F2"},row:{display:"flex",flexDirection:"row"},column:{flex:1,display:"flex",flexDirection:"column"}}),q=function(e){var i,n,r,t,l,a,o,s,d=e.victim;return(0,_.jsx)(z.BB,{children:(0,_.jsxs)(z.T3,{size:"A4",style:P.page,children:[(0,_.jsxs)(z.G7,{style:[P.section],children:[(0,_.jsx)(z.Ee,{source:"/assets/logo-pgr-azul.png",style:P.logo}),(0,_.jsx)(z.xv,{style:P.title,children:"M\xf3dulo de Servicios a la V\xedctima"}),(0,_.jsx)(z.xv,{style:P.headerLabel,children:"F\xedcha de V\xedctima"}),(0,_.jsx)(z.xv,{style:P.headerLabel,children:null===d||void 0===d?void 0:d.name})]}),(0,_.jsx)(z.G7,{style:P.divider}),(0,_.jsx)(z.G7,{style:P.section,children:(0,_.jsxs)(z.G7,{style:P.row,children:[(0,_.jsxs)(z.G7,{style:[P.column,{marginRight:10}],children:[(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Nombre (como se indica):"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(i=null===d||void 0===d?void 0:d.name)&&void 0!==i?i:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Otros nombres usados:"}),(0,_.jsx)(z.xv,{style:P.text,children:""===(null===d||void 0===d?void 0:d.otherName.trim())?"--":null===d||void 0===d?void 0:d.otherName})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Edad, indicado:"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(n=null===d||void 0===d?void 0:d.age)&&void 0!==n?n:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Edad, verificada:"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(r=null===d||void 0===d?void 0:d.verifiedAge)&&void 0!==r?r:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Fecha de Nacimiento (Si es conocida)"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(t=null===d||void 0===d?void 0:d.birthday)&&void 0!==t?t:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"N\xfamero de tel\xe9fono"}),(0,_.jsx)(z.xv,{style:P.text,children:""===(null===d||void 0===d?void 0:d.phoneNumber.trim())?"--":null===d||void 0===d?void 0:d.phoneNumber})]})]}),(0,_.jsxs)(z.G7,{style:[P.column],children:[(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Ciudadan\xeda"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(l=null===d||void 0===d?void 0:d.citizenship)&&void 0!==l?l:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Etnicidad"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(a=null===d||void 0===d?void 0:d.ethnicity)&&void 0!==a?a:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Pa\xeds/Providencia de Origen"}),(0,_.jsx)(z.xv,{style:P.text,children:null!==(o=null===d||void 0===d?void 0:d.nationality)&&void 0!==o?o:"--"})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Estado Civil"}),(0,_.jsx)(z.xv,{style:P.text,children:null===(s=c.bQ.find((function(e){return e.value===(null===d||void 0===d?void 0:d.maritalStatus)})))||void 0===s?void 0:s.label})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Hijos"}),(0,_.jsx)(z.xv,{style:P.text,children:0===(null===d||void 0===d?void 0:d.children)?"No":null===d||void 0===d?void 0:d.children})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Idioma preferido"}),(0,_.jsx)(z.xv,{style:P.text,children:""===(null===d||void 0===d?void 0:d.preferredLanguage.trim())?"--":null===d||void 0===d?void 0:d.preferredLanguage})]})]})]})}),(0,_.jsx)(z.G7,{style:P.divider}),(0,_.jsxs)(z.G7,{style:P.section,children:[(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Direcci\xf3n (de origen)"}),(0,_.jsx)(z.xv,{style:P.text,children:""===(null===d||void 0===d?void 0:d.originAddress.trim())?"--":null===d||void 0===d?void 0:d.originAddress})]}),(0,_.jsxs)(z.G7,{style:P.info,children:[(0,_.jsx)(z.xv,{style:P.label,children:"Direcci\xf3n (actual)"}),(0,_.jsx)(z.xv,{style:P.text,children:""===(null===d||void 0===d?void 0:d.currentAddress.trim())?"--":null===d||void 0===d?void 0:d.currentAddress})]})]})]})})},I=(0,b.ZP)(y.Z)((function(e){var i=e.theme;return(0,m.Z)((0,m.Z)({},i.typography.subtitle2),{},{color:i.palette.text.secondary,marginBottom:i.spacing(1)})}));function R(e){var i=e.isEdit,n=e.currentVictim,t=(0,S.Ds)().enqueueSnackbar,l=(0,r.s0)(),a=(0,d.kY)().mutate,s=D.Ry().shape({name:D.Z_().required("Campo obligatorio"),id:D.Rx().min(1,"C\xe9dula no v\xe1lida").required("Campo obligatorio"),age:D.Rx().min(1,"Edad debe ser mayor a 0").required("Campo obligatorio"),verifiedAge:D.Rx().min(1,"Edad debe ser mayor a 0").required("Campo obligatorio"),citizenship:D.Z_().required("Campo obligatorio"),ethnicity:D.Z_().required("Campo obligatorio"),nationality:D.Z_().required("Campo obligatorio"),maritalStatus:D.Rx().min(1,"Campo obligatorio"),currentAddress:D.Z_().required("Campo obligatorio"),email:D.Z_().required("Campo obligatorio"),children:D.Rx()}),h=(0,A.useMemo)((function(){var e,i,r,t,l,a,o,s,d,c,u,x,v,m,h,f,p;return{id:null!==(e=null===n||void 0===n?void 0:n.id)&&void 0!==e?e:0,name:null!==(i=null===n||void 0===n?void 0:n.name)&&void 0!==i?i:"",otherName:null!==(r=null===n||void 0===n?void 0:n.otherName)&&void 0!==r?r:"",age:null!==(t=null===n||void 0===n?void 0:n.age)&&void 0!==t?t:0,verifiedAge:null!==(l=null===n||void 0===n?void 0:n.verifiedAge)&&void 0!==l?l:0,birthday:null!==(a=null===n||void 0===n?void 0:n.birthday)&&void 0!==a?a:(new Date).toString(),citizenship:null!==(o=null===n||void 0===n?void 0:n.citizenship)&&void 0!==o?o:"",ethnicity:null!==(s=null===n||void 0===n?void 0:n.ethnicity)&&void 0!==s?s:"",nationality:null!==(d=null===n||void 0===n?void 0:n.nationality)&&void 0!==d?d:"",maritalStatus:null!==(c=null===n||void 0===n?void 0:n.maritalStatus)&&void 0!==c?c:0,children:null!==(u=null===n||void 0===n?void 0:n.children)&&void 0!==u?u:0,genre:null!==(x=null===n||void 0===n?void 0:n.genre)&&void 0!==x?x:0,originAddress:null!==(v=null===n||void 0===n?void 0:n.originAddress)&&void 0!==v?v:"",currentAddress:null!==(m=null===n||void 0===n?void 0:n.currentAddress)&&void 0!==m?m:"",phoneNumber:null!==(h=null===n||void 0===n?void 0:n.phoneNumber)&&void 0!==h?h:"",preferredLanguage:null!==(f=null===n||void 0===n?void 0:n.preferredLanguage)&&void 0!==f?f:"",email:null!==(p=null===n||void 0===n?void 0:n.email)&&void 0!==p?p:""}}),[n]),b=(0,N.cI)({resolver:(0,p.X)(s),defaultValues:h}),P=b.reset,R=b.setValue,M=b.watch,W=b.handleSubmit,O=b.formState.isSubmitting,H=M("birthday"),Y=(0,z.Eb)({document:(0,_.jsx)(q,{victim:n})}),Q=(0,v.Z)(Y,2),T=Q[0],U=Q[1];(0,A.useEffect)((function(){i&&n&&(P(h),U()),i||P(h)}),[i,n]);var X=function(){var e=(0,x.Z)(f().mark((function e(r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i||!n){e.next=6;break}return e.next=4,a(c.al,(0,x.Z)(f().mark((function e(){var i,t,l,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>0&&void 0!==a[0]?a[0]:[],e.next=3,(0,E.Wl)("".concat(c.al,"/").concat(n.id),(0,m.Z)({},r));case 3:return t=e.sent,l=i.filter((function(e){return e.id!==n.id})),e.abrupt("return",[].concat((0,u.Z)(l),[t]));case 6:case"end":return e.stop()}}),e)}))),{revalidate:!1,rollbackOnError:!0});case 4:e.next=9;break;case 6:if(i){e.next=9;break}return e.next=9,(0,E.km)(c.al,r);case 9:l(o.vB.general.victims.list),t(n?"Cambios guardados":"V\xedctima Creada"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(i){return e.apply(this,arguments)}}();return(0,_.jsx)(N.RV,(0,m.Z)((0,m.Z)({},b),{},{children:(0,_.jsx)("form",{onSubmit:W(X),children:(0,_.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,_.jsx)(g.ZP,{item:!0,xs:12,md:12,sx:{mt:2},children:(0,_.jsxs)(Z.Z,{sx:{p:3,flexDirection:"column",display:"flex"},children:[(0,_.jsx)(y.Z,{variant:"h5",noWrap:!0,children:"Informaci\xf3n General"}),(0,_.jsxs)(C.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},mt:3},children:[(0,_.jsx)(V.au,{name:"name",label:"Nombre (como se indica)"}),(0,_.jsx)(V.au,{name:"otherName",label:"Otros nombres usados"}),(0,_.jsx)(V.au,{name:"id",label:"C\xe9dula"}),(0,_.jsx)(V.au,{name:"email",label:"Correo Electr\xf3nico"}),(0,_.jsx)(V.au,{name:"age",label:"Edad, indicado",type:"number"}),(0,_.jsx)(V.au,{name:"verifiedAge",label:"Edad, verificada",type:"number"}),(0,_.jsx)(V.au,{name:"citizenship",label:"Ciudadan\xeda"}),(0,_.jsx)(V.au,{name:"ethnicity",label:"Etnicidad"}),(0,_.jsx)(V.au,{name:"nationality",label:"Pa\xeds/Providencia de origen"}),(0,_.jsx)(V.au,{name:"phoneNumber",label:"N\xfamero(s) de tel\xe9fono"}),(0,_.jsx)(V.au,{name:"preferredLanguage",label:"Idioma Preferido"}),(0,_.jsx)(V.au,{name:"children",label:"Cantidad de Hijos",type:"number"})]}),(0,_.jsxs)(C.Z,{sx:{flexDirection:"column",display:"flex",gap:2,mt:3},children:[(0,_.jsx)(V.au,{name:"originAddress",label:"Direcci\xf3n (de origen)"}),(0,_.jsx)(V.au,{name:"currentAddress",label:"Direcci\xf3n (actual)"}),(0,_.jsx)(F._,{dateAdapter:B.y,children:(0,_.jsx)(L.$,{label:"Fecha de nacimiento (si es conocida)",inputFormat:"DD/MM/YYYY",value:H,onChange:function(e){return e&&R("birthday",e)},renderInput:function(e){return(0,_.jsx)(k.Z,(0,m.Z)({},e))}})})]}),(0,_.jsxs)(C.Z,{sx:{flexDirection:"column",display:"flex",gap:2,mt:3},children:[(0,_.jsxs)(C.Z,{children:[(0,_.jsx)(I,{children:"Estado Civil"}),(0,_.jsx)(V.km,{name:"maritalStatus",options:c.bQ,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,_.jsx)(C.Z,{sx:{flexDirection:"column",display:"flex",gap:2,mt:3},children:(0,_.jsxs)(C.Z,{children:[(0,_.jsx)(I,{children:"G\xe9nero"}),(0,_.jsx)(V.km,{name:"genre",options:c.h8,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]})})]})]})}),(0,_.jsx)(g.ZP,{item:!0,xs:12,md:12,children:(0,_.jsxs)(w.Z,{alignItems:"flex-end",sx:{mt:2},children:[T.url&&n&&(0,_.jsx)(G.Z,{sx:{mb:4},href:T.url,download:"Ficha de V\xedctima - ".concat(n.name,".pdf"),children:"Descargar Ficha de V\xedctima"}),(0,_.jsx)(j.Z,{type:"submit",variant:"contained",loading:O,children:i?"Guardar Cambios":"Crear V\xedctima"})]})})]})})}))}function M(){var e=(0,l.Z)().themeStretch,i=(0,r.UO)().id,n=!!i,u=(0,d.ZP)(i&&"".concat(c.al,"/").concat(i)).data;return(0,_.jsx)(a.Z,{title:"V\xedctima",children:(0,_.jsxs)(t.Z,{maxWidth:!e&&"lg",children:[(0,_.jsx)(s.Z,{heading:n?"Editar V\xedctima":"Nueva V\xedctima",links:[{name:"Dashboard",href:o.vB.root},{name:"V\xedctimas",href:o.vB.general.victims.list},{name:n?"V\xedctima":"Nueva V\xedctima"}]}),(0,_.jsx)(R,{isEdit:n,currentVictim:u})]})})}},21190:function(e,i,n){"use strict";n.d(i,{CH:function(){return o},km:function(){return s},Wl:function(){return d},G4:function(){return c}});var r=n(15861),t=n(64687),l=n.n(t),a=n(59864),o=function(){var e=(0,r.Z)(l().mark((function e(i){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get(i);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)(l().mark((function e(i,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.post(i,n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(i,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(l().mark((function e(i,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.put(i,n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(i,n){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(l().mark((function e(i){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.delete(i);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}()},42480:function(){}}]);