(self.webpackChunk_ijm_relevic=self.webpackChunk_ijm_relevic||[]).push([[6460],{44949:function(e,n,i){"use strict";i.d(n,{kk:function(){return r},lP:function(){return a},TU:function(){return l}});var t=i(97892),o=i.n(t),r={caseId:0,data:"",confidentiality:!1,consent:!1,treatment:!1,security:"[]",legalProtection:"[]",mental:"[]",financial:"[]",social:"[]",physical:"[]",strengths:"",comments:"",userInChargeId:1,completed:!1},a="/attention-protocol",l=[{field:"mainGoal",headerName:"Meta",width:350,editable:!0},{field:"dueDate",headerName:"Fecha Objetiva",type:"date",editable:!0,width:220,valueGetter:function(e){return o()(e.row.dueDate).format("DD/MM/YYYY")}},{field:"goals",headerName:"Objetivos",editable:!0,width:350},{field:"goalsDueDate",headerName:"Fecha Objetiva",type:"date",width:220,editable:!0,valueGetter:function(e){return o()(e.row.goalsDueDate).format("DD/MM/YYYY")}},{field:"status",headerName:"Estado",editable:!0},{field:"providedBy",headerName:"Proporcionado por",width:220,editable:!0},{field:"comments",headerName:"Comentarios",width:320,editable:!0}]},5493:function(e,n,i){"use strict";i.d(n,{UA:function(){return t},NO:function(){return o},wz:function(){return r}});var t="/case",o="/comment",r=["Activos","Inactivos","Cerrados","Todos"]},48671:function(e,n,i){"use strict";i.d(n,{Jn:function(){return t},k:function(){return o},Cc:function(){return r}});var t={caseId:0,participation:"",commitment:0,comments:"",userInChargeId:0,completed:!1,description:""},o=[{label:"No",value:0},{label:"S\xed",value:1},{label:"Inseguro",value:2}],r="/demographic-form"},18786:function(e,n,i){"use strict";i.d(n,{HZ:function(){return t},rz:function(){return o},si:function(){return r},lj:function(){return a}});var t=[{label:"S\xed",value:1},{label:"No",value:2},{label:"Quiere M\xe1s Informaci\xf3n",value:3},{label:"No puede ahora pero quiz\xe1 luego",value:4}],o=[{label:"Mentoreo de IJM",value:1},{label:"Herramienta tic",value:2},{label:"Entrenamiento sobre ESO",value:3},{label:"Convencimiento sobre participaci\xf3n en la red",value:4},{label:"Paquete de gesti\xf3n",value:5},{label:"Canal de Comunicaci\xf3n con CONANI",value:6},{label:"Capacitaci\xf3n sobre trauma",value:7},{label:"Otro",value:8}],r="/provider",a="/branch"},19427:function(e,n,i){"use strict";i.d(n,{GU:function(){return o},gI:function(){return t},q$:function(){return r},SS:function(){return a},wt:function(){return l}});var t,o=function(e){return{caseId:0,violenceType:0,place:"",phase:e,security1:1,security2:1,security3:1,securityNotes:"",legalProtection1:1,legalProtection2:1,legalProtection3:1,legalProtectionNotes:"",mentalWelfare1:1,mentalWelfare2:1,mentalWelfare3:1,mentalWelfare4:1,mentalWelfareNotes:"",financial1:1,financial2:1,financial3:1,financial4:1,financialNotes:"",social1:1,social2:1,social3:1,social4:1,socialNotes:"",physical1:1,physical2:1,physical3:1,physical4:1,physical5:1,physicalNotes:"",total:0,survivorStatus:0,createdAt:"",completedAt:"",userInChargeId:0,completed:!1,provinceId:1,securityTotal:1,legalProtectionTotal:1,mentalWelfareTotal:1,financial:1,social:1,physical:1}};!function(e){e[e.START=0]="START",e[e.END=1]="END",e[e.POST=2]="POST",e[e.OTHER=3]="OTHER"}(t||(t={}));var r="/survivor-evaluation",a=[{label:"Explotaci\xf3n Sexual Comercial",value:0},{label:"Abuso Sexual Infantil",value:1},{label:"Explotaci\xf3n Laboral",value:2},{label:"Violencia Entre Pareja",value:3},{label:"Explotaci\xf3n Sexual en L\xednea",value:4},{label:"Apropiaci\xf3n de Propiedad",value:5},{label:"Abuso de Poder Policial",value:6}],l=[{label:"1 - Muy Vulnerable",value:1},{label:"2 - Vulnerable",value:2},{label:"3 - Estable",value:3},{label:"4 - Muy Estable",value:4}]},5769:function(e,n,i){"use strict";i.d(n,{al:function(){return t},bQ:function(){return o},h8:function(){return r},Wu:function(){return a}});var t="/victim",o=[{label:"Soltera",value:1},{label:"Comprometida",value:2},{label:"Casada",value:3},{label:"Separada",value:4},{label:"Enviudada",value:5},{label:"Vive con Pareja",value:6},{label:"Divorciada",value:7}],r=[{label:"Femenino",value:0},{label:"Masculino",value:1}],a={name:"",otherName:"",age:0,verifiedAge:0,birthday:"",citizenship:"",ethnicity:"",nationality:"",children:0,currentAddress:"",maritalStatus:0,originAddress:"",phoneNumber:"",preferredLanguage:"",id:0,genre:0,email:""}},54737:function(e,n,i){"use strict";i.d(n,{Z:function(){return h}});var t=i(1413),o=i(45987),r=i(68870),a=i(20890),l=i(50533),s=i(43504),c=i(93517),d=i(80184),u=["links","activeLast"];function x(e){var n=e.links,i=e.activeLast,l=void 0!==i&&i,s=(0,o.Z)(e,u),x=n[n.length-1].name,m=n.map((function(e){return(0,d.jsx)(v,{link:e},e.name)})),h=n.map((function(e){return(0,d.jsx)("div",{children:e.name!==x?(0,d.jsx)(v,{link:e}):(0,d.jsx)(a.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:x})},e.name)}));return(0,d.jsx)(c.Z,(0,t.Z)((0,t.Z)({separator:(0,d.jsx)(r.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},s),{},{children:l?m:h}))}function v(e){var n=e.link,i=n.href,t=n.name,o=n.icon;return(0,d.jsxs)(l.Z,{variant:"body2",component:s.rU,to:i||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[o&&(0,d.jsx)(r.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:o}),t]},t)}var m=["links","action","heading","moreLink","sx"];function h(e){var n=e.links,i=e.action,s=e.heading,c=e.moreLink,u=void 0===c?[]:c,v=e.sx,h=(0,o.Z)(e,m);return(0,d.jsxs)(r.Z,{sx:(0,t.Z)({mb:5},v),children:[(0,d.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(r.Z,{sx:{flexGrow:1},children:[(0,d.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:s}),(0,d.jsx)(x,(0,t.Z)({links:n},h))]}),i&&(0,d.jsx)(r.Z,{sx:{flexShrink:0},children:i})]}),(0,d.jsx)(r.Z,{sx:{mt:2},children:"string"===typeof u?(0,d.jsx)(l.Z,{href:u,target:"_blank",rel:"noopener",variant:"body2",children:u}):u.map((function(e){return(0,d.jsx)(l.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},60619:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var t=i(1413),o=i(66934),r=i(12065),a=i(13967),l=i(68870),s=i(80184),c=(0,o.ZP)("span")((function(e){var n=e.theme,i=e.ownerState,o="light"===n.palette.mode,a=i.color,l=i.variant;return(0,t.Z)({height:22,minWidth:22,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:n.spacing(0,1),color:n.palette.grey[800],fontSize:n.typography.pxToRem(12),fontFamily:n.typography.fontFamily,backgroundColor:n.palette.grey[300],fontWeight:n.typography.fontWeightBold},"default"!==a?(0,t.Z)((0,t.Z)((0,t.Z)({},"filled"===l&&(0,t.Z)({},function(e){return{color:n.palette[e].contrastText,backgroundColor:n.palette[e].main}}(a))),"outlined"===l&&(0,t.Z)({},function(e){return{color:n.palette[e].main,backgroundColor:"transparent",border:"1px solid ".concat(n.palette[e].main)}}(a))),"ghost"===l&&(0,t.Z)({},function(e){return{color:n.palette[e][o?"dark":"light"],backgroundColor:(0,r.Fq)(n.palette[e].main,.16)}}(a))):(0,t.Z)((0,t.Z)({},"outlined"===l&&{backgroundColor:"transparent",color:n.palette.text.primary,border:"1px solid ".concat(n.palette.grey[50032])}),"ghost"===l&&{color:o?n.palette.text.secondary:n.palette.common.white,backgroundColor:n.palette.grey[50016]}))}));function d(e){var n=e.children,i=e.color,o=void 0===i?"default":i,r=e.variant,d=void 0===r?"ghost":r,u=e.startIcon,x=e.endIcon,v=e.sx,m=(0,a.Z)(),h={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,s.jsxs)(c,{ownerState:{color:o,variant:d},sx:(0,t.Z)((0,t.Z)((0,t.Z)({},u&&{pl:.75}),x&&{pr:.75}),v),theme:m,children:[u&&(0,s.jsx)(l.Z,{sx:(0,t.Z)({mr:.75},h),children:u}),n,x&&(0,s.jsx)(l.Z,{sx:(0,t.Z)({ml:.75},h),children:x})]})}},71170:function(e,n,i){"use strict";i.d(n,{$W:function(){return g},K:function(){return S},V7:function(){return E},et:function(){return h},Nl:function(){return N}});var t=i(35855),o=i(53994),r=i(1413),a=i(45987),l=i(66934),s=i(68870),c=i(20890),d=i(4010),u=i(80184),x=["title","description","img"],v=(0,l.ZP)(s.Z)((function(e){return{height:"100%",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:e.theme.spacing(8,2)}}));function m(e){var n=e.title,i=e.description,t=e.img,o=(0,a.Z)(e,x);return(0,u.jsxs)(v,(0,r.Z)((0,r.Z)({},o),{},{children:[(0,u.jsx)(d.Z,{disabledEffect:!0,visibleByDefault:!0,alt:"empty content",src:t||"/assets/illustrations/illustration_empty_content.svg",sx:{height:240,mb:3}}),(0,u.jsx)(c.Z,{variant:"h5",gutterBottom:!0,children:n}),i&&(0,u.jsx)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:i})]}))}function h(e){var n=e.isNotFound;return(0,u.jsx)(t.Z,{children:n?(0,u.jsx)(o.Z,{colSpan:12,children:(0,u.jsx)(m,{title:"No se encontraron resultados",sx:{"& span.MuiBox-root":{height:160}}})}):(0,u.jsx)(o.Z,{colSpan:12,sx:{p:0}})})}var f=i(13400),p=i(46865),j=i(82097);function E(e){var n=e.actions,i=e.open,t=e.onClose,o=e.onOpen;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f.Z,{onClick:o,children:(0,u.jsx)(p.Z,{icon:"eva:more-vertical-fill",width:20,height:20})}),(0,u.jsx)(j.Z,{open:Boolean(i),anchorEl:i,onClose:t,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},arrow:"right-top",sx:{mt:-1,width:260,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75,"& svg":{mr:2,width:20,height:20}}},children:n})]})}function g(e){var n=e.emptyRows,i=e.height;return n?(0,u.jsx)(t.Z,{sx:(0,r.Z)({},i&&{height:i*n}),children:(0,u.jsx)(o.Z,{colSpan:9})}):null}var Z=i(56890),b=i(94454),I=i(80720),C={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function S(e){var n=e.order,i=e.orderBy,a=e.rowCount,l=void 0===a?0:a,c=e.headLabel,d=e.numSelected,x=void 0===d?0:d,v=e.onSort,m=e.onSelectAllRows,h=e.sx;return(0,u.jsx)(Z.Z,{sx:h,children:(0,u.jsxs)(t.Z,{children:[m&&(0,u.jsx)(o.Z,{padding:"checkbox",children:(0,u.jsx)(b.Z,{indeterminate:x>0&&x<l,checked:l>0&&x===l,onChange:function(e){return m(e.target.checked)}})}),c.map((function(e){return(0,u.jsx)(o.Z,{align:e.align||"left",sortDirection:i===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},children:v?(0,u.jsxs)(I.Z,{hideSortIcon:!0,active:i===e.id,direction:i===e.id?n:"asc",onClick:function(){return v(e.id)},sx:{textTransform:"capitalize"},children:[e.label,i===e.id?(0,u.jsx)(s.Z,{sx:(0,r.Z)({},C),children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):e.label},e.id)}))]})})}var y=i(67414),A=["dense","actions","rowCount","numSelected","onSelectAllRows","sx"];function N(e){var n=e.dense,i=e.actions,t=e.rowCount,o=e.numSelected,l=e.onSelectAllRows,s=e.sx,d=(0,a.Z)(e,A);return(0,u.jsxs)(y.Z,(0,r.Z)((0,r.Z)({direction:"row",alignItems:"center",sx:(0,r.Z)((0,r.Z)({px:2,top:0,left:8,right:8,zIndex:9,height:58,borderRadius:1,position:"absolute",bgcolor:"primary.lighter"},n&&{pl:1,height:38}),s)},d),{},{children:[(0,u.jsx)(b.Z,{indeterminate:o>0&&o<t,checked:t>0&&o===t,onChange:function(e){return l(e.target.checked)}}),(0,u.jsxs)(c.Z,{variant:"subtitle1",sx:(0,r.Z)({ml:2,flexGrow:1,color:"primary.main"},n&&{ml:3}),children:[o," seleccionado"]}),i&&i]}))}},77762:function(e,n,i){"use strict";i.d(n,{ZP:function(){return r},sQ:function(){return l},fQ:function(){return s}});var t=i(29439),o=i(72791);function r(e){var n=(0,o.useState)((null===e||void 0===e?void 0:e.defaultDense)||!1),i=(0,t.Z)(n,2),r=i[0],a=i[1],l=(0,o.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),s=(0,t.Z)(l,2),c=s[0],d=s[1],u=(0,o.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),x=(0,t.Z)(u,2),v=x[0],m=x[1],h=(0,o.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),f=(0,t.Z)(h,2),p=f[0],j=f[1],E=(0,o.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),g=(0,t.Z)(E,2),Z=g[0],b=g[1],I=(0,o.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),C=(0,t.Z)(I,2),S=C[0],y=C[1];return{dense:r,order:v,page:p,setPage:j,orderBy:c,rowsPerPage:Z,selected:S,setSelected:y,onSelectRow:function(e){var n=S.indexOf(e),i=[];-1===n?i=i.concat(S,e):0===n?i=i.concat(S.slice(1)):n===S.length-1?i=i.concat(S.slice(0,-1)):n>0&&(i=i.concat(S.slice(0,n),S.slice(n+1))),y(i)},onSelectAllRows:function(e,n){y(e?n:[])},onSort:function(e){""!==e&&(m(c===e&&"asc"===v?"desc":"asc"),d(e))},onChangePage:function(e,n){j(n)},onChangeDense:function(e){a(e.target.checked)},onChangeRowsPerPage:function(e){b(parseInt(e.target.value,10)),j(0)}}}function a(e,n,i){return n[i]<e[i]?-1:n[i]>e[i]?1:0}function l(e,n){return"desc"===e?function(e,i){return a(e,i,n)}:function(e,i){return-a(e,i,n)}}function s(e,n,i){return e>0?Math.max(0,(1+e)*n-i):0}},23744:function(e,n,i){"use strict";i.d(n,{Z:function(){return r}});var t=i(29439),o=i(72791);function r(e){var n=(0,o.useState)(e||""),i=(0,t.Z)(n,2),r=i[0],a=i[1];return{currentTab:r,onChangeTab:function(e,n){a(n)},setCurrentTab:a}}},95307:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return cn}});var t=i(16871),o=i(10266),r=i(58561),a=i(53451),l=i(7055),s=i(54737),c=i(72419),d=i(15861),u=i(29439),x=i(1413),v=i(64687),m=i.n(v),h=i(61265),f=i(39709),p=i(66934),j=i(20890),E=i(2101),g=i(43896),Z=i(61889),b=i(57621),I=i(48550),C=i(94721),S=i(68870),y=i(67414),A=i(98246),N=i(72791),w=i(61134),R=i(44949),O=i(48671),D=i(18786),T=i(19427),P=i(5769),M=i(91448),k=i(46865),V=i(23744),L=i(25334),G=i(76863),F=i(93433),B=i(5493),U=i(44371),W=i(97892),Y=i.n(W),z=i(80184);var q=function(e){var n=e.currentCase,i=(0,N.useState)(""),t=(0,u.Z)(i,2),o=t[0],r=t[1],a=(0,U.Z)().user,l=(0,c.kY)().mutate,s=function(){var e=(0,d.Z)(m().mark((function e(i){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),a){e.next=3;break}return e.abrupt("return");case 3:return r(""),e.next=6,(0,L.km)(B.NO,{text:o,caseId:n.id,userId:a.id});case 6:t=e.sent,l("".concat(B.UA,"/").concat(n.id),(0,x.Z)((0,x.Z)({},n),{},{comments:[].concat((0,F.Z)(n.comments),[t])}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:[!n.comments.length&&(0,z.jsx)(j.Z,{variant:"body1",noWrap:!0,sx:{mt:6,alignSelf:"center"},children:"A\xfan no hay comentarios"}),n.comments.map((function(e){var n;return(0,z.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex",mt:2,width:"calc(100% - 20%)",alignSelf:e.user.id===(null===a||void 0===a?void 0:a.id)?"flex-end":"flex-start"},children:[(0,z.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,z.jsx)(j.Z,{variant:"caption",noWrap:!0,children:null===(n=e.user)||void 0===n?void 0:n.name}),(0,z.jsx)(j.Z,{variant:"caption",noWrap:!0,children:Y()(e.createdAt).format("DD/MM/YYYY HH:mm")})]}),(0,z.jsx)(j.Z,{variant:"body1",children:e.text})]},e.id)})),(0,z.jsx)(C.Z,{sx:{mb:4,mt:4}}),(0,z.jsx)("form",{onSubmit:s,children:(0,z.jsx)(I.Z,{fullWidth:!0,value:o,onChange:function(e){return r(e.target.value)},placeholder:"Escribe un comentario..."})})]})},H=i(5574),_=i(65661),J=i(39157),X=i(97123),Q=i(36151),$=i(4942),K=i(5936),ee=i(34265),ne=i(5097),ie=i(94515),te=i(25122),oe=i(5003);function re(e){var n=e.setRows,i=e.setRowModesModel;return(0,z.jsx)(ee.D,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",width:"100%"},children:[(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,z.jsx)(j.Z,{variant:"h5",children:"Empoderamiento Econ\xf3mico y Educaci\xf3n"}),(0,z.jsx)(j.Z,{variant:"body2",children:"Apoyo financiero y oportunidades econ\xf3micos/educacional"})]}),(0,z.jsx)(Q.Z,{color:"primary",startIcon:(0,z.jsx)(ne.Fd,{}),onClick:function(){var e=(0,oe.kb)();n((function(n){return[].concat((0,F.Z)(n),[{id:e,mainGoal:"",dueDate:"",goals:"",goalsDueDate:"",status:"",providedBy:"",comments:"",isNew:!0}])})),i((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,$.Z)({},e,{mode:K.se.Edit,fieldToFocus:"mainGoal"}))}))},children:"Agregar Registro"})]})})}function ae(e){var n=e.onGridChange,i=e.values,t=(0,N.useState)(JSON.parse(i)),o=(0,u.Z)(t,2),r=o[0],a=o[1],l=(0,N.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],v=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.Edit})))}},m=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View})))}},h=function(e){return function(){a(r.filter((function(n){return n.id!==e})))}},f=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View,ignoreModifications:!0}))),r.find((function(n){return n.id===e})).isNew&&a(r.filter((function(n){return n.id!==e})))}},p=[].concat((0,F.Z)(R.TU),[{field:"actions",type:"actions",headerName:"Acciones",width:100,cellClassName:"actions",getActions:function(e){var n,i=e.id;return(null===(n=c[i])||void 0===n?void 0:n.mode)===K.se.Edit?[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:save",width:24,height:24}),label:"Guardar",onClick:m(i)},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:close-one",width:24,height:24}),label:"Cancelar",className:"textPrimary",onClick:f(i),color:"inherit"},i)]:[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:edit",width:24,height:24}),label:"Editar",className:"textPrimary",onClick:v(i),color:"inherit"},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:delete",width:24,height:24}),label:"Eliminar",onClick:h(i),color:"inherit"},i)]}}]);return(0,N.useEffect)((function(){n("financial",JSON.stringify(r))}),[r,n]),(0,z.jsx)(S.Z,{sx:{height:300,width:"100%",display:"flex",flexDirection:"column",gap:2},children:(0,z.jsx)(te._,{rows:r,columns:p,editMode:"row",rowModesModel:c,onRowModesModelChange:function(e){return d(e)},onRowEditStart:function(e,n){n.defaultMuiPrevented=!0},onRowEditStop:function(e,n){n.defaultMuiPrevented=!0},processRowUpdate:function(e){var n=(0,x.Z)((0,x.Z)({},e),{},{isNew:!1});return a(r.map((function(i){return i.id===e.id?n:i}))),n},components:{Toolbar:re},componentsProps:{toolbar:{setRows:a,setRowModesModel:d}},experimentalFeatures:{newEditingApi:!0},hideFooter:!0})})}function le(e){var n=e.setRows,i=e.setRowModesModel;return(0,z.jsx)(ee.D,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",width:"100%"},children:[(0,z.jsx)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,z.jsx)(j.Z,{variant:"h5",children:"Apoyo/Protecci\xf3n Legal"})}),(0,z.jsx)(Q.Z,{color:"primary",startIcon:(0,z.jsx)(ne.Fd,{}),onClick:function(){var e=(0,oe.kb)();n((function(n){return[].concat((0,F.Z)(n),[{id:e,mainGoal:"",dueDate:"",goals:"",goalsDueDate:"",status:"",providedBy:"",comments:"",isNew:!0}])})),i((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,$.Z)({},e,{mode:K.se.Edit,fieldToFocus:"mainGoal"}))}))},children:"Agregar Registro"})]})})}function se(e){var n=e.onGridChange,i=e.values,t=(0,N.useState)(JSON.parse(i)),o=(0,u.Z)(t,2),r=o[0],a=o[1],l=(0,N.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],v=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.Edit})))}},m=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View})))}},h=function(e){return function(){a(r.filter((function(n){return n.id!==e})))}},f=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View,ignoreModifications:!0}))),r.find((function(n){return n.id===e})).isNew&&a(r.filter((function(n){return n.id!==e})))}},p=[].concat((0,F.Z)(R.TU),[{field:"actions",type:"actions",headerName:"Acciones",width:100,cellClassName:"actions",getActions:function(e){var n,i=e.id;return(null===(n=c[i])||void 0===n?void 0:n.mode)===K.se.Edit?[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:save",width:24,height:24}),label:"Guardar",onClick:m(i)},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:close-one",width:24,height:24}),label:"Cancelar",className:"textPrimary",onClick:f(i),color:"inherit"},i)]:[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:edit",width:24,height:24}),label:"Editar",className:"textPrimary",onClick:v(i),color:"inherit"},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:delete",width:24,height:24}),label:"Eliminar",onClick:h(i),color:"inherit"},i)]}}]);return(0,N.useEffect)((function(){n("legalProtection",JSON.stringify(r))}),[r,n]),(0,z.jsx)(S.Z,{sx:{height:300,width:"100%",display:"flex",flexDirection:"column",gap:2},children:(0,z.jsx)(te._,{rows:r,columns:p,editMode:"row",rowModesModel:c,onRowModesModelChange:function(e){return d(e)},onRowEditStart:function(e,n){n.defaultMuiPrevented=!0},onRowEditStop:function(e,n){n.defaultMuiPrevented=!0},processRowUpdate:function(e){var n=(0,x.Z)((0,x.Z)({},e),{},{isNew:!1});return a(r.map((function(i){return i.id===e.id?n:i}))),n},components:{Toolbar:le},componentsProps:{toolbar:{setRows:a,setRowModesModel:d}},experimentalFeatures:{newEditingApi:!0},hideFooter:!0})})}function ce(e){var n=e.setRows,i=e.setRowModesModel;return(0,z.jsx)(ee.D,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",width:"100%"},children:[(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,z.jsx)(j.Z,{variant:"h5",children:"Bienestar Mental"}),(0,z.jsx)(j.Z,{variant:"body2",children:"Incidencia baja/frecuencia de las s\xedntomas del trauma, afrontamiento positivo, y relaciones saludables"})]}),(0,z.jsx)(Q.Z,{color:"primary",startIcon:(0,z.jsx)(ne.Fd,{}),onClick:function(){var e=(0,oe.kb)();n((function(n){return[].concat((0,F.Z)(n),[{id:e,mainGoal:"",dueDate:"",goals:"",goalsDueDate:"",status:"",providedBy:"",comments:"",isNew:!0}])})),i((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,$.Z)({},e,{mode:K.se.Edit,fieldToFocus:"mainGoal"}))}))},children:"Agregar Registro"})]})})}function de(e){var n=e.onGridChange,i=e.values,t=(0,N.useState)(JSON.parse(i)),o=(0,u.Z)(t,2),r=o[0],a=o[1],l=(0,N.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],v=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.Edit})))}},m=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View})))}},h=function(e){return function(){a(r.filter((function(n){return n.id!==e})))}},f=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View,ignoreModifications:!0}))),r.find((function(n){return n.id===e})).isNew&&a(r.filter((function(n){return n.id!==e})))}},p=[].concat((0,F.Z)(R.TU),[{field:"actions",type:"actions",headerName:"Acciones",width:100,cellClassName:"actions",getActions:function(e){var n,i=e.id;return(null===(n=c[i])||void 0===n?void 0:n.mode)===K.se.Edit?[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:save",width:24,height:24}),label:"Guardar",onClick:m(i)},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:close-one",width:24,height:24}),label:"Cancelar",className:"textPrimary",onClick:f(i),color:"inherit"},i)]:[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:edit",width:24,height:24}),label:"Editar",className:"textPrimary",onClick:v(i),color:"inherit"},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:delete",width:24,height:24}),label:"Eliminar",onClick:h(i),color:"inherit"},i)]}}]);return(0,N.useEffect)((function(){n("mental",JSON.stringify(r))}),[r,n]),(0,z.jsx)(S.Z,{sx:{height:300,width:"100%",display:"flex",flexDirection:"column",gap:2},children:(0,z.jsx)(te._,{rows:r,columns:p,editMode:"row",rowModesModel:c,onRowModesModelChange:function(e){return d(e)},onRowEditStart:function(e,n){n.defaultMuiPrevented=!0},onRowEditStop:function(e,n){n.defaultMuiPrevented=!0},processRowUpdate:function(e){var n=(0,x.Z)((0,x.Z)({},e),{},{isNew:!1});return a(r.map((function(i){return i.id===e.id?n:i}))),n},components:{Toolbar:ce},componentsProps:{toolbar:{setRows:a,setRowModesModel:d}},experimentalFeatures:{newEditingApi:!0},hideFooter:!0})})}function ue(e){var n=e.setRows,i=e.setRowModesModel;return(0,z.jsx)(ee.D,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",width:"100%"},children:[(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,z.jsx)(j.Z,{variant:"h5",children:"Salud (Bienestar F\xedsico)"}),(0,z.jsx)(j.Z,{variant:"body2",children:"Acceso a la atenci\xf3n m\xe9dica y motivaci\xf3n del cuidado de la salud personal"})]}),(0,z.jsx)(Q.Z,{color:"primary",startIcon:(0,z.jsx)(ne.Fd,{}),onClick:function(){var e=(0,oe.kb)();n((function(n){return[].concat((0,F.Z)(n),[{id:e,mainGoal:"",dueDate:"",goals:"",goalsDueDate:"",status:"",providedBy:"",comments:"",isNew:!0}])})),i((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,$.Z)({},e,{mode:K.se.Edit,fieldToFocus:"mainGoal"}))}))},children:"Agregar Registro"})]})})}function xe(e){var n=e.onGridChange,i=e.values,t=(0,N.useState)(JSON.parse(i)),o=(0,u.Z)(t,2),r=o[0],a=o[1],l=(0,N.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],v=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.Edit})))}},m=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View})))}},h=function(e){return function(){a(r.filter((function(n){return n.id!==e})))}},f=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View,ignoreModifications:!0}))),r.find((function(n){return n.id===e})).isNew&&a(r.filter((function(n){return n.id!==e})))}},p=[].concat((0,F.Z)(R.TU),[{field:"actions",type:"actions",headerName:"Acciones",width:100,cellClassName:"actions",getActions:function(e){var n,i=e.id;return(null===(n=c[i])||void 0===n?void 0:n.mode)===K.se.Edit?[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:save",width:24,height:24}),label:"Guardar",onClick:m(i)},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:close-one",width:24,height:24}),label:"Cancelar",className:"textPrimary",onClick:f(i),color:"inherit"},i)]:[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:edit",width:24,height:24}),label:"Editar",className:"textPrimary",onClick:v(i),color:"inherit"},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:delete",width:24,height:24}),label:"Eliminar",onClick:h(i),color:"inherit"},i)]}}]);return(0,N.useEffect)((function(){n("physical",JSON.stringify(r.filter((function(e){return!e.isNew}))))}),[r,n]),(0,z.jsx)(S.Z,{sx:{height:300,width:"100%",display:"flex",flexDirection:"column",gap:2},children:(0,z.jsx)(te._,{rows:r,columns:p,editMode:"row",rowModesModel:c,onRowModesModelChange:function(e){return d(e)},onRowEditStart:function(e,n){n.defaultMuiPrevented=!0},onRowEditStop:function(e,n){n.defaultMuiPrevented=!0},processRowUpdate:function(e){var n=(0,x.Z)((0,x.Z)({},e),{},{isNew:!1});return a(r.map((function(i){return i.id===e.id?n:i}))),n},components:{Toolbar:ue},componentsProps:{toolbar:{setRows:a,setRowModesModel:d}},experimentalFeatures:{newEditingApi:!0},hideFooter:!0})})}function ve(e){var n=e.setRows,i=e.setRowModesModel;return(0,z.jsx)(ee.D,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",width:"100%"},children:[(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,z.jsx)(j.Z,{variant:"h5",children:"Seguridad"}),(0,z.jsx)(j.Z,{variant:"body2",children:"La libertad del abuso y seguridad personal"})]}),(0,z.jsx)(Q.Z,{color:"primary",startIcon:(0,z.jsx)(ne.Fd,{}),onClick:function(){var e=(0,oe.kb)();n((function(n){return[].concat((0,F.Z)(n),[{id:e,mainGoal:"",dueDate:"",goals:"",goalsDueDate:"",status:"",providedBy:"",comments:"",isNew:!0}])})),i((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,$.Z)({},e,{mode:K.se.Edit,fieldToFocus:"mainGoal"}))}))},children:"Agregar Registro"})]})})}function me(e){var n=e.onGridChange,i=e.values,t=(0,N.useState)(JSON.parse(i)),o=(0,u.Z)(t,2),r=o[0],a=o[1],l=(0,N.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],v=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.Edit})))}},m=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View})))}},h=function(e){return function(){a(r.filter((function(n){return n.id!==e})))}},f=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View,ignoreModifications:!0}))),r.find((function(n){return n.id===e})).isNew&&a(r.filter((function(n){return n.id!==e})))}},p=[].concat((0,F.Z)(R.TU),[{field:"actions",type:"actions",headerName:"Acciones",width:100,cellClassName:"actions",getActions:function(e){var n,i=e.id;return(null===(n=c[i])||void 0===n?void 0:n.mode)===K.se.Edit?[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:save",width:24,height:24}),label:"Guardar",onClick:m(i)},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:close-one",width:24,height:24}),label:"Cancelar",className:"textPrimary",onClick:f(i),color:"inherit"},i)]:[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:edit",width:24,height:24}),label:"Editar",className:"textPrimary",onClick:v(i),color:"inherit"},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:delete",width:24,height:24}),label:"Eliminar",onClick:h(i),color:"inherit"},i)]}}]);return(0,N.useEffect)((function(){n("security",JSON.stringify(r))}),[r,n]),(0,z.jsx)(S.Z,{sx:{height:300,width:"100%",display:"flex",flexDirection:"column",gap:2},children:(0,z.jsx)(te._,{rows:r,columns:p,editMode:"row",rowModesModel:c,onRowModesModelChange:function(e){return d(e)},onRowEditStart:function(e,n){n.defaultMuiPrevented=!0},onRowEditStop:function(e,n){n.defaultMuiPrevented=!0},processRowUpdate:function(e){var n=(0,x.Z)((0,x.Z)({},e),{},{isNew:!1});return a(r.map((function(i){return i.id===e.id?n:i}))),n},components:{Toolbar:ve},componentsProps:{toolbar:{setRows:a,setRowModesModel:d}},experimentalFeatures:{newEditingApi:!0},hideFooter:!0})})}function he(e){var n=e.setRows,i=e.setRowModesModel;return(0,z.jsx)(ee.D,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",width:"100%"},children:[(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,z.jsx)(j.Z,{variant:"h5",children:"Apoyo Social"}),(0,z.jsx)(j.Z,{variant:"body2",children:"Sentido de conexi\xf3n/pertenencia y acceso a ayuda"})]}),(0,z.jsx)(Q.Z,{color:"primary",startIcon:(0,z.jsx)(ne.Fd,{}),onClick:function(){var e=(0,oe.kb)();n((function(n){return[].concat((0,F.Z)(n),[{id:e,mainGoal:"",dueDate:"",goals:"",goalsDueDate:"",status:"",providedBy:"",comments:"",isNew:!0}])})),i((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,$.Z)({},e,{mode:K.se.Edit,fieldToFocus:"mainGoal"}))}))},children:"Agregar Registro"})]})})}function fe(e){var n=e.onGridChange,i=e.values,t=(0,N.useState)(JSON.parse(i)),o=(0,u.Z)(t,2),r=o[0],a=o[1],l=(0,N.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],v=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.Edit})))}},m=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View})))}},h=function(e){return function(){a(r.filter((function(n){return n.id!==e})))}},f=function(e){return function(){d((0,x.Z)((0,x.Z)({},c),{},(0,$.Z)({},e,{mode:K.se.View,ignoreModifications:!0}))),r.find((function(n){return n.id===e})).isNew&&a(r.filter((function(n){return n.id!==e})))}},p=[].concat((0,F.Z)(R.TU),[{field:"actions",type:"actions",headerName:"Acciones",width:100,cellClassName:"actions",getActions:function(e){var n,i=e.id;return(null===(n=c[i])||void 0===n?void 0:n.mode)===K.se.Edit?[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:save",width:24,height:24}),label:"Guardar",onClick:m(i)},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:close-one",width:24,height:24}),label:"Cancelar",className:"textPrimary",onClick:f(i),color:"inherit"},i)]:[(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:edit",width:24,height:24}),label:"Editar",className:"textPrimary",onClick:v(i),color:"inherit"},i),(0,z.jsx)(ie.u,{icon:(0,z.jsx)(k.Z,{icon:"icon-park-twotone:delete",width:24,height:24}),label:"Eliminar",onClick:h(i),color:"inherit"},i)]}}]);return(0,N.useEffect)((function(){n("social",JSON.stringify(r))}),[r,n]),(0,z.jsx)(S.Z,{sx:{height:300,width:"100%",display:"flex",flexDirection:"column",gap:2},children:(0,z.jsx)(te._,{rows:r,columns:p,editMode:"row",rowModesModel:c,onRowModesModelChange:function(e){return d(e)},onRowEditStart:function(e,n){n.defaultMuiPrevented=!0},onRowEditStop:function(e,n){n.defaultMuiPrevented=!0},processRowUpdate:function(e){var n=(0,x.Z)((0,x.Z)({},e),{},{isNew:!1});return a(r.map((function(i){return i.id===e.id?n:i}))),n},components:{Toolbar:he},componentsProps:{toolbar:{setRows:a,setRowModesModel:d}},experimentalFeatures:{newEditingApi:!0},hideFooter:!0})})}(0,p.ZP)(j.Z)((function(e){var n=e.theme;return(0,x.Z)((0,x.Z)({},n.typography.subtitle2),{},{color:n.palette.text.secondary,marginBottom:n.spacing(1)})}));var pe=function(e){var n=e.open,i=e.handleClose,t=e.currentAttentionProtocol,o=e.currentCase,r=e.disabled,a=void 0!==r&&r,l=(0,A.Ds)().enqueueSnackbar,s=(0,c.kY)().mutate,u=G.Ry().shape({confidentiality:G.O7(),consent:G.O7(),treatment:G.O7()}),v=(0,N.useMemo)((function(){var e,n,i,r,a;return{caseId:o.id,data:t.data,confidentiality:null!==(e=t.confidentiality)&&void 0!==e&&e,consent:null!==(n=t.consent)&&void 0!==n&&n,treatment:null!==(i=t.treatment)&&void 0!==i&&i,security:t.security,legalProtection:t.legalProtection,mental:t.mental,financial:t.financial,social:t.social,physical:t.physical,strengths:t.strengths,comments:t.comments,userInChargeId:null===(r=t.userInCharge)||void 0===r?void 0:r.id,completed:null!==(a=t.completed)&&void 0!==a&&a}}),[t]),p=(0,w.cI)({resolver:(0,h.X)(u),defaultValues:v}),j=p.reset,E=p.handleSubmit,g=p.setValue,Z=p.formState.isSubmitting;(0,N.useEffect)((function(){j(v)}),[]);var b=function(){var e=(0,d.Z)(m().mark((function e(n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Wl)("".concat(R.lP,"/").concat(t.id),n);case 3:r=e.sent,s("".concat(B.UA,"/").concat(o.id),(0,x.Z)((0,x.Z)({},o),{},{attentionProtocol:(0,x.Z)((0,x.Z)({},t),r)})),l("Protocolo de atenci\xf3n guardado."),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l("Ocurri\xf3 un error al guardar los datos, int\xe9ntalo de nuevo",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),C=function(e,n){g(e,n)};return(0,z.jsx)(H.Z,{open:n,onClose:i,maxWidth:"xl",fullWidth:!0,children:(0,z.jsx)(w.RV,(0,x.Z)((0,x.Z)({},p),{},{children:(0,z.jsxs)("form",{onSubmit:E(b),children:[(0,z.jsx)(_.Z,{children:"Protocolo de Atenci\xf3n"}),(0,z.jsx)(J.Z,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:3,mt:3},children:[(0,z.jsxs)(S.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},mt:3},children:[(0,z.jsx)(I.Z,{disabled:!0,label:"Nombre del sobreviviente",value:o.victim.name}),(0,z.jsx)(I.Z,{disabled:!0,label:"N\xfamero de Caso",value:o.id}),(0,z.jsx)(I.Z,{disabled:!0,label:"Fecha de Nacimiento",value:o.victim.birthday}),(0,z.jsx)(I.Z,{disabled:!0,label:"Trabajador de Caso",value:o.attentionProtocol.userInCharge.name}),(0,z.jsx)(M.jb,{name:"treatment",label:"\xbfEst\xe1 siguiendo la participante un plan de tratamiento?"}),(0,z.jsx)(M.jb,{name:"consent",label:"Obtener Consentimiento Informado"}),(0,z.jsx)(M.jb,{name:"confidentiality",label:"Discutir Confidencialidad"})]}),(0,z.jsx)(M.au,{name:"comments",label:"Comentarios",multiline:!0,rows:3}),(0,z.jsx)(me,{values:t.security,onGridChange:C}),(0,z.jsx)(se,{values:t.legalProtection,onGridChange:C}),(0,z.jsx)(de,{values:t.mental,onGridChange:C}),(0,z.jsx)(ae,{values:t.financial,onGridChange:C}),(0,z.jsx)(fe,{values:t.social,onGridChange:C}),(0,z.jsx)(xe,{values:t.physical,onGridChange:C}),(0,z.jsx)(M.jb,{name:"completed",label:"Marcar como completado",sx:{mt:3}})]})}),(0,z.jsxs)(X.Z,{children:[(0,z.jsx)(Q.Z,{onClick:function(){j(v),i()},children:"Cancelar"}),(0,z.jsx)(f.Z,{type:"submit",variant:"contained",loading:Z,disabled:a,children:"Guardar Cambios"})]})]})}))})},je=i(51691),Ee=(0,p.ZP)(j.Z)((function(e){var n=e.theme;return(0,x.Z)((0,x.Z)({},n.typography.subtitle2),{},{color:n.palette.text.secondary,marginBottom:n.spacing(1)})}));var ge=function(e){var n=e.open,i=e.handleClose,t=e.currentDemographicForm,o=e.currentCase,r=e.disabled,a=void 0!==r&&r,l=(0,A.Ds)().enqueueSnackbar,s=(0,c.kY)().mutate,u=G.Ry().shape({description:G.Z_().required("Campo obligatorio"),commitment:G.Rx(),participation:G.Z_().required("Campo obligatorio")}),v=(0,N.useMemo)((function(){var e,n,i;return{caseId:o.id,participation:t.participation,commitment:t.commitment,comments:t.comments,userInChargeId:null!==(e=null===(n=t.userInCharge)||void 0===n?void 0:n.id)&&void 0!==e?e:0,completed:null!==(i=t.completed)&&void 0!==i&&i,description:t.description}}),[t]),p=(0,w.cI)({resolver:(0,h.X)(u),defaultValues:v}),j=p.reset,E=p.handleSubmit,g=p.formState.isSubmitting;(0,N.useEffect)((function(){j(v)}),[]);var Z=function(){var e=(0,d.Z)(m().mark((function e(n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Wl)("".concat(O.Cc,"/").concat(t.id),n);case 3:r=e.sent,s("".concat(B.UA,"/").concat(o.id),(0,x.Z)((0,x.Z)({},o),{},{demographicForm:r})),l("Formulario demogr\xe1fico guardado."),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l("Ocurri\xf3 un error al guardar los datos, int\xe9ntalo de nuevo",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,z.jsx)(H.Z,{open:n,onClose:i,children:(0,z.jsx)(w.RV,(0,x.Z)((0,x.Z)({},p),{},{children:(0,z.jsxs)("form",{onSubmit:E(Z),children:[(0,z.jsx)(_.Z,{children:"Formulario Demogr\xe1fico"}),(0,z.jsxs)(J.Z,{children:[(0,z.jsx)(je.Z,{children:"Llene los datos que se solicitan a continuaci\xf3n, para editar los datos de la v\xedctima, por favor editarlos en la secci\xf3n de v\xedctimas."}),(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:3,mt:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ee,{children:"Participante se compromete en el caso legal:"}),(0,z.jsx)(M.km,{name:"commitment",options:O.k,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"participation",label:"Participaci\xf3n Interinstitucional (ONGs, Oficiales gubernamentales, hogares, etc.)",multiline:!0}),(0,z.jsx)(M.au,{name:"comments",label:"Comentarios",multiline:!0}),(0,z.jsx)(M.au,{name:"description",label:"PROBLEMA PRESENTADO Por favor d\xe9 una breve descripci\xf3n del motivo de la remisi\xf3n del caso",multiline:!0,rows:6})]}),(0,z.jsx)(M.jb,{name:"completed",label:"Marcar como completado",sx:{mt:3}})]}),(0,z.jsxs)(X.Z,{children:[(0,z.jsx)(Q.Z,{onClick:i,children:"Cancelar"}),(0,z.jsx)(f.Z,{type:"submit",variant:"contained",loading:g,disabled:a,children:"Guardar Cambios"})]})]})}))})},Ze=i(89673),be=i(55818),Ie=i(3721),Ce=i(50533),Se=i(94016);Se.Zx.register({family:"Circular",src:"/fonts/CircularStd-Book.otf"}),Se.Zx.register({family:"Circular-Bold",src:"/fonts/CircularStd-Bold.otf"});var ye=Se.mM.create({page:{paddingVertical:30,paddingHorizontal:48},section:{marginVertical:30},logo:{width:200,marginBottom:14},headerLabel:{fontSize:12,fontFamily:"Circular-Bold"},title:{fontSize:16,fontFamily:"Circular-Bold"},label:{fontSize:9,letterSpacing:.75,textTransform:"uppercase",marginBottom:4,fontFamily:"Circular-Bold",color:"#646464"},sectionTitle:{fontSize:14,textTransform:"uppercase",marginBottom:10,fontFamily:"Circular-Bold"},text:{fontSize:12,fontFamily:"Circular"},info:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",marginBottom:16},divider:{width:"100%",height:1,backgroundColor:"#F2F2F2"},row:{display:"flex",flexDirection:"row"},column:{flex:1,display:"flex",flexDirection:"column"}}),Ae=function(e){var n,i,t,o=e.currentCase,r=e.currentSurvivorEvaluation,a=function(e){switch(e){case 1:return"Muy Vulnerable";case 2:return"Vulnerable";case 3:return"Estable";default:return"Muy Estable"}};return(0,z.jsx)(Se.BB,{children:(0,z.jsxs)(Se.T3,{size:"A4",style:ye.page,children:[(0,z.jsxs)(Se.G7,{style:[ye.section],children:[(0,z.jsx)(Se.Ee,{source:"/assets/logo-pgr-azul.png",style:ye.logo}),(0,z.jsx)(Se.xv,{style:ye.title,children:"M\xf3dulo de Servicios a la V\xedctima"}),(0,z.jsxs)(Se.xv,{style:ye.headerLabel,children:["Evaluaci\xf3n de Sobreviviente - ",function(e){switch(e){case T.gI.START:return"Inicio del caso";case T.gI.END:return"Cierre del caso";case T.gI.POST:return"Un a\xf1o despu\xe9s del cierre";default:return""}}(r.phase)]}),(0,z.jsxs)(Se.xv,{style:ye.headerLabel,children:["Caso ",o.code]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsx)(Se.G7,{style:ye.section,children:(0,z.jsxs)(Se.G7,{style:ye.row,children:[(0,z.jsxs)(Se.G7,{style:[ye.column,{marginRight:10}],children:[(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Nombre de la v\xedctima:"}),(0,z.jsx)(Se.xv,{style:ye.text,children:null!==(n=null===(i=o.victim)||void 0===i?void 0:i.name)&&void 0!==n?n:"--"})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Tipo de Violencia"}),(0,z.jsx)(Se.xv,{style:ye.text,children:null===(t=T.SS.find((function(e){return e.value===r.violenceType})))||void 0===t?void 0:t.label})]})]}),(0,z.jsx)(Se.G7,{style:[ye.column],children:(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Lugar donde se est\xe1 realizando la evaluaci\xf3n:"}),(0,z.jsx)(Se.xv,{style:ye.text,children:r.place.trim()?r.place:"--"})]})})]})}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsxs)(Se.G7,{style:ye.section,children:[(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["Dominio de Seguridad - ",r.securityTotal," puntos"]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"1. EL SOBREVIVIENTE YA NO EXPERIMENTA ABUSO NI NEGLIGENCIA."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.security1)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"2. EL SOBREVIVIENTE YA NO EXPERIMENTA AMENAZAS DE PARTE DE PERSONAS SOSPECHOSAS U OTROS QUE INTENTEN RE-VICTIMIZAR."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.security2)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"3. EL SOBREVIVIENTE ES CAPAZ DE IDENTIFICAR Y MANEJAR LAS SITUACIONES DE RIESGO."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.security3)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Notas"}),(0,z.jsx)(Se.xv,{style:ye.text,children:""===r.securityNotes.trim()?"--":r.securityNotes})]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsxs)(Se.G7,{style:ye.section,children:[(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["Dominio de Protecci\xf3n Legal - ",r.legalProtectionTotal," puntos"]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"1. SOBREVIVIENTE CONOCE SUS DERECHOS Y LAS PROTECCIONES BAJO LA LEY Y PERCIBE LAS VIOLACIONES COMO ABUSIVAS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.legalProtection1)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"2. EL ESTADO LEGAL O NIVEL DE DOCUMENTACI\xd3N DEL SOBREVIVIENTE MINIMIZA LOS RIESGOS DE VIOLACIONES FUTURAS A SUS DERECHOS HUMANOS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.legalProtection2)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"3. SOBREVIVIENTE TIENE ACCESO AL SISTEMA DE JUSTICIA PARA BUSCAR PROTECCI\xd3N Y/O REPARACIONES POR VIOLACIONES A LOS DERECHOS HUMANOS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.legalProtection3)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Notas"}),(0,z.jsx)(Se.xv,{style:ye.text,children:""===r.legalProtectionNotes.trim()?"--":r.legalProtectionNotes})]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsxs)(Se.G7,{style:ye.section,children:[(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["Dominio de Bienestar Mental - ",r.mentalWelfareTotal," puntos"]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"1. SOBREVIVIENTE NO MANIFIESTA CONDUCTAS DE RIESGO."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.mentalWelfare1)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"2. SOBREVIVIENTE SE INVOLUCRA POSITIVAMENTE EN ACTIVIDADES DIARIAS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.mentalWelfare2)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"3. SOBREVIVIENTE UTILIZA HABILIDADES DE AFRONTAMIENTO POSITIVAS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.mentalWelfare3)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"4. SOBREVIVIENTE DEMUESTRA ACTITUDES Y COMPORTAMIENTOS DE EMPODERAMIENTO."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.mentalWelfare4)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Notas"}),(0,z.jsx)(Se.xv,{style:ye.text,children:""===r.mentalWelfareNotes.trim()?"--":r.mentalWelfareNotes})]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsxs)(Se.G7,{style:ye.section,children:[(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["Dominio de empoderamiento econ\xf3mico y educaci\xf3n - ",r.financial," ","puntos"]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"1. EL HOGAR DEL SOBREVIVIENTE MANTIENE UN INGRESO ECON\xd3MICO ADECUADO SIN REALIZAR TRABAJO RELACIONADO CON LA EXPLOTACI\xd3N."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.financial1)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"2. SOBREVIVIENTE DEMUESTRA HABILIDADES DE GESTI\xd3N FINANCIERA."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.financial2)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"3. EL HOGAR DEL SOBREVIVIENTE TIENE ACCESO A UNA RED DE SEGURIDAD FINANCIERA ADECUADA."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.financial3)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"4. SOBREVIVIENTE SE RELACIONA POSITIVAMENTE CON LA ESCUELA O EL TRABAJO."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.financial4)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Notas"}),(0,z.jsx)(Se.xv,{style:ye.text,children:""===r.financialNotes.trim()?"--":r.financialNotes})]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsxs)(Se.G7,{style:ye.section,children:[(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["Dominio de Apoyo Social - ",r.social," puntos"]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"1. SOBREVIVIENTE SE SIENTE APOYADO EMOCIONALMENTE CON RELACIONES POSITIVAS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.social1)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"2. EL HOGAR DEL SOBREVIVIENTE APOYA SU BIENESTAR."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.social2)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"3. SOBREVIVIENTE NO EXPERIMENTA DISCRIMINACI\xd3N NI PRESI\xd3N SOCIAL NEGATIVA."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.social3)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"4. SOBREVIVIENTE TIENE ACCESO A RECURSOS Y APOYO DE LA COMUNIDAD."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.social4)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Notas"}),(0,z.jsx)(Se.xv,{style:ye.text,children:""===r.socialNotes.trim()?"--":r.socialNotes})]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsxs)(Se.G7,{style:ye.section,children:[(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["Dominio de Bienestar F\xedsico - ",r.physical," puntos"]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"1. SOBREVIVIENTE TIENE ACCESO A SERVICIOS M\xc9DICOS ESENCIALES."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.physical1)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"2. SOBREVIVIENTE CUIDA SUS NECESIDADES DE SALUD."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.physical2)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"3. SOBREVIVIENTE TIENE ACCESO A LAS NECESIDADES B\xc1SICAS ADECUADAS QUE IMPACTAN LA SALUD."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.physical3)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"4. SOBREVIVIENTE TIENE VIVIENDA ESTABLE."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.physical4)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"5. LA VIVIENDA EST\xc1 SEGURA Y LIBRE DE PELIGROS."}),(0,z.jsx)(Se.xv,{style:ye.text,children:a(r.physical5)})]}),(0,z.jsxs)(Se.G7,{style:ye.info,children:[(0,z.jsx)(Se.xv,{style:ye.label,children:"Notas"}),(0,z.jsx)(Se.xv,{style:ye.text,children:""===r.physicalNotes.trim()?"--":r.physicalNotes})]})]}),(0,z.jsx)(Se.G7,{style:ye.divider}),(0,z.jsx)(Se.G7,{style:ye.section,children:(0,z.jsxs)(Se.xv,{style:ye.sectionTitle,children:["TOTAL: ",r.total,"/4, LA V\xcdCTIMA",r.total<3&&" NO"," EST\xc1 RESTAURADA"]})})]})})},Ne=(0,p.ZP)(j.Z)((function(e){var n=e.theme;return(0,x.Z)((0,x.Z)({},n.typography.subtitle2),{},{color:n.palette.text.secondary,marginBottom:n.spacing(1)})}));var we=function(e){var n=e.open,i=e.handleClose,t=e.currentSurvivorEvaluation,o=e.currentCase,r=e.disabled,a=void 0!==r&&r,l=(0,A.Ds)().enqueueSnackbar,s=(0,c.kY)().mutate,v=(0,Se.Eb)({document:(0,z.jsx)(Ae,{currentCase:o,currentSurvivorEvaluation:t})}),p=(0,u.Z)(v,2),E=p[0],g=p[1],Z=(0,c.ZP)("/province").data,C=void 0===Z?[]:Z,y=G.Ry().shape({providerId:G.Rx(),security1:G.Rx(),security2:G.Rx(),security3:G.Rx(),legalProtection1:G.Rx(),legalProtection2:G.Rx(),legalProtection3:G.Rx(),mentalWelfare1:G.Rx(),mentalWelfare2:G.Rx(),mentalWelfare3:G.Rx(),mentalWelfare4:G.Rx(),financial1:G.Rx(),financial2:G.Rx(),financial3:G.Rx(),financial4:G.Rx(),social1:G.Rx(),social2:G.Rx(),social3:G.Rx(),social4:G.Rx(),physical1:G.Rx(),physical2:G.Rx(),physical3:G.Rx(),physical4:G.Rx(),physical5:G.Rx(),violenceType:G.Rx()}),R=(0,N.useMemo)((function(){var e,n,i,r,a,l,s,c,d,u,x,v,m,h,f,p,j,E,g,Z,b,I,C,S,y,A,N,w,R,O,D,T,P;return{caseId:o.id,violenceType:null!==(e=t.violenceType)&&void 0!==e?e:0,provinceId:null!==(n=t.provinceId)&&void 0!==n?n:1,place:t.place,phase:t.phase,security1:null!==(i=t.security1)&&void 0!==i?i:1,security2:null!==(r=t.security2)&&void 0!==r?r:1,security3:null!==(a=t.security3)&&void 0!==a?a:1,securityNotes:t.securityNotes,legalProtection1:null!==(l=t.legalProtection1)&&void 0!==l?l:1,legalProtection2:null!==(s=t.legalProtection2)&&void 0!==s?s:1,legalProtection3:null!==(c=t.legalProtection3)&&void 0!==c?c:1,legalProtectionNotes:t.legalProtectionNotes,mentalWelfare1:null!==(d=t.mentalWelfare1)&&void 0!==d?d:1,mentalWelfare2:null!==(u=t.mentalWelfare2)&&void 0!==u?u:1,mentalWelfare3:null!==(x=t.mentalWelfare3)&&void 0!==x?x:1,mentalWelfare4:null!==(v=t.mentalWelfare4)&&void 0!==v?v:1,mentalWelfareNotes:t.mentalWelfareNotes,financial1:null!==(m=t.financial1)&&void 0!==m?m:1,financial2:null!==(h=t.financial2)&&void 0!==h?h:1,financial3:null!==(f=t.financial3)&&void 0!==f?f:1,financial4:null!==(p=t.financial4)&&void 0!==p?p:1,financialNotes:t.financialNotes,social1:null!==(j=t.social1)&&void 0!==j?j:1,social2:null!==(E=t.social2)&&void 0!==E?E:1,social3:null!==(g=t.social3)&&void 0!==g?g:1,social4:null!==(Z=t.social4)&&void 0!==Z?Z:1,socialNotes:t.socialNotes,physical1:null!==(b=t.physical1)&&void 0!==b?b:1,physical2:null!==(I=t.physical2)&&void 0!==I?I:1,physical3:null!==(C=t.physical3)&&void 0!==C?C:1,physical4:null!==(S=t.physical4)&&void 0!==S?S:1,physical5:null!==(y=t.physical5)&&void 0!==y?y:1,physicalNotes:t.physicalNotes,total:t.total,survivorStatus:t.survivorStatus,createdAt:t.createdAt,completedAt:t.completedAt,userInChargeId:null===(A=t.userInCharge)||void 0===A?void 0:A.id,completed:null!==(N=t.completed)&&void 0!==N&&N,securityTotal:null!==(w=t.securityTotal)&&void 0!==w?w:1,legalProtectionTotal:null!==(R=t.legalProtectionTotal)&&void 0!==R?R:1,mentalWelfareTotal:null!==(O=t.mentalWelfareTotal)&&void 0!==O?O:1,financial:null!==(D=t.financial)&&void 0!==D?D:1,social:null!==(T=t.social)&&void 0!==T?T:1,physical:null!==(P=t.physical)&&void 0!==P?P:1}}),[t]),O=(0,w.cI)({resolver:(0,h.X)(y),defaultValues:R}),D=O.reset,P=O.handleSubmit,k=O.watch,V=O.formState.isSubmitting;(0,N.useEffect)((function(){D(R),g()}),[]);var F=function(){var e=(0,d.Z)(m().mark((function e(n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Wl)("".concat(T.q$,"/").concat(t.id),(0,x.Z)((0,x.Z)({},n),{},{securityTotal:ie(),legalProtectionTotal:ne(),mentalWelfareTotal:ee(),financial:K(),social:q(),physical:Y(),total:te()}));case 3:r=e.sent,s("".concat(B.UA,"/").concat(o.id),(0,x.Z)((0,x.Z)({},o),{},(0,$.Z)({},W(t.phase),r))),l("ESO guardado."),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l("Ocurri\xf3 un error al guardar los datos, int\xe9ntalo de nuevo",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),U=function(e){switch(e){case T.gI.START:return"Inicio del caso";case T.gI.END:return"Cierre del caso";case T.gI.POST:return"Un a\xf1o despu\xe9s del cierre";default:return""}},W=function(e){switch(e){case T.gI.START:return"initialSurvivorEvaluation";case T.gI.END:return"finalSurvivorEvaluation";case T.gI.POST:return"postSurvivorEvaluation";default:return"initialSurvivorEvaluation"}},Y=function(){return+((Number(k("physical1"))+Number(k("physical2"))+Number(k("physical3"))+Number(k("physical4"))+Number(k("physical5")))/5).toFixed(2)},q=function(){return+((Number(k("social1"))+Number(k("social2"))+Number(k("social3"))+Number(k("social4")))/4).toFixed(2)},K=function(){return+((Number(k("financial1"))+Number(k("financial2"))+Number(k("financial3"))+Number(k("financial4")))/4).toFixed(2)},ee=function(){return+((Number(k("mentalWelfare1"))+Number(k("mentalWelfare2"))+Number(k("mentalWelfare3"))+Number(k("mentalWelfare4")))/4).toFixed(2)},ne=function(){return+((Number(k("legalProtection1"))+Number(k("legalProtection2"))+Number(k("legalProtection3")))/3).toFixed(2)},ie=function(){return Number(((Number(k("security1"))+Number(k("security2"))+Number(k("security3")))/3).toFixed(2))},te=function(){return+((ie()+q()+ne()+ee()+K()+Y())/6).toFixed(2)};return(0,z.jsx)(H.Z,{open:n,onClose:i,maxWidth:"xl",fullWidth:!0,children:(0,z.jsx)(w.RV,(0,x.Z)((0,x.Z)({},O),{},{children:(0,z.jsxs)("form",{onSubmit:P(F),children:[(0,z.jsxs)(_.Z,{children:["ESO - ",U(t.phase)]}),(0,z.jsxs)(J.Z,{children:[(0,z.jsx)(je.Z,{children:"Llene los datos que se solicitan a continuaci\xf3n."}),(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:3,mt:3},children:[(0,z.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex",gap:2},children:[(0,z.jsx)(j.Z,{variant:"h5",noWrap:!0,sx:{mb:1},children:"Datos Demogr\xe1ficos"}),(0,z.jsxs)(S.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},mt:3},children:[(0,z.jsx)(I.Z,{disabled:!0,label:"Nombre del sobreviviente",value:o.victim.name}),(0,z.jsx)(M.Cc,{name:"provinceId",label:"Provincia donde ocurri\xf3 la violencia",children:C.map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))}),(0,z.jsx)(M.au,{name:"place",label:"Lugar donde se est\xe1 realizando la evaluaci\xf3n"})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"Tipo de Violencia"}),(0,z.jsx)(M.km,{name:"violenceType",options:T.SS,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]})]}),(0,z.jsxs)(Ze.Z,{children:[(0,z.jsxs)(be.Z,{children:[(0,z.jsxs)(j.Z,{children:["DOMINIO DE SEGURIDAD ",k("security1")]}),(0,z.jsxs)(j.Z,{variant:"button",sx:{ml:2},children:["(",ie(),"/4)"]})]}),(0,z.jsxs)(Ie.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"1. EL SOBREVIVIENTE YA NO EXPERIMENTA ABUSO NI NEGLIGENCIA."}),(0,z.jsx)(M.km,{name:"security1",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"2. EL SOBREVIVIENTE YA NO EXPERIMENTA AMENAZAS DE PARTE DE PERSONAS SOSPECHOSAS U OTROS QUE INTENTEN RE-VICTIMIZAR."}),(0,z.jsx)(M.km,{name:"security2",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"3. EL SOBREVIVIENTE ES CAPAZ DE IDENTIFICAR Y MANEJAR LAS SITUACIONES DE RIESGO."}),(0,z.jsx)(M.km,{name:"security3",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"securityNotes",label:"Notas",multiline:!0,rows:3})]})]}),(0,z.jsxs)(Ze.Z,{children:[(0,z.jsxs)(be.Z,{children:[(0,z.jsx)(j.Z,{children:"DOMINIO DE PROTECCI\xd3N LEGAL"}),(0,z.jsxs)(j.Z,{variant:"button",sx:{ml:2},children:["(",ne(),"/4)"]})]}),(0,z.jsxs)(Ie.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"1. SOBREVIVIENTE CONOCE SUS DERECHOS Y LAS PROTECCIONES BAJO LA LEY Y PERCIBE LAS VIOLACIONES COMO ABUSIVAS."}),(0,z.jsx)(M.km,{name:"legalProtection1",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"2. EL ESTADO LEGAL O NIVEL DE DOCUMENTACI\xd3N DEL SOBREVIVIENTE MINIMIZA LOS RIESGOS DE VIOLACIONES FUTURAS A SUS DERECHOS HUMANOS."}),(0,z.jsx)(M.km,{name:"legalProtection2",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"3. SOBREVIVIENTE TIENE ACCESO AL SISTEMA DE JUSTICIA PARA BUSCAR PROTECCI\xd3N Y/O REPARACIONES POR VIOLACIONES A LOS DERECHOS HUMANOS."}),(0,z.jsx)(M.km,{name:"legalProtection3",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"legalProtectionNotes",label:"Notas",multiline:!0,rows:3})]})]}),(0,z.jsxs)(Ze.Z,{children:[(0,z.jsxs)(be.Z,{children:[(0,z.jsx)(j.Z,{children:"DOMINIO DE BIENESTAR MENTAL"}),(0,z.jsxs)(j.Z,{variant:"button",sx:{ml:2},children:["(",ee(),"/4)"]})]}),(0,z.jsxs)(Ie.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"1. SOBREVIVIENTE NO MANIFIESTA CONDUCTAS DE RIESGO."}),(0,z.jsx)(M.km,{name:"mentalWelfare1",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"2. SOBREVIVIENTE SE INVOLUCRA POSITIVAMENTE EN ACTIVIDADES DIARIAS."}),(0,z.jsx)(M.km,{name:"mentalWelfare2",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"3. SOBREVIVIENTE UTILIZA HABILIDADES DE AFRONTAMIENTO POSITIVAS."}),(0,z.jsx)(M.km,{name:"mentalWelfare3",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"4. SOBREVIVIENTE DEMUESTRA ACTITUDES Y COMPORTAMIENTOS DE EMPODERAMIENTO."}),(0,z.jsx)(M.km,{name:"mentalWelfare4",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"mentalWelfareNotes",label:"Notas",multiline:!0,rows:3})]})]}),(0,z.jsxs)(Ze.Z,{children:[(0,z.jsxs)(be.Z,{children:[(0,z.jsx)(j.Z,{children:"DOMINIO DE EMPODERAMIENTO ECON\xd3MICO Y EDUCACI\xd3N"}),(0,z.jsxs)(j.Z,{variant:"button",sx:{ml:2},children:["(",K(),"/4)"]})]}),(0,z.jsxs)(Ie.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"1. EL HOGAR DEL SOBREVIVIENTE MANTIENE UN INGRESO ECON\xd3MICO ADECUADO SIN REALIZAR TRABAJO RELACIONADO CON LA EXPLOTACI\xd3N."}),(0,z.jsx)(M.km,{name:"financial1",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"2. SOBREVIVIENTE DEMUESTRA HABILIDADES DE GESTI\xd3N FINANCIERA."}),(0,z.jsx)(M.km,{name:"financial2",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"3. EL HOGAR DEL SOBREVIVIENTE TIENE ACCESO A UNA RED DE SEGURIDAD FINANCIERA ADECUADA."}),(0,z.jsx)(M.km,{name:"financial3",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"4. SOBREVIVIENTE SE RELACIONA POSITIVAMENTE CON LA ESCUELA O EL TRABAJO."}),(0,z.jsx)(M.km,{name:"financial4",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"financialNotes",label:"Notas",multiline:!0,rows:3})]})]}),(0,z.jsxs)(Ze.Z,{children:[(0,z.jsxs)(be.Z,{children:[(0,z.jsx)(j.Z,{children:"DOMINIO DE APOYO SOCIAL"}),(0,z.jsxs)(j.Z,{variant:"button",sx:{ml:2},children:["(",q(),"/4)"]})]}),(0,z.jsxs)(Ie.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"1. SOBREVIVIENTE SE SIENTE APOYADO EMOCIONALMENTE CON RELACIONES POSITIVAS."}),(0,z.jsx)(M.km,{name:"social1",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"2. EL HOGAR DEL SOBREVIVIENTE APOYA SU BIENESTAR."}),(0,z.jsx)(M.km,{name:"social2",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"3. SOBREVIVIENTE NO EXPERIMENTA DISCRIMINACI\xd3N NI PRESI\xd3N SOCIAL NEGATIVA."}),(0,z.jsx)(M.km,{name:"social3",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"4. SOBREVIVIENTE TIENE ACCESO A RECURSOS Y APOYO DE LA COMUNIDAD."}),(0,z.jsx)(M.km,{name:"social4",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"socialNotes",label:"Notas",multiline:!0,rows:3})]})]}),(0,z.jsxs)(Ze.Z,{children:[(0,z.jsxs)(be.Z,{children:[(0,z.jsx)(j.Z,{children:"DOMINIO DE BIENESTAR FISICO"}),(0,z.jsxs)(j.Z,{variant:"button",sx:{ml:2},children:["(",Y(),"/4)"]})]}),(0,z.jsxs)(Ie.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"1. SOBREVIVIENTE TIENE ACCESO A SERVICIOS M\xc9DICOS ESENCIALES."}),(0,z.jsx)(M.km,{name:"physical1",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"2. SOBREVIVIENTE CUIDA SUS NECESIDADES DE SALUD."}),(0,z.jsx)(M.km,{name:"physical2",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"3. SOBREVIVIENTE TIENE ACCESO A LAS NECESIDADES B\xc1SICAS ADECUADAS QUE IMPACTAN LA SALUD."}),(0,z.jsx)(M.km,{name:"physical3",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"4. SOBREVIVIENTE TIENE VIVIENDA ESTABLE."}),(0,z.jsx)(M.km,{name:"physical4",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(Ne,{children:"5. LA VIVIENDA EST\xc1 SEGURA Y LIBRE DE PELIGROS."}),(0,z.jsx)(M.km,{name:"physical5",options:T.wt,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,z.jsx)(M.au,{name:"physicalNotes",label:"Notas",multiline:!0,rows:3})]})]})]}),(0,z.jsxs)(j.Z,{variant:"h4",sx:{mt:2},children:["TOTAL: ",te(),"/4, LA V\xcdCTIMA ",te()<3&&"NO"," EST\xc1 RESTAURADA"]}),(0,z.jsx)(M.jb,{name:"completed",label:"Marcar como completado",sx:{mt:3}})]}),(0,z.jsxs)(X.Z,{sx:{display:"flex",alignItems:"center",gap:3},children:[E.url&&(0,z.jsx)(Ce.Z,{href:E.url,download:"Evaluaci\xf3n del sobreviviente - ".concat(U(t.phase)," - ").concat(o.victim.name,".pdf"),children:"Descargar Evaluaci\xf3n del Sobreviviente"}),(0,z.jsx)(Q.Z,{onClick:i,children:"Cancelar"}),(0,z.jsx)(f.Z,{type:"submit",variant:"contained",loading:V,disabled:a,children:"Guardar Cambios"})]})]})}))})},Re=i(39281),Oe=i(79836),De=i(53382),Te=i(35855),Pe=i(53994),Me=i(60619),ke=i(71170),Ve=i(77762),Le=i(13967),Ge=[{id:"description",label:"Evaluaci\xf3n",align:"left"},{id:"userInCharge",label:"Responsable",align:"left"},{id:"completed",label:"Estado",align:"left"},{id:"actions",label:"",align:"right",width:200}];var Fe=function(e){var n,i,o,r,a,s,c,d,u,x,v=e.providerContacts,m=e.currentCase,h=e.onDemographicClick,f=e.onInitialSurvivorEvaluationClick,p=e.onFinalSurvivorEvaluationClick,j=e.onPostSurvivorEvaluationClick,E=e.onAttentionProtocolClick,g=e.disabled,Z=void 0!==g&&g,b=(0,Le.Z)(),I=(0,Ve.ZP)(),C=I.order,S=I.orderBy,y=I.onSort,A=(0,t.s0)(),N=function(e){var n=document.createElement("a");n.href=e?"/assets/adult_consent.pdf":"/assets/nna_consent.pdf",n.download="Formulario de Consentimiento Informado ".concat(e?"ADULTOS":"NNA",".pdf"),n.dispatchEvent(new MouseEvent("click"))};return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(Re.Z,{sx:{minWidth:800,position:"relative",pt:1},children:(0,z.jsxs)(Oe.Z,{size:"medium",children:[(0,z.jsx)(ke.K,{order:C,orderBy:S,headLabel:Ge,rowCount:6,onSort:y}),(0,z.jsxs)(De.Z,{children:[(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",children:"Obtener CONSENTIMIENTO INFORMADO del sobreviviente (o tutor, en casos de menores de edad) antes de administrar cualquier servicio no cr\xedtico."}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"consentUserInChargeId",label:"Responsable",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsx)(M.jb,{name:"consent",label:"Realizado?",sx:{mt:3},disabled:(null===m||void 0===m?void 0:m.inactive)||(null===m||void 0===m?void 0:m.completed)})}),(0,z.jsxs)(Pe.Z,{align:"center",children:[(0,z.jsx)(Q.Z,{variant:"text",onClick:function(){return N(!0)},children:"Descargar Consentimiento Adulto"}),(0,z.jsx)(Q.Z,{variant:"text",onClick:function(){return N(!1)},children:"Descargar Consentimiento NNA"})]})]},0),(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",children:"Completar un FORMULARIO DEMOGR\xc1FICO para recolectar la informaci\xf3n b\xe1sica del sobreviviente."}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"demographicForm.userInChargeId",label:"Responsable",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsx)(Me.Z,{variant:"light"===b.palette.mode?"ghost":"filled",color:null!==m&&void 0!==m&&null!==(n=m.demographicForm)&&void 0!==n&&n.completed?"success":"error",children:null!==m&&void 0!==m&&null!==(i=m.demographicForm)&&void 0!==i&&i.completed?"Completado":"Pendiente"})}),(0,z.jsx)(Pe.Z,{align:"center",children:m&&(0,z.jsx)(Q.Z,{variant:"text",onClick:h,children:"Ver Formulario"})})]},1),(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",children:"Realizar una EVALUACI\xd3N DEL SOBREVIVIENTE (ESO) inicial. Nota: debe pasar dentro del primer mes de un caso nuevo"}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"initialSurvivorEvaluation.userInChargeId",label:"Responsable",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsx)(Me.Z,{variant:"light"===b.palette.mode?"ghost":"filled",color:null!==m&&void 0!==m&&null!==(o=m.initialSurvivorEvaluation)&&void 0!==o&&o.completed?"success":"error",children:null!==m&&void 0!==m&&null!==(r=m.initialSurvivorEvaluation)&&void 0!==r&&r.completed?"Completado":"Pendiente"})}),(0,z.jsx)(Pe.Z,{align:"center",children:m&&(0,z.jsx)(Q.Z,{variant:"text",onClick:f,children:"Ver Formulario"})})]},2),(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",children:"Elaborar un PROTOCOLO DE ATENCI\xd3N para el/la sobreviviente, orientado especialmente a las \xe1reas prioritarias reveladas por la primera ESO."}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"attentionProtocol.userInChargeId",label:"Responsable",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsx)(Me.Z,{variant:"light"===b.palette.mode?"ghost":"filled",color:null!==m&&void 0!==m&&null!==(a=m.attentionProtocol)&&void 0!==a&&a.completed?"success":"error",children:null!==m&&void 0!==m&&null!==(s=m.attentionProtocol)&&void 0!==s&&s.completed?"Completado":"Pendiente"})}),(0,z.jsx)(Pe.Z,{align:"center",children:m&&(0,z.jsx)(Q.Z,{variant:"text",onClick:E,children:"Ver Formulario"})})]},3),(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",children:"Se debe realizar una ESO final al cierre del caso."}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"finalSurvivorEvaluation.userInChargeId",label:"Responsable",type:"number",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsx)(Me.Z,{variant:"light"===b.palette.mode?"ghost":"filled",color:null!==m&&void 0!==m&&null!==(c=m.finalSurvivorEvaluation)&&void 0!==c&&c.completed?"success":"error",children:null!==m&&void 0!==m&&null!==(d=m.finalSurvivorEvaluation)&&void 0!==d&&d.completed?"Completado":"Pendiente"})}),(0,z.jsx)(Pe.Z,{align:"center",children:m&&(0,z.jsx)(Q.Z,{variant:"text",onClick:p,children:"Ver Formulario"})})]},4),(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",children:"A un a\xf1o luego del cierre del caso, se debe realizar una ESO para ver si la restauraci\xf3n se ha sostenido."}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"postSurvivorEvaluation.userInChargeId",label:"Responsable",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsx)(Me.Z,{variant:"light"===b.palette.mode?"ghost":"filled",color:null!==m&&void 0!==m&&null!==(u=m.postSurvivorEvaluation)&&void 0!==u&&u.completed?"success":"error",children:null!==m&&void 0!==m&&null!==(x=m.postSurvivorEvaluation)&&void 0!==x&&x.completed?"Completado":"Pendiente"})}),(0,z.jsx)(Pe.Z,{align:"center",children:m&&(0,z.jsx)(Q.Z,{variant:"text",onClick:j,children:"Ver Formulario"})})]},5),(0,z.jsxs)(Te.Z,{hover:!0,children:[(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize",cursor:"pointer"},children:"Se deben realizar NOTAS DE SEGUIMIENTO luego de cada visita/contacto con el/la sobreviviente."}),(0,z.jsx)(Pe.Z,{align:"left",children:(0,z.jsxs)(M.Cc,{name:"followUpUserInChargeId",label:"Responsable",disabled:Z,children:[(0,z.jsx)("option",{value:0},0),(null!==v&&void 0!==v?v:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,z.jsx)(Pe.Z,{align:"left"}),(0,z.jsx)(Pe.Z,{align:"center",children:m&&(0,z.jsx)(Q.Z,{variant:"text",onClick:function(){return A(l.vB.general.cases.followUp(m.id))},children:"Ver Notas"})})]},6)]})]})})})},Be=i(28178),Ue=i(97145),We=i(23786),Ye=i(6593),ze=i.n(Ye);function qe(e){var n=e.row,i=e.selected,t=e.onEditRow,o=(e.onSelectRow,e.onDeleteRow),r=n.date,a=n.canceled,l=n.lawyer,s=n.tribunal,c=(0,N.useState)(null),d=(0,u.Z)(c,2),x=d[0],v=d[1],m=function(){v(null)};return(0,z.jsxs)(Te.Z,{hover:!0,selected:i,children:[(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize"},children:Y()(r).calendar(Y()(),{sameDay:"[Hoy a las] h:mm A",nextDay:"[Ma\xf1ana a las] h:mm A",lastDay:"[Ayer a las] h:mm A",sameElse:"DD/MM/YYYY h:mm A"})}),(0,z.jsx)(Pe.Z,{align:"left",children:l}),(0,z.jsx)(Pe.Z,{align:"left",children:s}),(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize"},children:a?"Cancelada":""}),(0,z.jsx)(Pe.Z,{align:"right",children:(0,z.jsx)(ke.V7,{open:x,onOpen:function(e){v(e.currentTarget)},onClose:m,actions:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(We.Z,{onClick:function(){o(),m()},sx:{color:"error.main"},children:[(0,z.jsx)(k.Z,{icon:"eva:trash-2-outline"}),"Eliminar"]}),(0,z.jsxs)(We.Z,{onClick:function(){t(),m()},children:[(0,z.jsx)(k.Z,{icon:"eva:edit-fill"}),"Editar"]})]})})})]})}Y().extend(ze());var He=i(7792),_e=i(36571),Je=i(94391);function Xe(e){var n=e.open,i=e.handleClose,t=e.currentFollowUp,o=e.currentCase,r=(0,A.Ds)().enqueueSnackbar,a=(0,c.kY)().mutate,l=(0,N.useMemo)((function(){var e,n,i,r,a,l,s;return{date:null!==(e=null===t||void 0===t?void 0:t.date)&&void 0!==e?e:"",decisions:null!==(n=null===t||void 0===t?void 0:t.decisions)&&void 0!==n?n:"",lawyer:null!==(i=null===t||void 0===t?void 0:t.lawyer)&&void 0!==i?i:"",tribunal:null!==(r=null===t||void 0===t?void 0:t.tribunal)&&void 0!==r?r:"",nextAudienceDate:null!==(a=null===t||void 0===t?void 0:t.nextAudienceDate)&&void 0!==a?a:"",canceled:null!==(l=null===t||void 0===t?void 0:t.canceled)&&void 0!==l&&l,cancelledReason:null!==(s=null===t||void 0===t?void 0:t.cancelledReason)&&void 0!==s?s:"",caseId:o.id}}),[t]),s=G.Ry().shape({date:G.Z_().required("Campo obligatorio"),decisions:G.Z_().required("Campo obligatorio"),lawyer:G.Z_().required("Campo obligatorio"),tribunal:G.Z_().required("Campo obligatorio")}),u=(0,w.cI)({resolver:(0,h.X)(s),defaultValues:l}),v=u.reset,p=u.handleSubmit,j=u.formState.isSubmitting,E=u.watch,g=u.setValue;(0,N.useEffect)((function(){v(l)}),[l]);var Z=function(){var e=(0,d.Z)(m().mark((function e(n){var l,s,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=10;break}return e.next=4,(0,L.Wl)("/follow-up/".concat(t.id),(0,x.Z)((0,x.Z)({},n),{},{date:Y()(n.date).toISOString(),nextAudienceDate:n.nextAudienceDate?Y()(n.nextAudienceDate).toISOString():void 0}));case 4:l=e.sent,a("".concat(B.UA,"/").concat(o.id),(0,x.Z)((0,x.Z)({},o),{},{followUps:[].concat((0,F.Z)(o.followUps.filter((function(e){return e.id!==t.id}))),[l])})),r("Formulario demogr\xe1fico guardado."),i(),e.next=16;break;case 10:return e.next=12,(0,L.km)("/follow-up",(0,x.Z)((0,x.Z)({},n),{},{date:Y()(n.date).toISOString(),nextAudienceDate:n.nextAudienceDate?Y()(n.nextAudienceDate).toISOString():void 0}));case 12:c=e.sent,a("".concat(B.UA,"/").concat(o.id),(0,x.Z)((0,x.Z)({},o),{},{followUps:[].concat((0,F.Z)(null!==(s=o.followUps)&&void 0!==s?s:[]),[c])})),r("Datos guardados."),i();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),r("Ocurri\xf3 un error al guardar los datos, int\xe9ntalo de nuevo",{variant:"error"});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(n){return e.apply(this,arguments)}}(),b=E("date");return(0,z.jsx)(H.Z,{open:n,onClose:i,fullWidth:!0,maxWidth:"xl",children:(0,z.jsx)(w.RV,(0,x.Z)((0,x.Z)({},u),{},{children:(0,z.jsxs)("form",{onSubmit:p(Z),children:[(0,z.jsx)(_.Z,{children:"Audiencia"}),(0,z.jsx)(J.Z,{children:(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,z.jsxs)(S.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},mt:3},children:[(0,z.jsx)(M.au,{name:"tribunal",label:"Tribunal"}),(0,z.jsx)(M.au,{name:"lawyer",label:"Abogado Actuante"}),(0,z.jsx)(_e._,{dateAdapter:He.y,children:(0,z.jsx)(Je.x,{label:"Fecha",inputFormat:"DD/MM/YYYY HH:mm",value:b,onChange:function(e){return e&&g("date",e)},renderInput:function(e){return(0,z.jsx)(I.Z,(0,x.Z)({},e))}})})]}),(0,z.jsx)(S.Z,{sx:{display:"flex",flexDirection:"column",mt:3},children:(0,z.jsx)(M.au,{multiline:!0,rows:3,name:"decisions",label:"Decisiones"})})]})}),(0,z.jsxs)(X.Z,{children:[(0,z.jsx)(Q.Z,{onClick:i,children:"Cancelar"}),(0,z.jsx)(f.Z,{type:"submit",variant:"contained",loading:j,children:"Guardar Cambios"})]})]})}))})}var Qe=[{id:"date",label:"Fecha",align:"left"},{id:"lawyer",label:"Abogado Actuante",align:"left"},{id:"tribunal",label:"Tribunal",align:"left"},{id:"status",label:"Estado",align:"left"},{id:""}];function $e(){var e=(0,r.Z)().themeStretch,n=(0,N.useState)(!1),i=(0,u.Z)(n,2),v=i[0],h=i[1],f=(0,N.useState)(),p=(0,u.Z)(f,2),j=p[0],E=p[1],g=(0,Ve.ZP)(),Z=g.dense,I=g.page,C=g.rowsPerPage,y=g.selected,w=g.onSelectRow,R=g.onSort,O=g.onChangePage,D=g.onChangeRowsPerPage,T=Z?52:72,P=(0,t.UO)().id,M=(0,c.ZP)(P?"".concat(B.UA,"/").concat(P):null),V=M.data,G=M.mutate,F=(null!==V&&void 0!==V?V:{}).followUps,U=void 0===F?[]:F,W=!U.length,Y=(0,A.Ds)().enqueueSnackbar,q=function(){var e=(0,d.Z)(m().mark((function e(n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,V){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,L.G4)("follow-up/".concat(n.id));case 5:G((0,x.Z)((0,x.Z)({},V),{},{followUps:U.filter((function(e){return e.id!==n.id}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Y("Ocurri\xf3 un error al eliminar el seguimiento, vuelve a intentarlo. Si el error persiste, contacta a soporte.",{variant:"error",persist:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,z.jsx)(a.Z,{title:"Seguimientos",children:(0,z.jsxs)(o.Z,{maxWidth:!e&&"lg",sx:{mt:2},children:[V&&(0,z.jsx)(Xe,{currentCase:V,open:v,handleClose:function(){h(!1),E(void 0)},currentFollowUp:j}),(0,z.jsx)(s.Z,{heading:"Audiencias",links:[{name:"Audiencias",href:l.vB.root}],action:(0,z.jsx)(Q.Z,{variant:"contained",onClick:function(){h(!0),E(void 0)},startIcon:(0,z.jsx)(k.Z,{icon:"eva:plus-fill"}),disabled:(null===V||void 0===V?void 0:V.inactive)||(null===V||void 0===V?void 0:V.completed),children:"Nueva Audiencia"})}),(0,z.jsxs)(b.Z,{children:[(0,z.jsx)(Ue.Z,{children:(0,z.jsx)(Re.Z,{sx:{minWidth:800,position:"relative",pt:1},children:(0,z.jsxs)(Oe.Z,{size:Z?"small":"medium",children:[(0,z.jsx)(ke.K,{headLabel:Qe,rowCount:U.length,onSort:R}),(0,z.jsxs)(De.Z,{children:[U.slice(I*C,I*C+C).map((function(e){return(0,z.jsx)(qe,{row:e,selected:y.includes(e.id),onSelectRow:function(){return w(e.id)},onDeleteRow:function(){return q(e)},onEditRow:function(){return n=e,h(!0),void E(n);var n}},e.id)})),(0,z.jsx)(ke.$W,{height:T,emptyRows:(0,Ve.fQ)(I,C,U.length)}),(0,z.jsx)(ke.et,{isNotFound:W})]})]})})}),(0,z.jsx)(S.Z,{sx:{position:"relative"},children:(0,z.jsx)(Be.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:U.length,rowsPerPage:C,page:I,onPageChange:O,onRowsPerPageChange:D})})]})]})})}var Ke=i(43144),en=i(15671),nn=i(92033),tn=(0,Ke.Z)((function e(){(0,en.Z)(this,e)}));tn.searchCaseByCode=function(){var e=(0,d.Z)(m().mark((function e(n){var i,t,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.Z.get("case/search?caseNumber=".concat(n));case 2:return i=e.sent,t=i.data,o=void 0===t?[]:t,e.abrupt("return",o[0]);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),tn.searchCaseByVictim=function(){var e=(0,d.Z)(m().mark((function e(n){var i,t,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.Z.get("case/search?userIdentification=".concat(n));case 2:return i=e.sent,t=i.data,o=void 0===t?[]:t,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var on=[{id:"id",label:"C\xf3digo de Caso",align:"left"},{id:"description",label:"Descripci\xf3n",align:"left"},{id:"date",label:"Fecha de Apertura de Caso",align:"left"},{id:"status",label:"Estado",align:"left"}];function rn(e){var n=e.open,i=e.handleClose,t=e.cases,o=(0,Ve.ZP)(),r=o.order,a=o.orderBy,l=o.onSort,s=(0,Le.Z)(),c=function(e){return e.inactive?s.palette.error.main:e.completed?s.palette.background.neutral:s.palette.primary.main};return(0,z.jsxs)(H.Z,{open:n,onClose:function(){return i()},maxWidth:"xl",children:[(0,z.jsx)(_.Z,{children:"Resultados de la b\xfasqueda"}),(0,z.jsxs)(J.Z,{children:[(0,z.jsx)(j.Z,{variant:"caption",children:"Haga click en el caso para seleccionarlo."}),(0,z.jsx)(Re.Z,{sx:{minWidth:800,position:"relative",pt:1},children:(0,z.jsxs)(Oe.Z,{size:"medium",children:[(0,z.jsx)(ke.K,{order:r,orderBy:a,headLabel:on,rowCount:t.length,onSort:l}),(0,z.jsx)(De.Z,{children:t.map((function(e,n){return(0,z.jsxs)(Te.Z,{hover:!0,sx:{cursor:"pointer"},onClick:function(){return i(e)},children:[(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize"},children:e.code}),(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize"},children:e.description}),(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize"},children:Y()(e.createdAt).format("DD/MM/YYYY")}),(0,z.jsx)(Pe.Z,{align:"left",sx:{textTransform:"capitalize"},children:(0,z.jsx)(Me.Z,{sx:{textTransform:"capitalize",backgroundColor:c(e),color:s.palette.getContrastText(c(e))},children:e.inactive?"Inactivo":e.completed?"Cerrado":"Activo"})})]},e.code)}))})]})})]}),(0,z.jsx)(X.Z,{children:(0,z.jsx)(Q.Z,{onClick:function(){return i()},children:"Cancelar"})})]})}var an="/case",ln=(0,p.ZP)(j.Z)((function(e){var n=e.theme;return(0,x.Z)((0,x.Z)({},n.typography.subtitle2),{},{color:n.palette.text.secondary,marginBottom:n.spacing(1)})}));function sn(e){var n=e.isEdit,i=e.currentCase,o=(0,A.Ds)().enqueueSnackbar,r=(0,t.s0)(),a=(0,V.Z)("general"),s=a.currentTab,v=a.onChangeTab,p=(0,U.Z)().user,F=(0,N.useState)(!1),B=(0,u.Z)(F,2),W=B[0],Y=B[1],H=(0,N.useState)(!1),_=(0,u.Z)(H,2),J=_[0],X=_[1],Q=(0,N.useState)(!1),$=(0,u.Z)(Q,2),K=$[0],ee=$[1],ne=(0,N.useState)(!1),ie=(0,u.Z)(ne,2),te=ie[0],oe=ie[1],re=(0,N.useState)(!1),ae=(0,u.Z)(re,2),le=ae[0],se=ae[1],ce=G.Ry().shape({providerId:G.Rx().min(1,"Selecciona un Proveedor").required("Campo obligatorio"),userInChargeId:G.Rx().min(1,"Selecciona un usuario").required("Campo obligatorio"),consentUserInChargeId:G.Rx().min(1,"Selecciona un usuario").required("Campo obligatorio"),code:G.Z_().required("Campo obligatorio"),followUpUserInChargeId:G.Rx(),victim:G.Ry({name:G.Z_().required("Campo obligatorio"),age:G.Rx().min(1,"Edad debe ser mayor a 0").required("Campo obligatorio"),verifiedAge:G.Rx().min(1,"Edad debe ser mayor a 0"),citizenship:G.Z_().required("Campo obligatorio"),ethnicity:G.Z_().required("Campo obligatorio"),nationality:G.Z_().required("Campo obligatorio"),maritalStatus:G.Rx().min(1,"Campo obligatorio"),currentAddress:G.Z_().required("Campo obligatorio"),email:G.Z_().required("Campo obligatorio"),id:G.Rx().min(1,"C\xe9dula no v\xe1lida").required("Campo obligatorio"),children:G.Rx()}),attentionProtocol:G.Ry({userInChargeId:G.Rx().min(1,"Campo obligatorio")}),demographicForm:G.Ry({userInChargeId:G.Rx().min(1,"Campo obligatorio")}),initialSurvivorEvaluation:G.Ry({userInChargeId:G.Rx().min(1,"Campo obligatorio")}),finalSurvivorEvaluation:G.Ry({userInChargeId:G.Rx().min(1,"Campo obligatorio")}),postSurvivorEvaluation:G.Ry({userInChargeId:G.Rx().min(1,"Campo obligatorio")})}),de=(0,N.useMemo)((function(){var e,n,t,o,r,a,l,s,c,d,u,v,m,h,f,j,E,g,Z,b,I,C;return{userCode:null!==(e=null!==(n=null===i||void 0===i?void 0:i.userCode)&&void 0!==n?n:null===p||void 0===p?void 0:p.userCode)&&void 0!==e?e:"",description:null!==(t=null===i||void 0===i?void 0:i.description)&&void 0!==t?t:"",providerId:null!==(o=null===i||void 0===i?void 0:i.provider.id)&&void 0!==o?o:0,userInChargeId:null!==(r=null===i||void 0===i?void 0:i.userInCharge.id)&&void 0!==r?r:0,jurisdiction:null!==(a=null===i||void 0===i?void 0:i.jurisdiction)&&void 0!==a?a:"",defendant:null!==(l=null===i||void 0===i?void 0:i.defendant)&&void 0!==l?l:"",defendantId:null!==(s=null===i||void 0===i?void 0:i.defendantId)&&void 0!==s?s:"",proceduralStage:null!==(c=null===i||void 0===i?void 0:i.proceduralStage)&&void 0!==c?c:"",legalScore:null!==(d=null===i||void 0===i?void 0:i.legalScore)&&void 0!==d?d:"",consent:null!==(u=null===i||void 0===i?void 0:i.consent)&&void 0!==u&&u,completed:null!==(v=null===i||void 0===i?void 0:i.completed)&&void 0!==v&&v,followUpUserInChargeId:null!==(m=null===i||void 0===i?void 0:i.followUpUserInCharge.id)&&void 0!==m?m:0,victim:null!==(h=null===i||void 0===i?void 0:i.victim)&&void 0!==h?h:P.Wu,code:null!==(f=null===i||void 0===i?void 0:i.code)&&void 0!==f?f:"",consentUserInChargeId:null!==(j=null===i||void 0===i||null===(E=i.consentUserInCharge)||void 0===E?void 0:E.id)&&void 0!==j?j:0,demographicForm:i?(0,x.Z)((0,x.Z)({},i.demographicForm),{},{userInChargeId:null===(g=i.demographicForm.userInCharge)||void 0===g?void 0:g.id}):O.Jn,initialSurvivorEvaluation:i?(0,x.Z)((0,x.Z)({},i.initialSurvivorEvaluation),{},{userInChargeId:null===(Z=i.initialSurvivorEvaluation.userInCharge)||void 0===Z?void 0:Z.id}):(0,T.GU)(T.gI.START),finalSurvivorEvaluation:i?(0,x.Z)((0,x.Z)({},i.finalSurvivorEvaluation),{},{userInChargeId:null===(b=i.finalSurvivorEvaluation.userInCharge)||void 0===b?void 0:b.id}):(0,T.GU)(T.gI.END),postSurvivorEvaluation:i?(0,x.Z)((0,x.Z)({},i.postSurvivorEvaluation),{},{userInChargeId:null===(I=i.postSurvivorEvaluation.userInCharge)||void 0===I?void 0:I.id}):(0,T.GU)(T.gI.POST),attentionProtocol:i?(0,x.Z)((0,x.Z)({},i.attentionProtocol),{},{userInChargeId:null===(C=i.attentionProtocol.userInCharge)||void 0===C?void 0:C.id}):R.kk}}),[i]),ue=(0,w.cI)({resolver:(0,h.X)(ce),defaultValues:de}),xe=ue.reset,ve=ue.handleSubmit,me=ue.formState.isSubmitting,he=ue.watch,fe=ue.setValue,je=he("providerId"),Ee=he("victim.id"),Ze=(0,c.ZP)(D.si).data,be=void 0===Ze?[]:Ze,Ie=(0,c.ZP)(je?"".concat("/user","/provider/").concat(je):null).data,Ce=void 0===Ie?[]:Ie;(0,N.useEffect)((function(){n&&i&&xe(de),n||xe(de)}),[n,i]);var Se=function(){var e=(0,d.Z)(m().mark((function e(t){var a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n||!i){e.next=11;break}(0,L.Wl)("".concat(P.al,"/").concat(t.victim.id),t.victim).then((function(){return o("Datos de v\xedctima guardados")})).catch((function(){fe("victim",i.victim),o("Error al guardar datos de la v\xedctima",{variant:"error",persist:!0})})),(0,L.Wl)("".concat(O.Cc,"/").concat(i.demographicForm.id),{userInChargeId:t.demographicForm.userInChargeId}).then((function(){return o("Responsable de formulario demogr\xe1fico asignado.")})).catch((function(){var e;fe("demographicForm.userInChargeId",null===(e=i.demographicForm.userInCharge)||void 0===e?void 0:e.id),o("Error al guardar responsable de formulario demogr\xe1fico.",{variant:"error",persist:!0})})),(0,L.Wl)("".concat(R.lP,"/").concat(null===(a=i.attentionProtocol)||void 0===a?void 0:a.id),{userInChargeId:t.attentionProtocol.userInChargeId}).then((function(){return o("Responsable de protocolo de atenci\xf3n asignado.")})).catch((function(){var e;fe("attentionProtocol.userInChargeId",null===(e=i.attentionProtocol.userInCharge)||void 0===e?void 0:e.id),o("Error al guardar responsable de protocolo de atenci\xf3n",{variant:"error",persist:!0})})),(0,L.Wl)("".concat(T.q$,"/").concat(i.initialSurvivorEvaluation.id),{userInChargeId:t.initialSurvivorEvaluation.userInChargeId}).then((function(){return o("Responsable de ESO inicial asignado.")})).catch((function(){var e,n;fe("initialSurvivorEvaluation.userInChargeId",null===(e=i.initialSurvivorEvaluation)||void 0===e||null===(n=e.userInCharge)||void 0===n?void 0:n.id),o("Error al guardar responsable de ESO inicial",{variant:"error",persist:!0})})),(0,L.Wl)("".concat(T.q$,"/").concat(i.postSurvivorEvaluation.id),{userInChargeId:t.postSurvivorEvaluation.userInChargeId}).then((function(){return o("Responsable de ESO post-caso asignado.")})).catch((function(){var e,n;fe("postSurvivorEvaluation.userInChargeId",null===(e=i.postSurvivorEvaluation)||void 0===e||null===(n=e.userInCharge)||void 0===n?void 0:n.id),o("Error al guardar responsable de ESO post-caso.",{variant:"error",persist:!0})})),(0,L.Wl)("".concat(T.q$,"/").concat(i.finalSurvivorEvaluation.id),{userInChargeId:t.finalSurvivorEvaluation.userInChargeId}).then((function(){return o("Responsable de ESO final asignado.")})).catch((function(){var e,n;fe("finalSurvivorEvaluation.userInChargeId",null===(e=i.finalSurvivorEvaluation)||void 0===e||null===(n=e.userInCharge)||void 0===n?void 0:n.id),o("Error al guardar responsable de ESO final.",{variant:"error",persist:!0})})),(0,L.Wl)("".concat(an,"/").concat(i.id),(0,x.Z)((0,x.Z)({},t),{},{initialSurvivorEvaluation:{userInChargeId:t.initialSurvivorEvaluation.userInChargeId},finalSurvivorEvaluation:{userInChargeId:t.finalSurvivorEvaluation.userInChargeId},postSurvivorEvaluation:{userInChargeId:t.postSurvivorEvaluation.userInChargeId},attentionProtocol:{userInChargeId:t.attentionProtocol.userInChargeId},demographicForm:{userInChargeId:t.demographicForm.userInChargeId}})).then((function(){return o("Informaci\xf3n del caso guardada")})).catch((function(){o("Error al guardar informaci\xf3n del caso",{variant:"error",persist:!0}),xe()})),e.next=16;break;case 11:if(n){e.next=16;break}return e.next=14,(0,L.km)(an,t);case 14:r(l.vB.general.cases.list),o("Caso Creado");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(n){return e.apply(this,arguments)}}(),ye=(0,N.useCallback)((0,d.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ee){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,L.CH)("".concat(P.al,"/").concat(Ee));case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[Ee]);(0,N.useEffect)((function(){if(""!=="".concat(Ee).trim()&&0!==Ee){var e=setTimeout((0,d.Z)(m().mark((function e(){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:(n=e.sent)&&fe("victim",n,{shouldTouch:!0,shouldDirty:!0,shouldValidate:!0});case 4:case"end":return e.stop()}}),e)}))),500);return function(){return clearTimeout(e)}}}),[Ee,ye,fe]);var Ae=(0,N.useState)(""),Ne=(0,u.Z)(Ae,2),Re=Ne[0],Oe=Ne[1],De=(0,N.useState)(""),Te=(0,u.Z)(De,2),Pe=Te[0],Me=Te[1],ke=(0,N.useState)([]),Ve=(0,u.Z)(ke,2),Le=Ve[0],Ge=Ve[1],Be=function(){var e=(0,d.Z)(m().mark((function e(){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Re.trim().length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tn.searchCaseByCode(Re);case 4:if(n=e.sent){e.next=8;break}return o("No se ha encontrado ning\xfan caso con el c\xf3digo ".concat(Re),{variant:"info"}),e.abrupt("return");case 8:Ue(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(e){var n,i,t,o,r,a;if(!e.id)return fe("code",null!==(n=e.code)&&void 0!==n?n:""),fe("jurisdiction",null!==(i=e.jurisdiction)&&void 0!==i?i:""),fe("defendant",null!==(t=e.defendant)&&void 0!==t?t:""),fe("defendantId",null!==(o=e.defendantId)&&void 0!==o?o:""),fe("proceduralStage",null!==(r=e.proceduralStage)&&void 0!==r?r:""),fe("legalScore",null!==(a=e.legalScore)&&void 0!==a?a:""),void(e.victim&&fe("victim",e.victim));window.location.href="/dashboard/case/".concat(e.id)},We=function(){var e=(0,d.Z)(m().mark((function e(){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe.trim().length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tn.searchCaseByVictim(Re);case 4:if((n=e.sent).length){e.next=8;break}return o("No se ha encontrado ning\xfan caso para la v\xedctima con c\xe9dula ".concat(Pe),{variant:"info"}),e.abrupt("return");case 8:Ge(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(E.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:s,onChange:v,children:[(0,z.jsx)(g.Z,{disableRipple:!0,label:"General",icon:(0,z.jsx)(k.Z,{icon:"ion:clipboard",width:20,height:20}),value:"general"},0),(0,z.jsx)(g.Z,{disableRipple:!0,disabled:!n,label:"Comentarios",icon:(0,z.jsx)(k.Z,{icon:"ion:chatbubble",width:20,height:20}),value:"comments"},1),(0,z.jsx)(g.Z,{disableRipple:!0,disabled:!n,label:"Seguimiento de Caso",icon:(0,z.jsx)(k.Z,{icon:"uil:history",width:20,height:20}),value:"tracing"},2)]}),"general"===s&&(0,z.jsxs)(Z.ZP,{container:!0,spacing:3,sx:{mt:2},children:[!n&&(0,z.jsx)(Z.ZP,{item:!0,xs:12,md:3,children:(0,z.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex",gap:2,position:"sticky",top:75},children:[(0,z.jsx)(j.Z,{variant:"h5",noWrap:!0,children:"B\xfasqueda de Caso MP"}),(0,z.jsx)(I.Z,{fullWidth:!0,value:Re,onChange:function(e){return Oe(e.target.value)},label:"Buscar por C\xf3digo de Caso",placeholder:"Ingresa c\xf3digo de caso"}),(0,z.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed),onClick:Be,children:"Buscar por c\xf3digo de caso"}),(0,z.jsx)(C.Z,{sx:{my:2}}),(0,z.jsx)(I.Z,{fullWidth:!0,value:Pe,onChange:function(e){return Me(e.target.value)},label:"Buscar por C\xe9dula de V\xedctima",placeholder:"Ingresa la c\xe9dula de la v\xedctima"}),(0,z.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed),onClick:We,children:"Buscar por c\xe9dula de V\xedctima"}),(0,z.jsx)(rn,{cases:Le,open:Le.length>0,handleClose:function(e){Ge([]),e&&Ue(e)}})]})}),(0,z.jsx)(Z.ZP,{item:!0,xs:12,md:n?12:9,children:(0,z.jsx)(w.RV,(0,x.Z)((0,x.Z)({},ue),{},{children:(0,z.jsx)("form",{onSubmit:ve(Se),children:(0,z.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,z.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex"},children:[(0,z.jsx)(j.Z,{variant:"h5",noWrap:!0,children:"Informaci\xf3n del Caso"}),(0,z.jsx)(S.Z,{sx:{mb:3,mt:3},children:(0,z.jsx)(M.au,{name:"description",label:"Descripci\xf3n del Caso",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)})}),(0,z.jsxs)(S.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"}},children:[(0,z.jsx)(M.au,{name:"code",label:"C\xf3digo de Caso",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsxs)(M.Cc,{name:"providerId",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed),label:"".concat(n?"Referir caso a otra organizaci\xf3n:":"Nombre de organizaci\xf3n a cargo del caso"),children:[(0,z.jsx)("option",{value:0},0),be.map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,z.jsxs)(M.Cc,{name:"userInChargeId",label:"Nombre de contacto principal del caso",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed),children:[(0,z.jsx)("option",{value:0},0),(null!==Ce&&void 0!==Ce?Ce:[]).map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),(0,z.jsx)(C.Z,{sx:{my:2}}),(0,z.jsxs)(S.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"}},children:[(0,z.jsx)(M.au,{name:"jurisdiction",label:"Jurisdicci\xf3n",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"defendant",label:"Imputado",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"defendantId",label:"C\xe9dula de Imputado",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"proceduralStage",label:"Etapa Procesal",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"legalScore",label:"Calificaci\xf3n Jur\xeddica",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)})]})]}),(0,z.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex"},children:[(0,z.jsx)(j.Z,{variant:"h5",noWrap:!0,children:"Informaci\xf3n de la v\xedctima"}),(0,z.jsxs)(S.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},mt:3},children:[(0,z.jsx)(M.au,{name:"victim.id",label:"C\xe9dula",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.name",label:"Nombre (como se indica)",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.otherName",label:"Otros nombres usados",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.email",label:"Correo Electr\xf3nico",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.age",label:"Edad, indicado",type:"number",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.verifiedAge",label:"Edad, verificada",type:"number",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.birthday",label:"Fecha de nacimiento (si es conocida)",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.citizenship",label:"Ciudadan\xeda",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.ethnicity",label:"Etnicidad",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.nationality",label:"Pa\xeds/Providencia de origen",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.originAddress",label:"Direcci\xf3n (de origen)",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.currentAddress",label:"Direcci\xf3n (actual)",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.phoneNumber",label:"N\xfamero(s) de tel\xe9fono",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.preferredLanguage",label:"Idioma Preferido",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(M.au,{name:"victim.children",label:"Cantidad de Hijos",type:"number",disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)})]}),(0,z.jsxs)(S.Z,{sx:{flexDirection:"column",display:"flex",gap:2,mt:3},children:[(0,z.jsx)(ln,{children:"Estado Civil"}),(0,z.jsx)(M.km,{name:"victim.maritalStatus",options:P.bQ,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]})]}),(0,z.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex"},children:[(0,z.jsx)(j.Z,{variant:"h5",noWrap:!0,children:"Proceso de Evaluaci\xf3n"}),(0,z.jsx)(j.Z,{variant:"body2",noWrap:!0,sx:{mb:3},children:"Par ver el formulario, por favor hacer click en cualquier celda de evaluaci\xf3n."}),(0,z.jsx)(Fe,{providerContacts:Ce,currentCase:i,onDemographicClick:function(){return Y(!0)},onInitialSurvivorEvaluationClick:function(){return X(!0)},onFinalSurvivorEvaluationClick:function(){return ee(!0)},onPostSurvivorEvaluationClick:function(){return oe(!0)},onAttentionProtocolClick:function(){return se(!0)},disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)})]}),(0,z.jsx)(Z.ZP,{item:!0,xs:12,md:12,children:(0,z.jsxs)(y.Z,{alignItems:"flex-end",sx:{mt:2},children:[(0,z.jsx)(M.jb,{name:"completed",label:"Marcar caso como cerrado",sx:{mt:3},disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(f.Z,{type:"submit",variant:"contained",loading:me,disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed),children:null!==i&&void 0!==i&&i.id?"Guardar Cambios":"Crear Caso"})]})})]})})}))})]}),"comments"===s&&i&&(0,z.jsx)(q,{currentCase:i}),"tracing"===s&&i&&(0,z.jsx)($e,{}),i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ge,{currentCase:i,open:W,handleClose:function(){return Y(!1)},currentDemographicForm:i.demographicForm,disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(we,{currentCase:i,open:J,handleClose:function(){return X(!1)},currentSurvivorEvaluation:i.initialSurvivorEvaluation,disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(we,{currentCase:i,open:K,handleClose:function(){return ee(!1)},currentSurvivorEvaluation:i.finalSurvivorEvaluation,disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(we,{currentCase:i,open:te,handleClose:function(){return oe(!1)},currentSurvivorEvaluation:i.postSurvivorEvaluation,disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)}),(0,z.jsx)(pe,{currentCase:i,open:le,handleClose:function(){return se(!1)},currentAttentionProtocol:i.attentionProtocol,disabled:(null===i||void 0===i?void 0:i.inactive)||(null===i||void 0===i?void 0:i.completed)})]})]})}function cn(){var e=(0,r.Z)().themeStretch,n=(0,t.UO)().id,i=!!n,d=(0,c.ZP)(n&&"/case/".concat(n)).data;return(0,z.jsx)(a.Z,{title:"Nuevo Caso",children:(0,z.jsxs)(o.Z,{maxWidth:!e&&"lg",children:[(0,z.jsx)(s.Z,{heading:i?"Editar Caso":"Nuevo Caso",links:[{name:"Dashboard",href:l.vB.root},{name:"Casos",href:l.vB.general.cases.list},{name:i?"Caso":"Nuevo Caso"}]}),(0,z.jsx)(sn,{isEdit:i,currentCase:d})]})})}},25334:function(e,n,i){"use strict";i.d(n,{CH:function(){return l},km:function(){return s},Wl:function(){return c},G4:function(){return d}});var t=i(15861),o=i(64687),r=i.n(o),a=i(92033),l=function(){var e=(0,t.Z)(r().mark((function e(n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get(n);case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,t.Z)(r().mark((function e(n,i){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.post(n,i);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),c=function(){var e=(0,t.Z)(r().mark((function e(n,i){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.put(n,i);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),d=function(){var e=(0,t.Z)(r().mark((function e(n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.delete(n);case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},42480:function(){}}]);
//# sourceMappingURL=6460.660dfa4e.chunk.js.map