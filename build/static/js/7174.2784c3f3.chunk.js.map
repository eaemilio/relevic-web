{"version":3,"file":"static/js/7174.2784c3f3.chunk.js","mappings":"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","sources":["sections/auth/new-password/NewPasswordForm.tsx","pages/auth/NewPassword.tsx"],"sourcesContent":["import * as Yup from 'yup';\nimport { useSnackbar } from 'notistack';\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\n// form\nimport { useForm, Controller } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\n// @mui\nimport { Stack, IconButton, OutlinedInput, InputAdornment, FormHelperText } from '@mui/material';\nimport { LoadingButton } from '@mui/lab';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n// components\nimport Iconify from '../../../components/Iconify';\nimport { FormProvider, RHFTextField } from '../../../components/hook-form';\n\n// ----------------------------------------------------------------------\n\ntype FormValuesProps = {\n  code1: string;\n  code2: string;\n  code3: string;\n  code4: string;\n  code5: string;\n  code6: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n};\n\ntype ValueNames = 'code1' | 'code2' | 'code3' | 'code4' | 'code5' | 'code6';\n\nexport default function NewPasswordForm() {\n  const navigate = useNavigate();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [showPassword, setShowPassword] = useState(false);\n\n  const emailRecovery = sessionStorage.getItem('email-recovery');\n\n  const VerifyCodeSchema = Yup.object().shape({\n    code1: Yup.string().required('Code is required'),\n    code2: Yup.string().required('Code is required'),\n    code3: Yup.string().required('Code is required'),\n    code4: Yup.string().required('Code is required'),\n    code5: Yup.string().required('Code is required'),\n    code6: Yup.string().required('Code is required'),\n    email: Yup.string().email('Email must be a valid email address').required('Email is required'),\n    password: Yup.string()\n      .min(6, 'Password must be at least 6 characters')\n      .required('Password is required'),\n    confirmPassword: Yup.string()\n      .required('Confirm password is required')\n      .oneOf([Yup.ref('password'), null], 'Passwords must match'),\n  });\n\n  const defaultValues = {\n    code1: '',\n    code2: '',\n    code3: '',\n    code4: '',\n    code5: '',\n    code6: '',\n    email: emailRecovery || '',\n    password: '',\n    confirmPassword: '',\n  };\n\n  const methods = useForm({\n    mode: 'all',\n    resolver: yupResolver(VerifyCodeSchema),\n    defaultValues,\n  });\n\n  const {\n    control,\n    setValue,\n    handleSubmit,\n    formState: { isSubmitting, errors },\n  } = methods;\n\n  useEffect(() => {\n    const target = document.querySelector('input.field-code');\n\n    target?.addEventListener('paste', handlePaste);\n\n    return () => {\n      target?.removeEventListener('paste', handlePaste);\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handlePaste = (event: any) => {\n    let data = event.clipboardData.getData('text');\n\n    data = data.split('');\n\n    [].forEach.call(document.querySelectorAll('.field-code'), (node: any, index) => {\n      node.value = data[index];\n\n      const fieldIndex = `code${index + 1}`;\n\n      setValue(fieldIndex as ValueNames, data[index]);\n    });\n\n    event.preventDefault();\n  };\n\n  const handleChangeWithNextField = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    handleChange: (event: React.ChangeEvent<HTMLInputElement>) => void\n  ) => {\n    const { maxLength, value, name } = event.target;\n\n    const fieldIndex = name.replace('code', '');\n\n    const fieldIntIndex = Number(fieldIndex);\n\n    if (value.length >= maxLength) {\n      if (fieldIntIndex < 6) {\n        const nextfield = document.querySelector(`input[name=code${fieldIntIndex + 1}]`);\n\n        if (nextfield !== null) {\n          (nextfield as HTMLElement).focus();\n        }\n      }\n    }\n\n    handleChange(event);\n  };\n\n  const onSubmit = async (data: FormValuesProps) => {\n    try {\n      await new Promise((resolve) => setTimeout(resolve, 500));\n      console.log('data:', {\n        email: data.email,\n        code: `${data.code1}${data.code2}${data.code3}${data.code4}${data.code5}${data.code6}`,\n        password: data.password,\n      });\n\n      sessionStorage.removeItem('email-recovery');\n\n      enqueueSnackbar('Change password success!');\n\n      navigate(PATH_DASHBOARD.root, { replace: true });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\n      <Stack spacing={3}>\n        <RHFTextField name=\"email\" label=\"Email\" disabled={!!emailRecovery} />\n\n        <Stack direction=\"row\" spacing={2} justifyContent=\"center\">\n          {['code1', 'code2', 'code3', 'code4', 'code5', 'code6'].map((name, index) => (\n            <Controller\n              key={name}\n              name={`code${index + 1}` as ValueNames}\n              control={control}\n              render={({ field, fieldState: { error } }) => (\n                <OutlinedInput\n                  {...field}\n                  error={!!error}\n                  autoFocus={index === 0}\n                  placeholder=\"-\"\n                  onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                    handleChangeWithNextField(event, field.onChange)\n                  }\n                  inputProps={{\n                    className: 'field-code',\n                    maxLength: 1,\n                    sx: {\n                      p: 0,\n                      textAlign: 'center',\n                      width: { xs: 36, sm: 56 },\n                      height: { xs: 36, sm: 56 },\n                    },\n                  }}\n                />\n              )}\n            />\n          ))}\n        </Stack>\n\n        {(!!errors.code1 ||\n          !!errors.code2 ||\n          !!errors.code3 ||\n          !!errors.code4 ||\n          !!errors.code5 ||\n          !!errors.code6) && (\n          <FormHelperText error sx={{ px: 2 }}>\n            Code is required\n          </FormHelperText>\n        )}\n\n        <RHFTextField\n          name=\"password\"\n          label=\"Password\"\n          type={showPassword ? 'text' : 'password'}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\n                  <Iconify icon={showPassword ? 'eva:eye-fill' : 'eva:eye-off-fill'} />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n\n        <RHFTextField\n          name=\"confirmPassword\"\n          label=\"Confirm New Password\"\n          type={showPassword ? 'text' : 'password'}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\n                  <Iconify icon={showPassword ? 'eva:eye-fill' : 'eva:eye-off-fill'} />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n\n        <LoadingButton\n          fullWidth\n          size=\"large\"\n          type=\"submit\"\n          variant=\"contained\"\n          loading={isSubmitting}\n          sx={{ mt: 3 }}\n        >\n          Change password\n        </LoadingButton>\n      </Stack>\n    </FormProvider>\n  );\n}\n","// @mui\nimport { styled } from '@mui/material/styles';\nimport { Box, Link, Container, Typography } from '@mui/material';\n// layouts\nimport LogoOnlyLayout from '../../layouts/LogoOnlyLayout';\n// components\nimport Page from '../../components/Page';\n// sections\nimport { NewPasswordForm } from '../../sections/auth/new-password';\n// assets\nimport { SentIcon } from '../../assets';\n\n// ----------------------------------------------------------------------\n\nconst ContentStyle = styled('div')(({ theme }) => ({\n  maxWidth: 480,\n  margin: 'auto',\n  minHeight: '100vh',\n  display: 'flex',\n  justifyContent: 'center',\n  flexDirection: 'column',\n  padding: theme.spacing(12, 0),\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function NewPassword() {\n  return (\n    <Page title=\"New Password\">\n      <LogoOnlyLayout />\n\n      <Container>\n        <ContentStyle sx={{ textAlign: 'center' }}>\n          <SentIcon sx={{ mb: 5, mx: 'auto', height: 120 }} />\n\n          <Typography variant=\"h3\" gutterBottom>\n            Request sent successfully!\n          </Typography>\n\n          <Typography sx={{ color: 'text.secondary' }}>\n            We've sent a 6-digit confirmation email to your email.\n            <br />\n            Please enter the code in below box to verify your email.\n          </Typography>\n\n          <Box sx={{ mt: 5, mb: 3 }}>\n            <NewPasswordForm />\n          </Box>\n\n          <Typography variant=\"body2\">\n            Don’t have a code? &nbsp;\n            <Link variant=\"subtitle2\" onClick={() => {}}>\n              Resend code\n            </Link>\n          </Typography>\n        </ContentStyle>\n      </Container>\n    </Page>\n  );\n}\n"],"names":["NewPasswordForm","navigate","useNavigate","enqueueSnackbar","useSnackbar","useState","showPassword","setShowPassword","emailRecovery","sessionStorage","getItem","VerifyCodeSchema","Yup","shape","code1","required","code2","code3","code4","code5","code6","email","password","min","confirmPassword","oneOf","defaultValues","methods","useForm","mode","resolver","yupResolver","control","setValue","handleSubmit","formState","isSubmitting","errors","useEffect","target","document","querySelector","addEventListener","handlePaste","removeEventListener","event","data","clipboardData","getData","split","forEach","call","querySelectorAll","node","index","value","fieldIndex","preventDefault","onSubmit","Promise","resolve","setTimeout","console","log","code","removeItem","PATH_DASHBOARD","replace","error","Stack","spacing","name","label","disabled","direction","justifyContent","map","render","field","fieldState","OutlinedInput","autoFocus","placeholder","onChange","handleChange","maxLength","fieldIntIndex","Number","length","nextfield","focus","handleChangeWithNextField","inputProps","className","sx","p","textAlign","width","xs","sm","height","FormHelperText","px","type","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","edge","Iconify","icon","LoadingButton","fullWidth","size","variant","loading","mt","ContentStyle","styled","maxWidth","margin","minHeight","display","flexDirection","padding","theme","NewPassword","Page","title","LogoOnlyLayout","Container","mb","mx","Typography","gutterBottom","color","Box","Link"],"sourceRoot":""}