"use strict";(self.webpackChunk_ijm_relevic=self.webpackChunk_ijm_relevic||[]).push([[9388],{50103:function(e,r,n){n.d(r,{Z:function(){return x}});var t=n(1413),a=n(45987),o=n(9506),i=n(61113),s=n(90891),l=n(29466),c=n(3404),u=n(46417),d=["links","activeLast"];function p(e){var r=e.links,n=e.activeLast,s=void 0!==n&&n,l=(0,a.Z)(e,d),p=r[r.length-1].name,f=r.map((function(e){return(0,u.jsx)(m,{link:e},e.name)})),x=r.map((function(e){return(0,u.jsx)("div",{children:e.name!==p?(0,u.jsx)(m,{link:e}):(0,u.jsx)(i.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:p})},e.name)}));return(0,u.jsx)(c.Z,(0,t.Z)((0,t.Z)({separator:(0,u.jsx)(o.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},l),{},{children:s?f:x}))}function m(e){var r=e.link,n=r.href,t=r.name,a=r.icon;return(0,u.jsxs)(s.Z,{variant:"body2",component:l.rU,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,u.jsx)(o.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),t]},t)}var f=["links","action","heading","moreLink","sx"];function x(e){var r=e.links,n=e.action,l=e.heading,c=e.moreLink,d=void 0===c?[]:c,m=e.sx,x=(0,a.Z)(e,f);return(0,u.jsxs)(o.Z,{sx:(0,t.Z)({mb:5},m),children:[(0,u.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,u.jsxs)(o.Z,{sx:{flexGrow:1},children:[(0,u.jsx)(i.Z,{variant:"h4",gutterBottom:!0,children:l}),(0,u.jsx)(p,(0,t.Z)({links:r},x))]}),n&&(0,u.jsx)(o.Z,{sx:{flexShrink:0},children:n})]}),(0,u.jsx)(o.Z,{sx:{mt:2},children:"string"===typeof d?(0,u.jsx)(s.Z,{href:d,target:"_blank",rel:"noopener",variant:"body2",children:d}):d.map((function(e){return(0,u.jsx)(s.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},99388:function(e,r,n){n.r(r),n.d(r,{default:function(){return W}});var t=n(97890),a=n(57227),o=n(50177),i=n(22227),s=n(76025),l=n(50103),c=n(92122),u=n(93433),d=n(15861),p=n(1413),m=n(64687),f=n.n(m),x=n(1432),h=n(32703),v=n(17592),Z=n(61113),g=n(9019),b=n(73428),j=n(9506),k=n(35898),y=n(58908),w=n(47313),C=n(75627),R=n(39041),S=n(21190),B=n(36834),P=n(46417),I=(0,v.ZP)(Z.Z)((function(e){var r=e.theme;return(0,p.Z)((0,p.Z)({},r.typography.subtitle2),{},{color:r.palette.text.secondary,marginBottom:r.spacing(1)})}));function M(e){var r=e.isEdit,n=e.currentRole,a=(0,y.Ds)().enqueueSnackbar,o=(0,t.s0)(),i=(0,c.kY)().mutate,l=(0,c.ZP)("/module").data,m=void 0===l?[]:l,v=B.Ry().shape({name:B.Z_().required("Campo obligatorio"),description:B.Z_().required("Campo obligatorio")}),M=(0,w.useMemo)((function(){var e,r,t;return{name:null!==(e=null===n||void 0===n?void 0:n.name)&&void 0!==e?e:"",description:null!==(r=null===n||void 0===n?void 0:n.description)&&void 0!==r?r:"",permissions:(null!==(t=null===n||void 0===n?void 0:n.permissions)&&void 0!==t?t:[]).map((function(e){return e.id}))}}),[n]),N=(0,C.cI)({resolver:(0,x.X)(v),defaultValues:M}),_=N.reset,W=N.handleSubmit,L=N.formState.isSubmitting;(0,w.useEffect)((function(){r&&n&&_(M),r||_(M)}),[r,n]);var E=function(){var e=(0,d.Z)(f().mark((function e(t){var l,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l=t.permissions,!r||!n){e.next=6;break}i("/role",(0,d.Z)(f().mark((function e(){var r,a,o,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:[],e.next=3,(0,S.Wl)("/role/".concat(n.id),t);case 3:return a=e.sent,e.next=6,(0,S.Wl)("/role/".concat(n.id,"/permissions"),{modules:l});case 6:return o=r.filter((function(e){return e.id!==n.id})),e.abrupt("return",[].concat((0,u.Z)(o),[a]));case 8:case"end":return e.stop()}}),e)}))),{revalidate:!1}),e.next=12;break;case 6:if(r){e.next=12;break}return e.next=9,(0,S.km)("/role",t);case 9:return c=e.sent,e.next=12,(0,S.Wl)("/role/".concat(c.id,"/permissions"),{modules:l});case 12:o(s.vB.role.list),a(n?"Cambios guardados":"Rol Creado"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(r){return e.apply(this,arguments)}}();return(0,P.jsx)(C.RV,(0,p.Z)((0,p.Z)({},N),{},{children:(0,P.jsx)("form",{onSubmit:W(E),children:(0,P.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,P.jsx)(g.ZP,{item:!0,xs:12,md:12,sx:{mt:2},children:(0,P.jsxs)(b.Z,{sx:{p:3,flexDirection:"column",display:"flex"},children:[(0,P.jsx)(Z.Z,{variant:"h5",noWrap:!0,children:"Informaci\xf3n General"}),(0,P.jsxs)(j.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},mt:3},children:[(0,P.jsx)(R.au,{name:"name",label:"Nombre del Rol"}),(0,P.jsx)(R.au,{name:"description",label:"Descripci\xf3n"}),(0,P.jsxs)(j.Z,{children:[(0,P.jsx)(I,{children:"A qu\xe9 m\xf3dulos puede acceder este rol?"}),(0,P.jsx)(R.s2,{name:"permissions",options:m.map((function(e){return{value:e.id,label:e.name}})),sx:{"& .MuiFormControlLabel-root":{mr:4}}})]})]})]})}),(0,P.jsx)(g.ZP,{item:!0,xs:12,md:12,children:(0,P.jsx)(k.Z,{alignItems:"flex-end",sx:{mt:2},children:(0,P.jsx)(h.Z,{type:"submit",variant:"contained",loading:L,children:r?"Guardar Cambios":"Crear Rol"})})})]})})}))}var N=n(82846),_=n(95041);function W(){var e=(0,o.Z)().themeStretch,r=(0,t.UO)().id,n=!!r,u=(0,c.ZP)(r&&"/role/".concat(r)).data;return(0,P.jsx)(N.Z,{hasContent:!0,moduleId:_.P.ROLE,onlyRootProvider:!0,children:(0,P.jsx)(i.Z,{title:"Nuevo Rol",children:(0,P.jsxs)(a.Z,{maxWidth:!e&&"lg",children:[(0,P.jsx)(l.Z,{heading:n?"Editar Rol":"Crear un Nuevo Rol",links:[{name:"Dashboard",href:s.vB.root},{name:"Roles",href:s.vB.role.list},{name:n?"Rol":"Nuevo Rol"}]}),(0,P.jsx)(M,{isEdit:n,currentRole:u})]})})})}},21190:function(e,r,n){n.d(r,{CH:function(){return s},km:function(){return l},Wl:function(){return c},G4:function(){return u}});var t=n(15861),a=n(64687),o=n.n(a),i=n(59864),s=function(){var e=(0,t.Z)(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get(r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,t.Z)(o().mark((function e(r,n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post(r,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),c=function(){var e=(0,t.Z)(o().mark((function e(r,n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.put(r,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),u=function(){var e=(0,t.Z)(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.delete(r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},3404:function(e,r,n){n.d(r,{Z:function(){return I}});var t=n(93433),a=n(29439),o=n(4942),i=n(87462),s=n(63366),l=n(47313),c=(n(96214),n(83061)),u=n(21921),d=n(17592),p=n(77342),m=n(61113),f=n(17551),x=n(54750),h=n(46417),v=(0,x.Z)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),Z=n(67999),g=(0,d.ZP)(Z.Z)((function(e){var r=e.theme;return(0,i.Z)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,i.Z)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,i.Z)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,f._4)(r.palette.grey[200],.12)}:{backgroundColor:(0,f._4)(r.palette.grey[600],.12)})})})),b=(0,d.ZP)(v)({width:24,height:16});var j=function(e){var r=e;return(0,h.jsx)("li",{children:(0,h.jsx)(g,(0,i.Z)({focusRipple:!0},e,{ownerState:r,children:(0,h.jsx)(b,{ownerState:r})}))})},k=n(32298);function y(e){return(0,k.Z)("MuiBreadcrumbs",e)}var w=(0,n(77430).Z)("MuiBreadcrumbs",["root","ol","li","separator"]),C=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],R=(0,d.ZP)(m.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,r){return[(0,o.Z)({},"& .".concat(w.li),r.li),r.root]}})({}),S=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,r){return r.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),B=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,r){return r.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function P(e,r,n,t){return e.reduce((function(a,o,i){return i<e.length-1?a=a.concat(o,(0,h.jsx)(B,{"aria-hidden":!0,className:r,ownerState:t,children:n},"separator-".concat(i))):a.push(o),a}),[])}var I=l.forwardRef((function(e,r){var n=(0,p.Z)({props:e,name:"MuiBreadcrumbs"}),o=n.children,d=n.className,m=n.component,f=void 0===m?"nav":m,x=n.expandText,v=void 0===x?"Show path":x,Z=n.itemsAfterCollapse,g=void 0===Z?1:Z,b=n.itemsBeforeCollapse,k=void 0===b?1:b,w=n.maxItems,B=void 0===w?8:w,I=n.separator,M=void 0===I?"/":I,N=(0,s.Z)(n,C),_=l.useState(!1),W=(0,a.Z)(_,2),L=W[0],E=W[1],G=(0,i.Z)({},n,{component:f,expanded:L,expandText:v,itemsAfterCollapse:g,itemsBeforeCollapse:k,maxItems:B,separator:M}),q=function(e){var r=e.classes;return(0,u.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},y,r)}(G),A=l.useRef(null),z=l.Children.toArray(o).filter((function(e){return l.isValidElement(e)})).map((function(e,r){return(0,h.jsx)("li",{className:q.li,children:e},"child-".concat(r))}));return(0,h.jsx)(R,(0,i.Z)({ref:r,component:f,color:"text.secondary",className:(0,c.Z)(q.root,d),ownerState:G},N,{children:(0,h.jsx)(S,{className:q.ol,ref:A,ownerState:G,children:P(L||B&&z.length<=B?z:function(e){return k+g>=e.length?e:[].concat((0,t.Z)(e.slice(0,k)),[(0,h.jsx)(j,{"aria-label":v,onClick:function(){E(!0);var e=A.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],(0,t.Z)(e.slice(e.length-g,e.length)))}(z),q.separator,M,G)})}))}))}}]);